<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Cache-Control" content="max-age=0" />
        <meta http-equiv="expires" content="0" />
        <title>DigiCount by Muhannad Senan</title>
        
        <link rel="apple-touch-icon" href="assets/img/favicon.png" sizes="180x180">
        <link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
        <link rel="shortcut icon" href="assets/img/favicon.png">
		<style>button,select{background:0 0;color:#c6ff00}#clicker,body{position:fixed;top:0;right:0}#counter,.color-primary,button,select{color:#c6ff00}#panel,button{padding:0;font-family:Oxanium,Almarai}#panel,#recordTitle,body,button{font-family:Oxanium,Almarai}#panel .settings label,body,button{cursor:pointer}#panel .record .record-body .today,.main{top:2rem}#chart-panel canvas,.col-12{width:100%!important}#panel,#recordTitle,#total{right:-300%}html{font-size:16px;height:-webkit-fill-available}body{min-height:100vh;min-height:-webkit-fill-available;z-index:0;left:0;background:#c6ff00;color:#2f2f2f;font-size:5rem;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body>.container{position:absolute;top:0;bottom:0;right:0;left:0;overflow:hidden}.container.border{border:1rem solid #c6ff00}.tab-pane h3,h1,h2,h3,h4,h5,h6{margin:3rem 0;text-align:center}h5{font-weight:100;font-size:4.65rem}p{margin:0}#panel .record .dropdown .goal,#panel .record .dropdown .total,small{font-size:3rem}input[type=password],input[type=text]{background:0 0;width:100%;font-size:4rem;font-family:Oxanium,Almarai;color:#c6ff00;border:0}button{line-height:1;border:0;font-size:7rem;z-index:101;position:relative;vertical-align:middle}button span,select{font-size:5rem}button[disabled]{opacity:.4}select{text-align:center;padding:1rem;border:1px solid #c6ff00;border-radius:1rem}footer,footer #percent{font-size:3rem;text-align:center}i{line-height:unset}.d-none{display:none!important}.d-flex{display:-webkit-flexbox;display:-webkit-flex;display:flex}#panel .record button.details .close,#panel .record.showDropdown button.details .show,.animated #loading-panel,.animated #please-login,.tab-pane{display:none}.flex-col{flex-flow:column}.justify-content-between{-webkit-justify-content:space-between;justify-content:space-between}.justify-content-around{-webkit-justify-content:space-around;justify-content:space-around}.justify-content-center{-webkit-justify-content:center;justify-content:center}.align-items-center{align-items:center}.m-0{margin:0!important}.m-1{margin:1rem!important}.m-2{margin:2rem!important}.m-3{margin:3rem!important}.m-auto{margin:auto!important}.mb-0{margin-bottom:0!important}.mt-0{margin-top:0!important}.mr-0{margin-right:0!important}.ml-0{margin-left:0!important}.mb-1{margin-bottom:1rem!important}.mt-1{margin-top:1rem!important}.mr-1{margin-right:1rem!important}.ml-1{margin-left:1rem!important}.mb-2{margin-bottom:2rem!important}.mt-2{margin-top:2rem!important}.mr-2{margin-right:2rem!important}.ml-2{margin-left:2rem!important}.mb-3{margin-bottom:3rem!important}.mt-3{margin-top:3rem!important}.mr-3{margin-right:3rem!important}.ml-3{margin-left:3rem!important}.ml-auto{margin-left:auto}.my-0{margin-bottom:0!important;margin-top:0!important}.my-1{margin-bottom:1rem!important;margin-top:1rem!important}.my-2{margin-bottom:2rem!important;margin-top:2rem!important}.my-3{margin-bottom:3rem!important;margin-top:3rem!important}.mx-0{margin-right:0!important;margin-left:0!important}.mx-1{margin-right:1rem!important;margin-left:1rem!important}.mx-2{margin-right:2rem!important;margin-left:2rem!important}.mx-3{margin-right:3rem!important;margin-left:3rem!important}.p-0{padding:0!important}.p-1{padding:1rem!important}.p-2{padding:2rem!important}.p-3{padding:3rem!important}.pb-0{padding-bottom:0!important}.pt-0{padding-top:0!important}.pr-0{padding-right:0!important}.pl-0{padding-left:0!important}.pb-1{padding-bottom:1rem!important}.pt-1{padding-top:1rem!important}.pr-1{padding-right:1rem!important}.pl-1{padding-left:1rem!important}.pb-2{padding-bottom:2rem!important}.pt-2{padding-top:2rem!important}.pr-2{padding-right:2rem!important}.pl-2{padding-left:2rem!important}.pb-3{padding-bottom:3rem!important}.pt-3{padding-top:3rem!important}.pr-3{padding-right:3rem!important}.pl-3{padding-left:3rem!important}.py-0{padding-bottom:0!important;padding-top:0!important}.py-1{padding-bottom:1rem!important;padding-top:1rem!important}.py-2{padding-bottom:2rem!important;padding-top:2rem!important}.py-3{padding-bottom:3rem!important;padding-top:3rem!important}.px-0{padding-right:0!important;padding-left:0!important}.px-1{padding-right:1rem!important;padding-left:1rem!important}.px-2{padding-right:2rem!important;padding-left:2rem!important}.px-3{padding-right:3rem!important;padding-left:3rem!important}.col-10{width:83.3%!important}.col-8{width:66.6%!important}.col-6{width:50%!important}.col-4{width:33.3%!important}.col-3{width:25%!important}#clicker,#logoutBtn:active:after,#showPrayers:active:after,.tab-btn.active:after,.w-100{width:100%}.color-primary{border-color:#c6ff00}.color-secondary{color:#638000;border-color:#638000}.color-danger{color:#ff3737!important;border-color:#ff3737!important}#logoutBtn,.color-grey{color:#777!important}.color-grey{border-color:#fff!important}.color-green{color:#0a8c3f!important;border-color:#0a8c3f!important}.color-dark{color:#2f2f2f!important;border-color:#2f2f2f!important}.color-white{color:#fff!important;border-color:#fff!important}.btn.color-primary{background:#c6ff00;color:#2f2f2f!important}.bg-grey,.btn.color-grey{background:#777;color:#fff!important}.btn.color-green{background:#0a8c3f;color:#2f2f2f!important}.bg-green{background:#0a8c3f;color:#2f2f2f}.bg-primary{background:#c6ff00;color:#2f2f2f}.hide,.info{opacity:0}.height-0{height:0}.w-200{width:200%}.w-300{width:300%}.w-400{width:400%}.w-500{width:500%}.border{border:.25rem solid #777;border-radius:1rem}.border-0{border:0!important}.border-grey{border-color:grey!important}.pos-right{position:absolute;right:0}#panel .record .dropdown div.buttons,.main,footer{right:2rem;left:2rem}.text-center{text-align:center}.fa-pull-right,.float-right{float:right}.fa-pull-left,.float-left{float:left}.font-3{font-size:3rem!important}.font-4{font-size:4rem!important}.transition{-webkit-transition-duration:.3s;-moz-transition-duration:.3s;-o-transition-duration:.3s;transition-duration:.3s;-webkit-transition-timing-function:ease-out;-moz-transition-timing-function:ease-out;-o-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transition-delay:0;-moz-transition-delay:0;-o-transition-delay:0;transition-delay:0}.trans-time-05s{-webkit-transition-duration:.5s;-moz-transition-duration:.5s;-o-transition-duration:.5s;transition-duration:.5s}.trans-height{-webkit-transition-property:height;-moz-transition-property:height;-o-transition-property:height;transition-property:height}.trans-left{-webkit-transition-property:left;-moz-transition-property:left;-o-transition-property:left;transition-property:left}.trans-right{-webkit-transition-property:right;-moz-transition-property:right;-o-transition-property:right;transition-property:right}#please-login{z-index:-100;position:relative}#please-login .loading{text-align:center;width:100%}#clicker{height:100vh;border:0 solid green;z-index:100;cursor:copy}#counter,#panel,#panel #showSettings,#panel .panel-footer,#panel .record .dropdown div.buttons,#panel .record .record-body span,#progress,#progress .val,#recordTitle,.main,.main .info,.position-right,.tab-btn:after,button#reset,footer,footer #percent{position:absolute}#counter{right:8rem;left:8rem;font-size:9rem;margin:0 auto;line-height:7rem;text-align:center}.main{bottom:8rem}.main .info{text-align:center;color:#777;bottom:5%;left:6rem;right:0}.main .info #user{font-size:4rem}.main .info .label{font-size:4rem;line-height:4rem;height:4rem;vertical-align:middle;width:20rem;display:inline-block;text-align:left}.main .info .number{font-size:6rem;line-height:5rem;width:20rem;text-align:left}#recordTitle{top:12rem;left:6rem;font-size:7rem;color:#fff;text-align:center}#panel,#panel .record.color-primary button,.tab-btn.active{color:#c6ff00}#progress{border:.5rem solid #777;top:9rem;bottom:0;width:4rem;border-radius:.5rem;left:-200%}#progress .val{transition:.5s,width .5s .8s;background:#c6ff00;width:100%;height:0%;bottom:0;left:0;border-radius:0 0 .1rem .1rem}#progress .val .goal-achieved-label{display:none;font-size:1.9rem;line-height:5rem;height:100%;vertical-align:middle;flex-flow:wrap;text-align:center;margin-left:auto;margin-right:auto;overflow:hidden}#progress .val .goal-achieved-label i{margin-left:0}#progress .val.goal-achieved .label{display:flex;text-orientation:upright;writing-mode:vertical-rl;line-height:25px}#progress .val.c-100{border-radius:0;height:100%}#progress .val.c-99{height:99%}#progress .val.c-98{height:98%}#progress .val.c-97{height:97%}#progress .val.c-96{height:96%}#progress .val.c-95{height:95%}#progress .val.c-94{height:94%}#progress .val.c-93{height:93%}#progress .val.c-92{height:92%}#progress .val.c-91{height:91%}#progress .val.c-90{height:90%}#progress .val.c-89{height:89%}#progress .val.c-88{height:88%}#progress .val.c-87{height:87%}#progress .val.c-86{height:86%}#progress .val.c-85{height:85%}#progress .val.c-84{height:84%}#progress .val.c-83{height:83%}#progress .val.c-82{height:82%}#progress .val.c-81{height:81%}#progress .val.c-80{height:80%}#progress .val.c-79{height:79%}#progress .val.c-78{height:78%}#progress .val.c-77{height:77%}#progress .val.c-76{height:76%}#progress .val.c-75{height:75%}#progress .val.c-74{height:74%}#progress .val.c-73{height:73%}#progress .val.c-72{height:72%}#progress .val.c-71{height:71%}#progress .val.c-70{height:70%}#progress .val.c-69{height:69%}#progress .val.c-68{height:68%}#progress .val.c-67{height:67%}#progress .val.c-66{height:66%}#progress .val.c-65{height:65%}#progress .val.c-64{height:64%}#progress .val.c-63{height:63%}#progress .val.c-62{height:62%}#progress .val.c-61{height:61%}#progress .val.c-60{height:60%}#progress .val.c-59{height:59%}#progress .val.c-58{height:58%}#progress .val.c-57{height:57%}#progress .val.c-56{height:56%}#progress .val.c-55{height:55%}#progress .val.c-54{height:54%}#progress .val.c-53{height:53%}#progress .val.c-52{height:52%}#progress .val.c-51{height:51%}#progress .val.c-50{height:50%}#progress .val.c-49{height:49%}#progress .val.c-48{height:48%}#progress .val.c-47{height:47%}#progress .val.c-46{height:46%}#progress .val.c-45{height:45%}#progress .val.c-44{height:44%}#progress .val.c-43{height:43%}#progress .val.c-42{height:42%}#progress .val.c-41{height:41%}#progress .val.c-40{height:40%}#progress .val.c-39{height:39%}#progress .val.c-38{height:38%}#progress .val.c-37{height:37%}#progress .val.c-36{height:36%}#progress .val.c-35{height:35%}#progress .val.c-34{height:34%}#progress .val.c-33{height:33%}#progress .val.c-32{height:32%}#progress .val.c-31{height:31%}#progress .val.c-30{height:30%}#progress .val.c-29{height:29%}#progress .val.c-28{height:28%}#progress .val.c-27{height:27%}#progress .val.c-26{height:26%}#progress .val.c-25{height:25%}#progress .val.c-24{height:24%}#progress .val.c-23{height:23%}#progress .val.c-22{height:22%}#progress .val.c-21{height:21%}#progress .val.c-20{height:20%}#progress .val.c-19{height:19%}#progress .val.c-18{height:18%}#progress .val.c-17{height:17%}#progress .val.c-16{height:16%}#progress .val.c-15{height:15%}#progress .val.c-14{height:14%}#progress .val.c-13{height:13%}#progress .val.c-12{height:12%}#progress .val.c-11{height:11%}#progress .val.c-10{height:10%}#progress .val.c-9{height:9%}#progress .val.c-8{height:8%}#progress .val.c-7{height:7%}#progress .val.c-6{height:6%}#progress .val.c-5{height:5%}#progress .val.c-4{height:4%}#progress .val.c-3{height:3%}#progress .val.c-2{height:2%}#progress .val.c-1{height:1%}#progress .val.c-0{height:0%}footer{color:#777;height:5rem;line-height:5rem;vertical-align:middle;bottom:-100%}footer #percent{color:#2f2f2f;bottom:0;left:0}button#reset{left:0}.position-right{top:0;right:0}#panel{width:100%;background:#212121;z-index:-9999;top:0;bottom:0;font-size:4rem;overflow-x:hidden;border:0}#panel.show{right:0;z-index:102}#panel #showSettings{top:0;left:0;padding:2rem}#panel #hideSettings,.fa-ul>li{position:relative}#panel .panel-heading{text-align:center;font-size:6rem;color:#777}#panel .panel-body{margin-top:-15px}#panel .settings{overflow:hidden;background:#3c3b3b;opacity:0}#logoutBtn:after,#showPrayers:after,.tab-btn:after{content:"";width:0;background:#c6ff00;transition:width .3s;left:0}#panel .settings.show{height:27rem;border:2px solid #fff;padding:1rem;border-radius:10px;opacity:1}#panel .add-record input{width:100%;border:1px solid #c6ff00;border-bottom-width:7px}#panel .add-record button{margin-top:-10px}#panel .records{font-size:4rem;color:#638000;border-top:.25rem solid rgba(148,147,147,.5)}#panel .records .record{position:relative;border-bottom:.25rem solid #949393;opacity:.5}#panel .record button{color:#638000}#panel .record button.details{top:4px;font-size:5rem;padding-top:2.5rem}#panel .record p{color:#fff;line-height:4rem}#panel .record.active{opacity:1}#panel .record .record-body{height:10.25rem}#panel .record .record-body i{padding:1.7rem 0}#panel .record .record-body span{line-height:2.5rem;vertical-align:middle;margin:0;font-size:2.5rem;color:#fff}#panel .record .record-body .progress{top:6rem}#panel .record .record-body .title .label{left:16rem;color:#c6ff00;line-height:4rem;font-size:4rem;white-space:pre-wrap;height:10.25rem;vertical-align:middle;overflow:hidden;right:5rem;display:flex;align-items:center}#panel .record .record-body .title .done{left:15rem;position:absolute;top:3rem;font-size:5rem}#panel .record .record-body .title .done+.label{padding-left:5rem}#panel .record .dropdown{height:0;border:0 solid #fff;border-top:0;background:#3c3b3b;overflow:hidden;position:relative}#panel .record .dropdown .deleteRecord{color:#de3434}#panel .record .dropdown small{display:block;padding-bottom:.5rem}#panel .record .dropdown .total span{padding-left:10rem;font-weight:700}#panel .record .dropdown .goal span{padding-left:1rem;font-weight:700}#panel .record.showDropdown{padding-bottom:2rem}#panel .record.showDropdown button.details .close,.tab-pane.active{display:block}#panel .record.showDropdown .dropdown{height:22rem}#panel .panel-footer{color:#fff;font-size:3rem;text-align:center;bottom:0}.tabs-header{border-bottom:2px solid #444;margin-bottom:2rem}.tab-btn{background:0 0;border:0;color:#777;font-size:3rem;padding:1.5rem 2rem;position:relative;transition:.2s;flex:1}.tab-btn:after{bottom:-2px;height:2px}.tab-pane{animation:.3s fadeIn}.tab-pane li,.tab-pane p{font-size:2.5rem;color:#fff}@keyframes fadeIn{from{opacity:0}to{opacity:1}}#logoutBtn,#showPrayers{height:8rem;background:rgba(68,68,68,.15);border:0;border-radius:0;transition:.2s cubic-bezier(.68, -.55, .265, 1.55);font-size:3rem!important;align-items:center;width:47%;padding:2rem 1rem;position:relative;text-transform:uppercase;letter-spacing:2px;font-weight:700}#chart-panel,.animated{background:#2f2f2f}#showPrayers{color:#c6ff00!important;padding:0}#logoutBtn:after,#showPrayers:after{position:absolute;bottom:0;height:3px}#logoutBtn:active,#showPrayers:active{background:rgba(119,119,119,.2);transform:translateY(2px)}#logoutBtn:active:after{background:#ff3737}#showPrayers img{width:auto;height:8rem;margin-right:1rem}#logoutBtn i{font-size:4rem;color:#ff3737}#chart-panel{width:100%;position:absolute;left:-200%;right:300%;top:0;bottom:0;z-index:-1;overflow-y:scroll}#chart-panel.show{left:0;right:0;z-index:103}#chart-panel .loading{justify-content:center;height:100%;align-items:center;font-size:20rem;opacity:.1;position:absolute;top:0;right:0;left:0}#chart-panel .total{text-align:center;color:#c6ff00}#chart-panel .chart-container{width:100%;min-height:50vh;height:90vh}#chart-panel canvas{height:50vh!important}.pulse{animation:1s pulse}.pulseLong{animation:3s pulse}.pulseText{animation:1s pulseText}.pulseTextLong{animation:4s pulseText}.btn-block{font-size:5rem;padding:2rem;border:.25rem solid #0a8c3f;border-radius:1rem;margin-top:2rem;color:#0a8c3f;width:100%}@font-face{font-family:Oxanium;font-style:normal;font-weight:400;font-display:swap;src:local('Oxanium Regular'),local('Oxanium-Regular'),url('assets/fonts/Oxanium-Regular.woff2') format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Almarai;font-style:normal;font-weight:400;font-display:swap;src:local('Almarai'),local('Almarai-Regular'),url('assets/fonts/Almarai-Regular.woff2') format('woff2');unicode-range:U+0600-06FF,U+200C-200E,U+2010-2011,U+204F,U+2E41,U+FB50-FDFF,U+FE80-FEFC}.fa,.fab,.fal,.far,.fas{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-block;font-style:normal;font-variant:normal;text-rendering:auto;line-height:1}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x,.fa-stack-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:.08em solid #eee;border-radius:.1em;padding:.2em .25em .15em}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{animation:2s linear infinite fa-spin}.fa-pulse{animation:1s steps(8) infinite fa-spin}@keyframes fa-spin{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.fa-rotate-90{transform:rotate(90deg)}.fa-rotate-180{transform:rotate(180deg)}.fa-rotate-270{transform:rotate(270deg)}.fa-flip-horizontal{transform:scaleX(-1)}.fa-flip-vertical{transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{transform:scale(-1)}:root .fa-flip-both,:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{filter:none}.fa-stack{display:inline-block;height:2em;line-height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{left:0;position:absolute;text-align:center;width:100%}.fa-stack-1x{line-height:inherit}.fa-inverse{color:#fff}.fa-500px:before{content:"\f26e"}.fa-accessible-icon:before{content:"\f368"}.fa-accusoft:before{content:"\f369"}.fa-acquisitions-incorporated:before{content:"\f6af"}.fa-ad:before{content:"\f641"}.fa-address-book:before{content:"\f2b9"}.fa-address-card:before{content:"\f2bb"}.fa-adjust:before{content:"\f042"}.fa-adn:before{content:"\f170"}.fa-adobe:before{content:"\f778"}.fa-adversal:before{content:"\f36a"}.fa-affiliatetheme:before{content:"\f36b"}.fa-air-freshener:before{content:"\f5d0"}.fa-algolia:before{content:"\f36c"}.fa-align-center:before{content:"\f037"}.fa-align-justify:before{content:"\f039"}.fa-align-left:before{content:"\f036"}.fa-align-right:before{content:"\f038"}.fa-alipay:before{content:"\f642"}.fa-allergies:before{content:"\f461"}.fa-amazon:before{content:"\f270"}.fa-amazon-pay:before{content:"\f42c"}.fa-ambulance:before{content:"\f0f9"}.fa-american-sign-language-interpreting:before{content:"\f2a3"}.fa-amilia:before{content:"\f36d"}.fa-anchor:before{content:"\f13d"}.fa-android:before{content:"\f17b"}.fa-angellist:before{content:"\f209"}.fa-angle-double-down:before{content:"\f103"}.fa-angle-double-left:before{content:"\f100"}.fa-angle-double-right:before{content:"\f101"}.fa-angle-double-up:before{content:"\f102"}.fa-angle-down:before{content:"\f107"}.fa-angle-left:before{content:"\f104"}.fa-angle-right:before{content:"\f105"}.fa-angle-up:before{content:"\f106"}.fa-angry:before{content:"\f556"}.fa-angrycreative:before{content:"\f36e"}.fa-angular:before{content:"\f420"}.fa-ankh:before{content:"\f644"}.fa-app-store:before{content:"\f36f"}.fa-app-store-ios:before{content:"\f370"}.fa-apper:before{content:"\f371"}.fa-apple:before{content:"\f179"}.fa-apple-alt:before{content:"\f5d1"}.fa-apple-pay:before{content:"\f415"}.fa-archive:before{content:"\f187"}.fa-archway:before{content:"\f557"}.fa-arrow-alt-circle-down:before{content:"\f358"}.fa-arrow-alt-circle-left:before{content:"\f359"}.fa-arrow-alt-circle-right:before{content:"\f35a"}.fa-arrow-alt-circle-up:before{content:"\f35b"}.fa-arrow-circle-down:before{content:"\f0ab"}.fa-arrow-circle-left:before{content:"\f0a8"}.fa-arrow-circle-right:before{content:"\f0a9"}.fa-arrow-circle-up:before{content:"\f0aa"}.fa-arrow-down:before{content:"\f063"}.fa-arrow-left:before{content:"\f060"}.fa-arrow-right:before{content:"\f061"}.fa-arrow-up:before{content:"\f062"}.fa-arrows-alt:before{content:"\f0b2"}.fa-arrows-alt-h:before{content:"\f337"}.fa-arrows-alt-v:before{content:"\f338"}.fa-artstation:before{content:"\f77a"}.fa-assistive-listening-systems:before{content:"\f2a2"}.fa-asterisk:before{content:"\f069"}.fa-asymmetrik:before{content:"\f372"}.fa-at:before{content:"\f1fa"}.fa-atlas:before{content:"\f558"}.fa-atlassian:before{content:"\f77b"}.fa-atom:before{content:"\f5d2"}.fa-audible:before{content:"\f373"}.fa-audio-description:before{content:"\f29e"}.fa-autoprefixer:before{content:"\f41c"}.fa-avianex:before{content:"\f374"}.fa-aviato:before{content:"\f421"}.fa-award:before{content:"\f559"}.fa-aws:before{content:"\f375"}.fa-baby:before{content:"\f77c"}.fa-baby-carriage:before{content:"\f77d"}.fa-backspace:before{content:"\f55a"}.fa-backward:before{content:"\f04a"}.fa-bacon:before{content:"\f7e5"}.fa-balance-scale:before{content:"\f24e"}.fa-ban:before{content:"\f05e"}.fa-band-aid:before{content:"\f462"}.fa-bandcamp:before{content:"\f2d5"}.fa-barcode:before{content:"\f02a"}.fa-bars:before{content:"\f0c9"}.fa-baseball-ball:before{content:"\f433"}.fa-basketball-ball:before{content:"\f434"}.fa-bath:before{content:"\f2cd"}.fa-battery-empty:before{content:"\f244"}.fa-battery-full:before{content:"\f240"}.fa-battery-half:before{content:"\f242"}.fa-battery-quarter:before{content:"\f243"}.fa-battery-three-quarters:before{content:"\f241"}.fa-bed:before{content:"\f236"}.fa-beer:before{content:"\f0fc"}.fa-behance:before{content:"\f1b4"}.fa-behance-square:before{content:"\f1b5"}.fa-bell:before{content:"\f0f3"}.fa-bell-slash:before{content:"\f1f6"}.fa-bezier-curve:before{content:"\f55b"}.fa-bible:before{content:"\f647"}.fa-bicycle:before{content:"\f206"}.fa-bimobject:before{content:"\f378"}.fa-binoculars:before{content:"\f1e5"}.fa-biohazard:before{content:"\f780"}.fa-birthday-cake:before{content:"\f1fd"}.fa-bitbucket:before{content:"\f171"}.fa-bitcoin:before{content:"\f379"}.fa-bity:before{content:"\f37a"}.fa-black-tie:before{content:"\f27e"}.fa-blackberry:before{content:"\f37b"}.fa-blender:before{content:"\f517"}.fa-blender-phone:before{content:"\f6b6"}.fa-blind:before{content:"\f29d"}.fa-blog:before{content:"\f781"}.fa-blogger:before{content:"\f37c"}.fa-blogger-b:before{content:"\f37d"}.fa-bluetooth:before{content:"\f293"}.fa-bluetooth-b:before{content:"\f294"}.fa-bold:before{content:"\f032"}.fa-bolt:before{content:"\f0e7"}.fa-bomb:before{content:"\f1e2"}.fa-bone:before{content:"\f5d7"}.fa-bong:before{content:"\f55c"}.fa-book:before{content:"\f02d"}.fa-book-dead:before{content:"\f6b7"}.fa-book-medical:before{content:"\f7e6"}.fa-book-open:before{content:"\f518"}.fa-book-reader:before{content:"\f5da"}.fa-bookmark:before{content:"\f02e"}.fa-bowling-ball:before{content:"\f436"}.fa-box:before{content:"\f466"}.fa-box-open:before{content:"\f49e"}.fa-boxes:before{content:"\f468"}.fa-braille:before{content:"\f2a1"}.fa-brain:before{content:"\f5dc"}.fa-bread-slice:before{content:"\f7ec"}.fa-briefcase:before{content:"\f0b1"}.fa-briefcase-medical:before{content:"\f469"}.fa-broadcast-tower:before{content:"\f519"}.fa-broom:before{content:"\f51a"}.fa-brush:before{content:"\f55d"}.fa-btc:before{content:"\f15a"}.fa-bug:before{content:"\f188"}.fa-building:before{content:"\f1ad"}.fa-bullhorn:before{content:"\f0a1"}.fa-bullseye:before{content:"\f140"}.fa-burn:before{content:"\f46a"}.fa-buromobelexperte:before{content:"\f37f"}.fa-bus:before{content:"\f207"}.fa-bus-alt:before{content:"\f55e"}.fa-business-time:before{content:"\f64a"}.fa-buysellads:before{content:"\f20d"}.fa-calculator:before{content:"\f1ec"}.fa-calendar:before{content:"\f133"}.fa-calendar-alt:before{content:"\f073"}.fa-calendar-check:before{content:"\f274"}.fa-calendar-day:before{content:"\f783"}.fa-calendar-minus:before{content:"\f272"}.fa-calendar-plus:before{content:"\f271"}.fa-calendar-times:before{content:"\f273"}.fa-calendar-week:before{content:"\f784"}.fa-camera:before{content:"\f030"}.fa-camera-retro:before{content:"\f083"}.fa-campground:before{content:"\f6bb"}.fa-canadian-maple-leaf:before{content:"\f785"}.fa-candy-cane:before{content:"\f786"}.fa-cannabis:before{content:"\f55f"}.fa-capsules:before{content:"\f46b"}.fa-car:before{content:"\f1b9"}.fa-car-alt:before{content:"\f5de"}.fa-car-battery:before{content:"\f5df"}.fa-car-crash:before{content:"\f5e1"}.fa-car-side:before{content:"\f5e4"}.fa-caret-down:before{content:"\f0d7"}.fa-caret-left:before{content:"\f0d9"}.fa-caret-right:before{content:"\f0da"}.fa-caret-square-down:before{content:"\f150"}.fa-caret-square-left:before{content:"\f191"}.fa-caret-square-right:before{content:"\f152"}.fa-caret-square-up:before{content:"\f151"}.fa-caret-up:before{content:"\f0d8"}.fa-carrot:before{content:"\f787"}.fa-cart-arrow-down:before{content:"\f218"}.fa-cart-plus:before{content:"\f217"}.fa-cash-register:before{content:"\f788"}.fa-cat:before{content:"\f6be"}.fa-cc-amazon-pay:before{content:"\f42d"}.fa-cc-amex:before{content:"\f1f3"}.fa-cc-apple-pay:before{content:"\f416"}.fa-cc-diners-club:before{content:"\f24c"}.fa-cc-discover:before{content:"\f1f2"}.fa-cc-jcb:before{content:"\f24b"}.fa-cc-mastercard:before{content:"\f1f1"}.fa-cc-paypal:before{content:"\f1f4"}.fa-cc-stripe:before{content:"\f1f5"}.fa-cc-visa:before{content:"\f1f0"}.fa-centercode:before{content:"\f380"}.fa-centos:before{content:"\f789"}.fa-certificate:before{content:"\f0a3"}.fa-chair:before{content:"\f6c0"}.fa-chalkboard:before{content:"\f51b"}.fa-chalkboard-teacher:before{content:"\f51c"}.fa-charging-station:before{content:"\f5e7"}.fa-chart-area:before{content:"\f1fe"}.fa-chart-bar:before{content:"\f080"}.fa-chart-line:before{content:"\f201"}.fa-chart-pie:before{content:"\f200"}.fa-check:before{content:"\f00c"}.fa-check-circle:before{content:"\f058"}.fa-check-double:before{content:"\f560"}.fa-check-square:before{content:"\f14a"}.fa-cheese:before{content:"\f7ef"}.fa-chess:before{content:"\f439"}.fa-chess-bishop:before{content:"\f43a"}.fa-chess-board:before{content:"\f43c"}.fa-chess-king:before{content:"\f43f"}.fa-chess-knight:before{content:"\f441"}.fa-chess-pawn:before{content:"\f443"}.fa-chess-queen:before{content:"\f445"}.fa-chess-rook:before{content:"\f447"}.fa-chevron-circle-down:before{content:"\f13a"}.fa-chevron-circle-left:before{content:"\f137"}.fa-chevron-circle-right:before{content:"\f138"}.fa-chevron-circle-up:before{content:"\f139"}.fa-chevron-down:before{content:"\f078"}.fa-chevron-left:before{content:"\f053"}.fa-chevron-right:before{content:"\f054"}.fa-chevron-up:before{content:"\f077"}.fa-child:before{content:"\f1ae"}.fa-chrome:before{content:"\f268"}.fa-church:before{content:"\f51d"}.fa-circle:before{content:"\f111"}.fa-circle-notch:before{content:"\f1ce"}.fa-city:before{content:"\f64f"}.fa-clinic-medical:before{content:"\f7f2"}.fa-clipboard:before{content:"\f328"}.fa-clipboard-check:before{content:"\f46c"}.fa-clipboard-list:before{content:"\f46d"}.fa-clock:before{content:"\f017"}.fa-clone:before{content:"\f24d"}.fa-closed-captioning:before{content:"\f20a"}.fa-cloud:before{content:"\f0c2"}.fa-cloud-download-alt:before{content:"\f381"}.fa-cloud-meatball:before{content:"\f73b"}.fa-cloud-moon:before{content:"\f6c3"}.fa-cloud-moon-rain:before{content:"\f73c"}.fa-cloud-rain:before{content:"\f73d"}.fa-cloud-showers-heavy:before{content:"\f740"}.fa-cloud-sun:before{content:"\f6c4"}.fa-cloud-sun-rain:before{content:"\f743"}.fa-cloud-upload-alt:before{content:"\f382"}.fa-cloudscale:before{content:"\f383"}.fa-cloudsmith:before{content:"\f384"}.fa-cloudversify:before{content:"\f385"}.fa-cocktail:before{content:"\f561"}.fa-code:before{content:"\f121"}.fa-code-branch:before{content:"\f126"}.fa-codepen:before{content:"\f1cb"}.fa-codiepie:before{content:"\f284"}.fa-coffee:before{content:"\f0f4"}.fa-cog:before{content:"\f013"}.fa-cogs:before{content:"\f085"}.fa-coins:before{content:"\f51e"}.fa-columns:before{content:"\f0db"}.fa-comment:before{content:"\f075"}.fa-comment-alt:before{content:"\f27a"}.fa-comment-dollar:before{content:"\f651"}.fa-comment-dots:before{content:"\f4ad"}.fa-comment-medical:before{content:"\f7f5"}.fa-comment-slash:before{content:"\f4b3"}.fa-comments:before{content:"\f086"}.fa-comments-dollar:before{content:"\f653"}.fa-compact-disc:before{content:"\f51f"}.fa-compass:before{content:"\f14e"}.fa-compress:before{content:"\f066"}.fa-compress-arrows-alt:before{content:"\f78c"}.fa-concierge-bell:before{content:"\f562"}.fa-confluence:before{content:"\f78d"}.fa-connectdevelop:before{content:"\f20e"}.fa-contao:before{content:"\f26d"}.fa-cookie:before{content:"\f563"}.fa-cookie-bite:before{content:"\f564"}.fa-copy:before{content:"\f0c5"}.fa-copyright:before{content:"\f1f9"}.fa-couch:before{content:"\f4b8"}.fa-cpanel:before{content:"\f388"}.fa-creative-commons:before{content:"\f25e"}.fa-creative-commons-by:before{content:"\f4e7"}.fa-creative-commons-nc:before{content:"\f4e8"}.fa-creative-commons-nc-eu:before{content:"\f4e9"}.fa-creative-commons-nc-jp:before{content:"\f4ea"}.fa-creative-commons-nd:before{content:"\f4eb"}.fa-creative-commons-pd:before{content:"\f4ec"}.fa-creative-commons-pd-alt:before{content:"\f4ed"}.fa-creative-commons-remix:before{content:"\f4ee"}.fa-creative-commons-sa:before{content:"\f4ef"}.fa-creative-commons-sampling:before{content:"\f4f0"}.fa-creative-commons-sampling-plus:before{content:"\f4f1"}.fa-creative-commons-share:before{content:"\f4f2"}.fa-creative-commons-zero:before{content:"\f4f3"}.fa-credit-card:before{content:"\f09d"}.fa-critical-role:before{content:"\f6c9"}.fa-crop:before{content:"\f125"}.fa-crop-alt:before{content:"\f565"}.fa-cross:before{content:"\f654"}.fa-crosshairs:before{content:"\f05b"}.fa-crow:before{content:"\f520"}.fa-crown:before{content:"\f521"}.fa-crutch:before{content:"\f7f7"}.fa-css3:before{content:"\f13c"}.fa-css3-alt:before{content:"\f38b"}.fa-cube:before{content:"\f1b2"}.fa-cubes:before{content:"\f1b3"}.fa-cut:before{content:"\f0c4"}.fa-cuttlefish:before{content:"\f38c"}.fa-d-and-d:before{content:"\f38d"}.fa-d-and-d-beyond:before{content:"\f6ca"}.fa-dashcube:before{content:"\f210"}.fa-database:before{content:"\f1c0"}.fa-deaf:before{content:"\f2a4"}.fa-delicious:before{content:"\f1a5"}.fa-democrat:before{content:"\f747"}.fa-deploydog:before{content:"\f38e"}.fa-deskpro:before{content:"\f38f"}.fa-desktop:before{content:"\f108"}.fa-dev:before{content:"\f6cc"}.fa-deviantart:before{content:"\f1bd"}.fa-dharmachakra:before{content:"\f655"}.fa-dhl:before{content:"\f790"}.fa-diagnoses:before{content:"\f470"}.fa-diaspora:before{content:"\f791"}.fa-dice:before{content:"\f522"}.fa-dice-d20:before{content:"\f6cf"}.fa-dice-d6:before{content:"\f6d1"}.fa-dice-five:before{content:"\f523"}.fa-dice-four:before{content:"\f524"}.fa-dice-one:before{content:"\f525"}.fa-dice-six:before{content:"\f526"}.fa-dice-three:before{content:"\f527"}.fa-dice-two:before{content:"\f528"}.fa-digg:before{content:"\f1a6"}.fa-digital-ocean:before{content:"\f391"}.fa-digital-tachograph:before{content:"\f566"}.fa-directions:before{content:"\f5eb"}.fa-discord:before{content:"\f392"}.fa-discourse:before{content:"\f393"}.fa-divide:before{content:"\f529"}.fa-dizzy:before{content:"\f567"}.fa-dna:before{content:"\f471"}.fa-dochub:before{content:"\f394"}.fa-docker:before{content:"\f395"}.fa-dog:before{content:"\f6d3"}.fa-dollar-sign:before{content:"\f155"}.fa-dolly:before{content:"\f472"}.fa-dolly-flatbed:before{content:"\f474"}.fa-donate:before{content:"\f4b9"}.fa-door-closed:before{content:"\f52a"}.fa-door-open:before{content:"\f52b"}.fa-dot-circle:before{content:"\f192"}.fa-dove:before{content:"\f4ba"}.fa-download:before{content:"\f019"}.fa-draft2digital:before{content:"\f396"}.fa-drafting-compass:before{content:"\f568"}.fa-dragon:before{content:"\f6d5"}.fa-draw-polygon:before{content:"\f5ee"}.fa-dribbble:before{content:"\f17d"}.fa-dribbble-square:before{content:"\f397"}.fa-dropbox:before{content:"\f16b"}.fa-drum:before{content:"\f569"}.fa-drum-steelpan:before{content:"\f56a"}.fa-drumstick-bite:before{content:"\f6d7"}.fa-drupal:before{content:"\f1a9"}.fa-dumbbell:before{content:"\f44b"}.fa-dumpster:before{content:"\f793"}.fa-dumpster-fire:before{content:"\f794"}.fa-dungeon:before{content:"\f6d9"}.fa-dyalog:before{content:"\f399"}.fa-earlybirds:before{content:"\f39a"}.fa-ebay:before{content:"\f4f4"}.fa-edge:before{content:"\f282"}.fa-edit:before{content:"\f044"}.fa-egg:before{content:"\f7fb"}.fa-eject:before{content:"\f052"}.fa-elementor:before{content:"\f430"}.fa-ellipsis-h:before{content:"\f141"}.fa-ellipsis-v:before{content:"\f142"}.fa-ello:before{content:"\f5f1"}.fa-ember:before{content:"\f423"}.fa-empire:before{content:"\f1d1"}.fa-envelope:before{content:"\f0e0"}.fa-envelope-open:before{content:"\f2b6"}.fa-envelope-open-text:before{content:"\f658"}.fa-envelope-square:before{content:"\f199"}.fa-envira:before{content:"\f299"}.fa-equals:before{content:"\f52c"}.fa-eraser:before{content:"\f12d"}.fa-erlang:before{content:"\f39d"}.fa-ethereum:before{content:"\f42e"}.fa-ethernet:before{content:"\f796"}.fa-etsy:before{content:"\f2d7"}.fa-euro-sign:before{content:"\f153"}.fa-exchange-alt:before{content:"\f362"}.fa-exclamation:before{content:"\f12a"}.fa-exclamation-circle:before{content:"\f06a"}.fa-exclamation-triangle:before{content:"\f071"}.fa-expand:before{content:"\f065"}.fa-expand-arrows-alt:before{content:"\f31e"}.fa-expeditedssl:before{content:"\f23e"}.fa-external-link-alt:before{content:"\f35d"}.fa-external-link-square-alt:before{content:"\f360"}.fa-eye:before{content:"\f06e"}.fa-eye-dropper:before{content:"\f1fb"}.fa-eye-slash:before{content:"\f070"}.fa-facebook:before{content:"\f09a"}.fa-facebook-f:before{content:"\f39e"}.fa-facebook-messenger:before{content:"\f39f"}.fa-facebook-square:before{content:"\f082"}.fa-fantasy-flight-games:before{content:"\f6dc"}.fa-fast-backward:before{content:"\f049"}.fa-fast-forward:before{content:"\f050"}.fa-fax:before{content:"\f1ac"}.fa-feather:before{content:"\f52d"}.fa-feather-alt:before{content:"\f56b"}.fa-fedex:before{content:"\f797"}.fa-fedora:before{content:"\f798"}.fa-female:before{content:"\f182"}.fa-fighter-jet:before{content:"\f0fb"}.fa-figma:before{content:"\f799"}.fa-file:before{content:"\f15b"}.fa-file-alt:before{content:"\f15c"}.fa-file-archive:before{content:"\f1c6"}.fa-file-audio:before{content:"\f1c7"}.fa-file-code:before{content:"\f1c9"}.fa-file-contract:before{content:"\f56c"}.fa-file-csv:before{content:"\f6dd"}.fa-file-download:before{content:"\f56d"}.fa-file-excel:before{content:"\f1c3"}.fa-file-export:before{content:"\f56e"}.fa-file-image:before{content:"\f1c5"}.fa-file-import:before{content:"\f56f"}.fa-file-invoice:before{content:"\f570"}.fa-file-invoice-dollar:before{content:"\f571"}.fa-file-medical:before{content:"\f477"}.fa-file-medical-alt:before{content:"\f478"}.fa-file-pdf:before{content:"\f1c1"}.fa-file-powerpoint:before{content:"\f1c4"}.fa-file-prescription:before{content:"\f572"}.fa-file-signature:before{content:"\f573"}.fa-file-upload:before{content:"\f574"}.fa-file-video:before{content:"\f1c8"}.fa-file-word:before{content:"\f1c2"}.fa-fill:before{content:"\f575"}.fa-fill-drip:before{content:"\f576"}.fa-film:before{content:"\f008"}.fa-filter:before{content:"\f0b0"}.fa-fingerprint:before{content:"\f577"}.fa-fire:before{content:"\f06d"}.fa-fire-alt:before{content:"\f7e4"}.fa-fire-extinguisher:before{content:"\f134"}.fa-firefox:before{content:"\f269"}.fa-first-aid:before{content:"\f479"}.fa-first-order:before{content:"\f2b0"}.fa-first-order-alt:before{content:"\f50a"}.fa-firstdraft:before{content:"\f3a1"}.fa-fish:before{content:"\f578"}.fa-fist-raised:before{content:"\f6de"}.fa-flag:before{content:"\f024"}.fa-flag-checkered:before{content:"\f11e"}.fa-flag-usa:before{content:"\f74d"}.fa-flask:before{content:"\f0c3"}.fa-flickr:before{content:"\f16e"}.fa-flipboard:before{content:"\f44d"}.fa-flushed:before{content:"\f579"}.fa-fly:before{content:"\f417"}.fa-folder:before{content:"\f07b"}.fa-folder-minus:before{content:"\f65d"}.fa-folder-open:before{content:"\f07c"}.fa-folder-plus:before{content:"\f65e"}.fa-font:before{content:"\f031"}.fa-font-awesome:before{content:"\f2b4"}.fa-font-awesome-alt:before{content:"\f35c"}.fa-font-awesome-flag:before{content:"\f425"}.fa-font-awesome-logo-full:before{content:"\f4e6"}.fa-fonticons:before{content:"\f280"}.fa-fonticons-fi:before{content:"\f3a2"}.fa-football-ball:before{content:"\f44e"}.fa-fort-awesome:before{content:"\f286"}.fa-fort-awesome-alt:before{content:"\f3a3"}.fa-forumbee:before{content:"\f211"}.fa-forward:before{content:"\f04e"}.fa-foursquare:before{content:"\f180"}.fa-free-code-camp:before{content:"\f2c5"}.fa-freebsd:before{content:"\f3a4"}.fa-frog:before{content:"\f52e"}.fa-frown:before{content:"\f119"}.fa-frown-open:before{content:"\f57a"}.fa-fulcrum:before{content:"\f50b"}.fa-funnel-dollar:before{content:"\f662"}.fa-futbol:before{content:"\f1e3"}.fa-galactic-republic:before{content:"\f50c"}.fa-galactic-senate:before{content:"\f50d"}.fa-gamepad:before{content:"\f11b"}.fa-gas-pump:before{content:"\f52f"}.fa-gavel:before{content:"\f0e3"}.fa-gem:before{content:"\f3a5"}.fa-genderless:before{content:"\f22d"}.fa-get-pocket:before{content:"\f265"}.fa-gg:before{content:"\f260"}.fa-gg-circle:before{content:"\f261"}.fa-ghost:before{content:"\f6e2"}.fa-gift:before{content:"\f06b"}.fa-gifts:before{content:"\f79c"}.fa-git:before{content:"\f1d3"}.fa-git-square:before{content:"\f1d2"}.fa-github:before{content:"\f09b"}.fa-github-alt:before{content:"\f113"}.fa-github-square:before{content:"\f092"}.fa-gitkraken:before{content:"\f3a6"}.fa-gitlab:before{content:"\f296"}.fa-gitter:before{content:"\f426"}.fa-glass-cheers:before{content:"\f79f"}.fa-glass-martini:before{content:"\f000"}.fa-glass-martini-alt:before{content:"\f57b"}.fa-glass-whiskey:before{content:"\f7a0"}.fa-glasses:before{content:"\f530"}.fa-glide:before{content:"\f2a5"}.fa-glide-g:before{content:"\f2a6"}.fa-globe:before{content:"\f0ac"}.fa-globe-africa:before{content:"\f57c"}.fa-globe-americas:before{content:"\f57d"}.fa-globe-asia:before{content:"\f57e"}.fa-globe-europe:before{content:"\f7a2"}.fa-gofore:before{content:"\f3a7"}.fa-golf-ball:before{content:"\f450"}.fa-goodreads:before{content:"\f3a8"}.fa-goodreads-g:before{content:"\f3a9"}.fa-google:before{content:"\f1a0"}.fa-google-drive:before{content:"\f3aa"}.fa-google-play:before{content:"\f3ab"}.fa-google-plus:before{content:"\f2b3"}.fa-google-plus-g:before{content:"\f0d5"}.fa-google-plus-square:before{content:"\f0d4"}.fa-google-wallet:before{content:"\f1ee"}.fa-gopuram:before{content:"\f664"}.fa-graduation-cap:before{content:"\f19d"}.fa-gratipay:before{content:"\f184"}.fa-grav:before{content:"\f2d6"}.fa-greater-than:before{content:"\f531"}.fa-greater-than-equal:before{content:"\f532"}.fa-grimace:before{content:"\f57f"}.fa-grin:before{content:"\f580"}.fa-grin-alt:before{content:"\f581"}.fa-grin-beam:before{content:"\f582"}.fa-grin-beam-sweat:before{content:"\f583"}.fa-grin-hearts:before{content:"\f584"}.fa-grin-squint:before{content:"\f585"}.fa-grin-squint-tears:before{content:"\f586"}.fa-grin-stars:before{content:"\f587"}.fa-grin-tears:before{content:"\f588"}.fa-grin-tongue:before{content:"\f589"}.fa-grin-tongue-squint:before{content:"\f58a"}.fa-grin-tongue-wink:before{content:"\f58b"}.fa-grin-wink:before{content:"\f58c"}.fa-grip-horizontal:before{content:"\f58d"}.fa-grip-lines:before{content:"\f7a4"}.fa-grip-lines-vertical:before{content:"\f7a5"}.fa-grip-vertical:before{content:"\f58e"}.fa-gripfire:before{content:"\f3ac"}.fa-grunt:before{content:"\f3ad"}.fa-guitar:before{content:"\f7a6"}.fa-gulp:before{content:"\f3ae"}.fa-h-square:before{content:"\f0fd"}.fa-hacker-news:before{content:"\f1d4"}.fa-hacker-news-square:before{content:"\f3af"}.fa-hackerrank:before{content:"\f5f7"}.fa-hamburger:before{content:"\f805"}.fa-hammer:before{content:"\f6e3"}.fa-hamsa:before{content:"\f665"}.fa-hand-holding:before{content:"\f4bd"}.fa-hand-holding-heart:before{content:"\f4be"}.fa-hand-holding-usd:before{content:"\f4c0"}.fa-hand-lizard:before{content:"\f258"}.fa-hand-middle-finger:before{content:"\f806"}.fa-hand-paper:before{content:"\f256"}.fa-hand-peace:before{content:"\f25b"}.fa-hand-point-down:before{content:"\f0a7"}.fa-hand-point-left:before{content:"\f0a5"}.fa-hand-point-right:before{content:"\f0a4"}.fa-hand-point-up:before{content:"\f0a6"}.fa-hand-pointer:before{content:"\f25a"}.fa-hand-rock:before{content:"\f255"}.fa-hand-scissors:before{content:"\f257"}.fa-hand-spock:before{content:"\f259"}.fa-hands:before{content:"\f4c2"}.fa-hands-helping:before{content:"\f4c4"}.fa-handshake:before{content:"\f2b5"}.fa-hanukiah:before{content:"\f6e6"}.fa-hard-hat:before{content:"\f807"}.fa-hashtag:before{content:"\f292"}.fa-hat-wizard:before{content:"\f6e8"}.fa-haykal:before{content:"\f666"}.fa-hdd:before{content:"\f0a0"}.fa-heading:before{content:"\f1dc"}.fa-headphones:before{content:"\f025"}.fa-headphones-alt:before{content:"\f58f"}.fa-headset:before{content:"\f590"}.fa-heart:before{content:"\f004"}.fa-heart-broken:before{content:"\f7a9"}.fa-heartbeat:before{content:"\f21e"}.fa-helicopter:before{content:"\f533"}.fa-highlighter:before{content:"\f591"}.fa-hiking:before{content:"\f6ec"}.fa-hippo:before{content:"\f6ed"}.fa-hips:before{content:"\f452"}.fa-hire-a-helper:before{content:"\f3b0"}.fa-history:before{content:"\f1da"}.fa-hockey-puck:before{content:"\f453"}.fa-holly-berry:before{content:"\f7aa"}.fa-home:before{content:"\f015"}.fa-hooli:before{content:"\f427"}.fa-hornbill:before{content:"\f592"}.fa-horse:before{content:"\f6f0"}.fa-horse-head:before{content:"\f7ab"}.fa-hospital:before{content:"\f0f8"}.fa-hospital-alt:before{content:"\f47d"}.fa-hospital-symbol:before{content:"\f47e"}.fa-hot-tub:before{content:"\f593"}.fa-hotdog:before{content:"\f80f"}.fa-hotel:before{content:"\f594"}.fa-hotjar:before{content:"\f3b1"}.fa-hourglass:before{content:"\f254"}.fa-hourglass-end:before{content:"\f253"}.fa-hourglass-half:before{content:"\f252"}.fa-hourglass-start:before{content:"\f251"}.fa-house-damage:before{content:"\f6f1"}.fa-houzz:before{content:"\f27c"}.fa-hryvnia:before{content:"\f6f2"}.fa-html5:before{content:"\f13b"}.fa-hubspot:before{content:"\f3b2"}.fa-i-cursor:before{content:"\f246"}.fa-ice-cream:before{content:"\f810"}.fa-icicles:before{content:"\f7ad"}.fa-id-badge:before{content:"\f2c1"}.fa-id-card:before{content:"\f2c2"}.fa-id-card-alt:before{content:"\f47f"}.fa-igloo:before{content:"\f7ae"}.fa-image:before{content:"\f03e"}.fa-images:before{content:"\f302"}.fa-imdb:before{content:"\f2d8"}.fa-inbox:before{content:"\f01c"}.fa-indent:before{content:"\f03c"}.fa-industry:before{content:"\f275"}.fa-infinity:before{content:"\f534"}.fa-info:before{content:"\f129"}.fa-info-circle:before{content:"\f05a"}.fa-instagram:before{content:"\f16d"}.fa-intercom:before{content:"\f7af"}.fa-internet-explorer:before{content:"\f26b"}.fa-invision:before{content:"\f7b0"}.fa-ioxhost:before{content:"\f208"}.fa-italic:before{content:"\f033"}.fa-itunes:before{content:"\f3b4"}.fa-itunes-note:before{content:"\f3b5"}.fa-java:before{content:"\f4e4"}.fa-jedi:before{content:"\f669"}.fa-jedi-order:before{content:"\f50e"}.fa-jenkins:before{content:"\f3b6"}.fa-jira:before{content:"\f7b1"}.fa-joget:before{content:"\f3b7"}.fa-joint:before{content:"\f595"}.fa-joomla:before{content:"\f1aa"}.fa-journal-whills:before{content:"\f66a"}.fa-js:before{content:"\f3b8"}.fa-js-square:before{content:"\f3b9"}.fa-jsfiddle:before{content:"\f1cc"}.fa-kaaba:before{content:"\f66b"}.fa-kaggle:before{content:"\f5fa"}.fa-key:before{content:"\f084"}.fa-keybase:before{content:"\f4f5"}.fa-keyboard:before{content:"\f11c"}.fa-keycdn:before{content:"\f3ba"}.fa-khanda:before{content:"\f66d"}.fa-kickstarter:before{content:"\f3bb"}.fa-kickstarter-k:before{content:"\f3bc"}.fa-kiss:before{content:"\f596"}.fa-kiss-beam:before{content:"\f597"}.fa-kiss-wink-heart:before{content:"\f598"}.fa-kiwi-bird:before{content:"\f535"}.fa-korvue:before{content:"\f42f"}.fa-landmark:before{content:"\f66f"}.fa-language:before{content:"\f1ab"}.fa-laptop:before{content:"\f109"}.fa-laptop-code:before{content:"\f5fc"}.fa-laptop-medical:before{content:"\f812"}.fa-laravel:before{content:"\f3bd"}.fa-lastfm:before{content:"\f202"}.fa-lastfm-square:before{content:"\f203"}.fa-laugh:before{content:"\f599"}.fa-laugh-beam:before{content:"\f59a"}.fa-laugh-squint:before{content:"\f59b"}.fa-laugh-wink:before{content:"\f59c"}.fa-layer-group:before{content:"\f5fd"}.fa-leaf:before{content:"\f06c"}.fa-leanpub:before{content:"\f212"}.fa-lemon:before{content:"\f094"}.fa-less:before{content:"\f41d"}.fa-less-than:before{content:"\f536"}.fa-less-than-equal:before{content:"\f537"}.fa-level-down-alt:before{content:"\f3be"}.fa-level-up-alt:before{content:"\f3bf"}.fa-life-ring:before{content:"\f1cd"}.fa-lightbulb:before{content:"\f0eb"}.fa-line:before{content:"\f3c0"}.fa-link:before{content:"\f0c1"}.fa-linkedin:before{content:"\f08c"}.fa-linkedin-in:before{content:"\f0e1"}.fa-linode:before{content:"\f2b8"}.fa-linux:before{content:"\f17c"}.fa-lira-sign:before{content:"\f195"}.fa-list:before{content:"\f03a"}.fa-list-alt:before{content:"\f022"}.fa-list-ol:before{content:"\f0cb"}.fa-list-ul:before{content:"\f0ca"}.fa-location-arrow:before{content:"\f124"}.fa-lock:before{content:"\f023"}.fa-lock-open:before{content:"\f3c1"}.fa-long-arrow-alt-down:before{content:"\f309"}.fa-long-arrow-alt-left:before{content:"\f30a"}.fa-long-arrow-alt-right:before{content:"\f30b"}.fa-long-arrow-alt-up:before{content:"\f30c"}.fa-low-vision:before{content:"\f2a8"}.fa-luggage-cart:before{content:"\f59d"}.fa-lyft:before{content:"\f3c3"}.fa-magento:before{content:"\f3c4"}.fa-magic:before{content:"\f0d0"}.fa-magnet:before{content:"\f076"}.fa-mail-bulk:before{content:"\f674"}.fa-mailchimp:before{content:"\f59e"}.fa-male:before{content:"\f183"}.fa-mandalorian:before{content:"\f50f"}.fa-map:before{content:"\f279"}.fa-map-marked:before{content:"\f59f"}.fa-map-marked-alt:before{content:"\f5a0"}.fa-map-marker:before{content:"\f041"}.fa-map-marker-alt:before{content:"\f3c5"}.fa-map-pin:before{content:"\f276"}.fa-map-signs:before{content:"\f277"}.fa-markdown:before{content:"\f60f"}.fa-marker:before{content:"\f5a1"}.fa-mars:before{content:"\f2f2f2f"}.fa-mars-double:before{content:"\f227"}.fa-mars-stroke:before{content:"\f229"}.fa-mars-stroke-h:before{content:"\f22b"}.fa-mars-stroke-v:before{content:"\f22a"}.fa-mask:before{content:"\f6fa"}.fa-mastodon:before{content:"\f4f6"}.fa-maxcdn:before{content:"\f136"}.fa-medal:before{content:"\f5a2"}.fa-medapps:before{content:"\f3c6"}.fa-medium:before{content:"\f23a"}.fa-medium-m:before{content:"\f3c7"}.fa-medkit:before{content:"\f0fa"}.fa-medrt:before{content:"\f3c8"}.fa-meetup:before{content:"\f2e0"}.fa-megaport:before{content:"\f5a3"}.fa-meh:before{content:"\f11a"}.fa-meh-blank:before{content:"\f5a4"}.fa-meh-rolling-eyes:before{content:"\f5a5"}.fa-memory:before{content:"\f538"}.fa-mendeley:before{content:"\f7b3"}.fa-menorah:before{content:"\f676"}.fa-mercury:before{content:"\f223"}.fa-meteor:before{content:"\f753"}.fa-microchip:before{content:"\f2db"}.fa-microphone:before{content:"\f130"}.fa-microphone-alt:before{content:"\f3c9"}.fa-microphone-alt-slash:before{content:"\f539"}.fa-microphone-slash:before{content:"\f131"}.fa-microscope:before{content:"\f610"}.fa-microsoft:before{content:"\f3ca"}.fa-minus:before{content:"\f068"}.fa-minus-circle:before{content:"\f056"}.fa-minus-square:before{content:"\f146"}.fa-mitten:before{content:"\f7b5"}.fa-mix:before{content:"\f3cb"}.fa-mixcloud:before{content:"\f289"}.fa-mizuni:before{content:"\f3cc"}.fa-mobile:before{content:"\f10b"}.fa-mobile-alt:before{content:"\f3cd"}.fa-modx:before{content:"\f285"}.fa-monero:before{content:"\f3d0"}.fa-money-bill:before{content:"\f0d6"}.fa-money-bill-alt:before{content:"\f3d1"}.fa-money-bill-wave:before{content:"\f53a"}.fa-money-bill-wave-alt:before{content:"\f53b"}.fa-money-check:before{content:"\f53c"}.fa-money-check-alt:before{content:"\f53d"}.fa-monument:before{content:"\f5a6"}.fa-moon:before{content:"\f186"}.fa-mortar-pestle:before{content:"\f5a7"}.fa-mosque:before{content:"\f678"}.fa-motorcycle:before{content:"\f21c"}.fa-mountain:before{content:"\f6fc"}.fa-mouse-pointer:before{content:"\f245"}.fa-mug-hot:before{content:"\f7b6"}.fa-music:before{content:"\f001"}.fa-napster:before{content:"\f3d2"}.fa-neos:before{content:"\f612"}.fa-network-wired:before{content:"\f6ff"}.fa-neuter:before{content:"\f22c"}.fa-newspaper:before{content:"\f1ea"}.fa-nimblr:before{content:"\f5a8"}.fa-nintendo-switch:before{content:"\f418"}.fa-node:before{content:"\f419"}.fa-node-js:before{content:"\f3d3"}.fa-not-equal:before{content:"\f53e"}.fa-notes-medical:before{content:"\f481"}.fa-npm:before{content:"\f3d4"}.fa-ns8:before{content:"\f3d5"}.fa-nutritionix:before{content:"\f3d6"}.fa-object-group:before{content:"\f247"}.fa-object-ungroup:before{content:"\f248"}.fa-odnoklassniki:before{content:"\f263"}.fa-odnoklassniki-square:before{content:"\f264"}.fa-oil-can:before{content:"\f613"}.fa-old-republic:before{content:"\f510"}.fa-om:before{content:"\f679"}.fa-opencart:before{content:"\f23d"}.fa-openid:before{content:"\f19b"}.fa-opera:before{content:"\f26a"}.fa-optin-monster:before{content:"\f23c"}.fa-osi:before{content:"\f41a"}.fa-otter:before{content:"\f700"}.fa-outdent:before{content:"\f03b"}.fa-page4:before{content:"\f3d7"}.fa-pagelines:before{content:"\f18c"}.fa-pager:before{content:"\f815"}.fa-paint-brush:before{content:"\f1fc"}.fa-paint-roller:before{content:"\f5aa"}.fa-palette:before{content:"\f53f"}.fa-palfed:before{content:"\f3d8"}.fa-pallet:before{content:"\f482"}.fa-paper-plane:before{content:"\f1d8"}.fa-paperclip:before{content:"\f0c6"}.fa-parachute-box:before{content:"\f4cd"}.fa-paragraph:before{content:"\f1dd"}.fa-parking:before{content:"\f540"}.fa-passport:before{content:"\f5ab"}.fa-pastafarianism:before{content:"\f67b"}.fa-paste:before{content:"\f0ea"}.fa-patreon:before{content:"\f3d9"}.fa-pause:before{content:"\f04c"}.fa-pause-circle:before{content:"\f28b"}.fa-paw:before{content:"\f1b0"}.fa-paypal:before{content:"\f1ed"}.fa-peace:before{content:"\f67c"}.fa-pen:before{content:"\f304"}.fa-pen-alt:before{content:"\f305"}.fa-pen-fancy:before{content:"\f5ac"}.fa-pen-nib:before{content:"\f5ad"}.fa-pen-square:before{content:"\f14b"}.fa-pencil-alt:before{content:"\f303"}.fa-pencil-ruler:before{content:"\f5ae"}.fa-penny-arcade:before{content:"\f704"}.fa-people-carry:before{content:"\f4ce"}.fa-pepper-hot:before{content:"\f816"}.fa-percent:before{content:"\f295"}.fa-percentage:before{content:"\f541"}.fa-periscope:before{content:"\f3da"}.fa-person-booth:before{content:"\f756"}.fa-phabricator:before{content:"\f3db"}.fa-phoenix-framework:before{content:"\f3dc"}.fa-phoenix-squadron:before{content:"\f511"}.fa-phone:before{content:"\f095"}.fa-phone-slash:before{content:"\f3dd"}.fa-phone-square:before{content:"\f098"}.fa-phone-volume:before{content:"\f2a0"}.fa-php:before{content:"\f457"}.fa-pied-piper:before{content:"\f2ae"}.fa-pied-piper-alt:before{content:"\f1a8"}.fa-pied-piper-hat:before{content:"\f4e5"}.fa-pied-piper-pp:before{content:"\f1a7"}.fa-piggy-bank:before{content:"\f4d3"}.fa-pills:before{content:"\f484"}.fa-pinterest:before{content:"\f0d2"}.fa-pinterest-p:before{content:"\f231"}.fa-pinterest-square:before{content:"\f0d3"}.fa-pizza-slice:before{content:"\f818"}.fa-place-of-worship:before{content:"\f67f"}.fa-plane:before{content:"\f072"}.fa-plane-arrival:before{content:"\f5af"}.fa-plane-departure:before{content:"\f5b0"}.fa-play:before{content:"\f04b"}.fa-play-circle:before{content:"\f144"}.fa-playstation:before{content:"\f3df"}.fa-plug:before{content:"\f1e6"}.fa-plus:before{content:"\f067"}.fa-plus-circle:before{content:"\f055"}.fa-plus-square:before{content:"\f0fe"}.fa-podcast:before{content:"\f2ce"}.fa-poll:before{content:"\f681"}.fa-poll-h:before{content:"\f682"}.fa-poo:before{content:"\f2fe"}.fa-poo-storm:before{content:"\f75a"}.fa-poop:before{content:"\f619"}.fa-portrait:before{content:"\f3e0"}.fa-pound-sign:before{content:"\f154"}.fa-power-off:before{content:"\f011"}.fa-pray:before{content:"\f683"}.fa-praying-hands:before{content:"\f684"}.fa-prescription:before{content:"\f5b1"}.fa-prescription-bottle:before{content:"\f485"}.fa-prescription-bottle-alt:before{content:"\f486"}.fa-print:before{content:"\f02f"}.fa-procedures:before{content:"\f487"}.fa-product-hunt:before{content:"\f288"}.fa-project-diagram:before{content:"\f542"}.fa-pushed:before{content:"\f3e1"}.fa-puzzle-piece:before{content:"\f12e"}.fa-python:before{content:"\f3e2"}.fa-qq:before{content:"\f1d6"}.fa-qrcode:before{content:"\f029"}.fa-question:before{content:"\f128"}.fa-question-circle:before{content:"\f059"}.fa-quidditch:before{content:"\f458"}.fa-quinscape:before{content:"\f459"}.fa-quora:before{content:"\f2c4"}.fa-quote-left:before{content:"\f10d"}.fa-quote-right:before{content:"\f10e"}.fa-quran:before{content:"\f687"}.fa-r-project:before{content:"\f4f7"}.fa-radiation:before{content:"\f7b9"}.fa-radiation-alt:before{content:"\f7ba"}.fa-rainbow:before{content:"\f75b"}.fa-random:before{content:"\f074"}.fa-raspberry-pi:before{content:"\f7bb"}.fa-ravelry:before{content:"\f2d9"}.fa-react:before{content:"\f41b"}.fa-reacteurope:before{content:"\f75d"}.fa-readme:before{content:"\f4d5"}.fa-rebel:before{content:"\f1d0"}.fa-receipt:before{content:"\f543"}.fa-recycle:before{content:"\f1b8"}.fa-red-river:before{content:"\f3e3"}.fa-reddit:before{content:"\f1a1"}.fa-reddit-alien:before{content:"\f281"}.fa-reddit-square:before{content:"\f1a2"}.fa-redhat:before{content:"\f7bc"}.fa-redo:before{content:"\f01e"}.fa-redo-alt:before{content:"\f2f9"}.fa-registered:before{content:"\f25d"}.fa-renren:before{content:"\f18b"}.fa-reply:before{content:"\f3e5"}.fa-reply-all:before{content:"\f122"}.fa-replyd:before{content:"\f3e6"}.fa-republican:before{content:"\f75e"}.fa-researchgate:before{content:"\f4f8"}.fa-resolving:before{content:"\f3e7"}.fa-restroom:before{content:"\f7bd"}.fa-retweet:before{content:"\f079"}.fa-rev:before{content:"\f5b2"}.fa-ribbon:before{content:"\f4d6"}.fa-ring:before{content:"\f70b"}.fa-road:before{content:"\f018"}.fa-robot:before{content:"\f544"}.fa-rocket:before{content:"\f135"}.fa-rocketchat:before{content:"\f3e8"}.fa-rockrms:before{content:"\f3e9"}.fa-route:before{content:"\f4d7"}.fa-rss:before{content:"\f09e"}.fa-rss-square:before{content:"\f143"}.fa-ruble-sign:before{content:"\f158"}.fa-ruler:before{content:"\f545"}.fa-ruler-combined:before{content:"\f546"}.fa-ruler-horizontal:before{content:"\f547"}.fa-ruler-vertical:before{content:"\f548"}.fa-running:before{content:"\f70c"}.fa-rupee-sign:before{content:"\f156"}.fa-sad-cry:before{content:"\f5b3"}.fa-sad-tear:before{content:"\f5b4"}.fa-safari:before{content:"\f267"}.fa-sass:before{content:"\f41e"}.fa-satellite:before{content:"\f7bf"}.fa-satellite-dish:before{content:"\f7c0"}.fa-save:before{content:"\f0c7"}.fa-schlix:before{content:"\f3ea"}.fa-school:before{content:"\f549"}.fa-screwdriver:before{content:"\f54a"}.fa-scribd:before{content:"\f28a"}.fa-scroll:before{content:"\f70e"}.fa-sd-card:before{content:"\f7c2"}.fa-search:before{content:"\f002"}.fa-search-dollar:before{content:"\f688"}.fa-search-location:before{content:"\f689"}.fa-search-minus:before{content:"\f010"}.fa-search-plus:before{content:"\f00e"}.fa-searchengin:before{content:"\f3eb"}.fa-seedling:before{content:"\f4d8"}.fa-sellcast:before{content:"\f2da"}.fa-sellsy:before{content:"\f213"}.fa-server:before{content:"\f233"}.fa-servicestack:before{content:"\f3ec"}.fa-shapes:before{content:"\f61f"}.fa-share:before{content:"\f064"}.fa-share-alt:before{content:"\f1e0"}.fa-share-alt-square:before{content:"\f1e1"}.fa-share-square:before{content:"\f14d"}.fa-shekel-sign:before{content:"\f20b"}.fa-shield-alt:before{content:"\f3ed"}.fa-ship:before{content:"\f21a"}.fa-shipping-fast:before{content:"\f48b"}.fa-shirtsinbulk:before{content:"\f214"}.fa-shoe-prints:before{content:"\f54b"}.fa-shopping-bag:before{content:"\f290"}.fa-shopping-basket:before{content:"\f291"}.fa-shopping-cart:before{content:"\f07a"}.fa-shopware:before{content:"\f5b5"}.fa-shower:before{content:"\f2cc"}.fa-shuttle-van:before{content:"\f5b6"}.fa-sign:before{content:"\f4d9"}.fa-sign-in-alt:before{content:"\f2f6"}.fa-sign-language:before{content:"\f2a7"}.fa-sign-out-alt:before{content:"\f2f5"}.fa-signal:before{content:"\f012"}.fa-signature:before{content:"\f5b7"}.fa-sim-card:before{content:"\f7c4"}.fa-simplybuilt:before{content:"\f215"}.fa-sistrix:before{content:"\f3ee"}.fa-sitemap:before{content:"\f0e8"}.fa-sith:before{content:"\f512"}.fa-skating:before{content:"\f7c5"}.fa-sketch:before{content:"\f7c6"}.fa-skiing:before{content:"\f7c9"}.fa-skiing-nordic:before{content:"\f7ca"}.fa-skull:before{content:"\f54c"}.fa-skull-crossbones:before{content:"\f714"}.fa-skyatlas:before{content:"\f216"}.fa-skype:before{content:"\f17e"}.fa-slack:before{content:"\f198"}.fa-slack-hash:before{content:"\f3ef"}.fa-slash:before{content:"\f715"}.fa-sleigh:before{content:"\f7cc"}.fa-sliders-h:before{content:"\f1de"}.fa-slideshare:before{content:"\f1e7"}.fa-smile:before{content:"\f118"}.fa-smile-beam:before{content:"\f5b8"}.fa-smile-wink:before{content:"\f4da"}.fa-smog:before{content:"\f75f"}.fa-smoking:before{content:"\f48d"}.fa-smoking-ban:before{content:"\f54d"}.fa-sms:before{content:"\f7cd"}.fa-snapchat:before{content:"\f2ab"}.fa-snapchat-ghost:before{content:"\f2ac"}.fa-snapchat-square:before{content:"\f2ad"}.fa-snowboarding:before{content:"\f7ce"}.fa-snowflake:before{content:"\f2dc"}.fa-snowman:before{content:"\f7d0"}.fa-snowplow:before{content:"\f7d2"}.fa-socks:before{content:"\f696"}.fa-solar-panel:before{content:"\f5ba"}.fa-sort:before{content:"\f0dc"}.fa-sort-alpha-down:before{content:"\f15d"}.fa-sort-alpha-up:before{content:"\f15e"}.fa-sort-amount-down:before{content:"\f160"}.fa-sort-amount-up:before{content:"\f161"}.fa-sort-down:before{content:"\f0dd"}.fa-sort-numeric-down:before{content:"\f162"}.fa-sort-numeric-up:before{content:"\f163"}.fa-sort-up:before{content:"\f0de"}.fa-soundcloud:before{content:"\f1be"}.fa-sourcetree:before{content:"\f7d3"}.fa-spa:before{content:"\f5bb"}.fa-space-shuttle:before{content:"\f197"}.fa-speakap:before{content:"\f3f3"}.fa-spider:before{content:"\f717"}.fa-spinner:before{content:"\f110"}.fa-splotch:before{content:"\f5bc"}.fa-spotify:before{content:"\f1bc"}.fa-spray-can:before{content:"\f5bd"}.fa-square:before{content:"\f0c8"}.fa-square-full:before{content:"\f45c"}.fa-square-root-alt:before{content:"\f698"}.fa-squarespace:before{content:"\f5be"}.fa-stack-exchange:before{content:"\f18d"}.fa-stack-overflow:before{content:"\f16c"}.fa-stamp:before{content:"\f5bf"}.fa-star:before{content:"\f005"}.fa-star-and-crescent:before{content:"\f699"}.fa-star-half:before{content:"\f089"}.fa-star-half-alt:before{content:"\f5c0"}.fa-star-of-david:before{content:"\f69a"}.fa-star-of-life:before{content:"\f621"}.fa-staylinked:before{content:"\f3f5"}.fa-steam:before{content:"\f1b6"}.fa-steam-square:before{content:"\f1b7"}.fa-steam-symbol:before{content:"\f3f6"}.fa-step-backward:before{content:"\f048"}.fa-step-forward:before{content:"\f051"}.fa-stethoscope:before{content:"\f0f1"}.fa-sticker-mule:before{content:"\f3f7"}.fa-sticky-note:before{content:"\f249"}.fa-stop:before{content:"\f04d"}.fa-stop-circle:before{content:"\f28d"}.fa-stopwatch:before{content:"\f2f2"}.fa-store:before{content:"\f54e"}.fa-store-alt:before{content:"\f54f"}.fa-strava:before{content:"\f428"}.fa-stream:before{content:"\f550"}.fa-street-view:before{content:"\f21d"}.fa-strikethrough:before{content:"\f0cc"}.fa-stripe:before{content:"\f429"}.fa-stripe-s:before{content:"\f42a"}.fa-stroopwafel:before{content:"\f551"}.fa-studiovinari:before{content:"\f3f8"}.fa-stumbleupon:before{content:"\f1a4"}.fa-stumbleupon-circle:before{content:"\f1a3"}.fa-subscript:before{content:"\f12c"}.fa-subway:before{content:"\f239"}.fa-suitcase:before{content:"\f0f2"}.fa-suitcase-rolling:before{content:"\f5c1"}.fa-sun:before{content:"\f185"}.fa-superpowers:before{content:"\f2dd"}.fa-superscript:before{content:"\f12b"}.fa-supple:before{content:"\f3f9"}.fa-surprise:before{content:"\f5c2"}.fa-suse:before{content:"\f7d6"}.fa-swatchbook:before{content:"\f5c3"}.fa-swimmer:before{content:"\f5c4"}.fa-swimming-pool:before{content:"\f5c5"}.fa-synagogue:before{content:"\f69b"}.fa-sync:before{content:"\f021"}.fa-sync-alt:before{content:"\f2f1"}.fa-syringe:before{content:"\f48e"}.fa-table:before{content:"\f0ce"}.fa-table-tennis:before{content:"\f45d"}.fa-tablet:before{content:"\f10a"}.fa-tablet-alt:before{content:"\f3fa"}.fa-tablets:before{content:"\f490"}.fa-tachometer-alt:before{content:"\f3fd"}.fa-tag:before{content:"\f02b"}.fa-tags:before{content:"\f02c"}.fa-tape:before{content:"\f4db"}.fa-tasks:before{content:"\f0ae"}.fa-taxi:before{content:"\f1ba"}.fa-teamspeak:before{content:"\f4f9"}.fa-teeth:before{content:"\f62e"}.fa-teeth-open:before{content:"\f62f"}.fa-telegram:before{content:"\f2c6"}.fa-telegram-plane:before{content:"\f3fe"}.fa-temperature-high:before{content:"\f769"}.fa-temperature-low:before{content:"\f76b"}.fa-tencent-weibo:before{content:"\f1d5"}.fa-tenge:before{content:"\f7d7"}.fa-terminal:before{content:"\f120"}.fa-text-height:before{content:"\f034"}.fa-text-width:before{content:"\f035"}.fa-th:before{content:"\f00a"}.fa-th-large:before{content:"\f009"}.fa-th-list:before{content:"\f00b"}.fa-the-red-yeti:before{content:"\f69d"}.fa-theater-masks:before{content:"\f630"}.fa-themeco:before{content:"\f5c6"}.fa-themeisle:before{content:"\f2b2"}.fa-thermometer:before{content:"\f491"}.fa-thermometer-empty:before{content:"\f2cb"}.fa-thermometer-full:before{content:"\f2c7"}.fa-thermometer-half:before{content:"\f2c9"}.fa-thermometer-quarter:before{content:"\f2ca"}.fa-thermometer-three-quarters:before{content:"\f2c8"}.fa-think-peaks:before{content:"\f731"}.fa-thumbs-down:before{content:"\f165"}.fa-thumbs-up:before{content:"\f164"}.fa-thumbtack:before{content:"\f08d"}.fa-ticket-alt:before{content:"\f3ff"}.fa-times:before{content:"\f00d"}.fa-times-circle:before{content:"\f057"}.fa-tint:before{content:"\f043"}.fa-tint-slash:before{content:"\f5c7"}.fa-tired:before{content:"\f5c8"}.fa-toggle-off:before{content:"\f204"}.fa-toggle-on:before{content:"\f205"}.fa-toilet:before{content:"\f7d8"}.fa-toilet-paper:before{content:"\f71e"}.fa-toolbox:before{content:"\f552"}.fa-tools:before{content:"\f7d9"}.fa-tooth:before{content:"\f5c9"}.fa-torah:before{content:"\f6a0"}.fa-torii-gate:before{content:"\f6a1"}.fa-tractor:before{content:"\f722"}.fa-trade-federation:before{content:"\f513"}.fa-trademark:before{content:"\f25c"}.fa-traffic-light:before{content:"\f637"}.fa-train:before{content:"\f238"}.fa-tram:before{content:"\f7da"}.fa-transgender:before{content:"\f224"}.fa-transgender-alt:before{content:"\f225"}.fa-trash:before{content:"\f1f8"}.fa-trash-alt:before{content:"\f2ed"}.fa-trash-restore:before{content:"\f829"}.fa-trash-restore-alt:before{content:"\f82a"}.fa-tree:before{content:"\f1bb"}.fa-trello:before{content:"\f181"}.fa-tripadvisor:before{content:"\f262"}.fa-trophy:before{content:"\f091"}.fa-truck:before{content:"\f0d1"}.fa-truck-loading:before{content:"\f4de"}.fa-truck-monster:before{content:"\f63b"}.fa-truck-moving:before{content:"\f4df"}.fa-truck-pickup:before{content:"\f63c"}.fa-tshirt:before{content:"\f553"}.fa-tty:before{content:"\f1e4"}.fa-tumblr:before{content:"\f173"}.fa-tumblr-square:before{content:"\f174"}.fa-tv:before{content:"\f26c"}.fa-twitch:before{content:"\f1e8"}.fa-twitter:before{content:"\f099"}.fa-twitter-square:before{content:"\f081"}.fa-typo3:before{content:"\f42b"}.fa-uber:before{content:"\f402"}.fa-ubuntu:before{content:"\f7df"}.fa-uikit:before{content:"\f403"}.fa-umbrella:before{content:"\f0e9"}.fa-umbrella-beach:before{content:"\f5ca"}.fa-underline:before{content:"\f0cd"}.fa-undo:before{content:"\f0e2"}.fa-undo-alt:before{content:"\f2ea"}.fa-uniregistry:before{content:"\f404"}.fa-universal-access:before{content:"\f29a"}.fa-university:before{content:"\f19c"}.fa-unlink:before{content:"\f127"}.fa-unlock:before{content:"\f09c"}.fa-unlock-alt:before{content:"\f13e"}.fa-untappd:before{content:"\f405"}.fa-upload:before{content:"\f093"}.fa-ups:before{content:"\f7e0"}.fa-usb:before{content:"\f287"}.fa-user:before{content:"\f007"}.fa-user-alt:before{content:"\f406"}.fa-user-alt-slash:before{content:"\f4fa"}.fa-user-astronaut:before{content:"\f4fb"}.fa-user-check:before{content:"\f4fc"}.fa-user-circle:before{content:"\f2bd"}.fa-user-clock:before{content:"\f4fd"}.fa-user-cog:before{content:"\f4fe"}.fa-user-edit:before{content:"\f4ff"}.fa-user-friends:before{content:"\f500"}.fa-user-graduate:before{content:"\f501"}.fa-user-injured:before{content:"\f728"}.fa-user-lock:before{content:"\f502"}.fa-user-md:before{content:"\f0f0"}.fa-user-minus:before{content:"\f503"}.fa-user-ninja:before{content:"\f504"}.fa-user-nurse:before{content:"\f82f"}.fa-user-plus:before{content:"\f234"}.fa-user-secret:before{content:"\f21b"}.fa-user-shield:before{content:"\f505"}.fa-user-slash:before{content:"\f506"}.fa-user-tag:before{content:"\f507"}.fa-user-tie:before{content:"\f508"}.fa-user-times:before{content:"\f235"}.fa-users:before{content:"\f0c0"}.fa-users-cog:before{content:"\f509"}.fa-usps:before{content:"\f7e1"}.fa-ussunnah:before{content:"\f407"}.fa-utensil-spoon:before{content:"\f2e5"}.fa-utensils:before{content:"\f2e7"}.fa-vaadin:before{content:"\f408"}.fa-vector-square:before{content:"\f5cb"}.fa-venus:before{content:"\f221"}.fa-venus-double:before{content:"\f226"}.fa-venus-mars:before{content:"\f228"}.fa-viacoin:before{content:"\f237"}.fa-viadeo:before{content:"\f2a9"}.fa-viadeo-square:before{content:"\f2aa"}.fa-vial:before{content:"\f492"}.fa-vials:before{content:"\f493"}.fa-viber:before{content:"\f409"}.fa-video:before{content:"\f03d"}.fa-video-slash:before{content:"\f4e2"}.fa-vihara:before{content:"\f6a7"}.fa-vimeo:before{content:"\f40a"}.fa-vimeo-square:before{content:"\f194"}.fa-vimeo-v:before{content:"\f27d"}.fa-vine:before{content:"\f1ca"}.fa-vk:before{content:"\f189"}.fa-vnv:before{content:"\f40b"}.fa-volleyball-ball:before{content:"\f45f"}.fa-volume-down:before{content:"\f027"}.fa-volume-mute:before{content:"\f6a9"}.fa-volume-off:before{content:"\f026"}.fa-volume-up:before{content:"\f028"}.fa-vote-yea:before{content:"\f772"}.fa-vr-cardboard:before{content:"\f729"}.fa-vuejs:before{content:"\f41f"}.fa-walking:before{content:"\f554"}.fa-wallet:before{content:"\f555"}.fa-warehouse:before{content:"\f494"}.fa-water:before{content:"\f773"}.fa-weebly:before{content:"\f5cc"}.fa-weibo:before{content:"\f18a"}.fa-weight:before{content:"\f496"}.fa-weight-hanging:before{content:"\f5cd"}.fa-weixin:before{content:"\f1d7"}.fa-whatsapp:before{content:"\f232"}.fa-whatsapp-square:before{content:"\f40c"}.fa-wheelchair:before{content:"\f193"}.fa-whmcs:before{content:"\f40d"}.fa-wifi:before{content:"\f1eb"}.fa-wikipedia-w:before{content:"\f266"}.fa-wind:before{content:"\f72e"}.fa-window-close:before{content:"\f410"}.fa-window-maximize:before{content:"\f2d0"}.fa-window-minimize:before{content:"\f2d1"}.fa-window-restore:before{content:"\f2d2"}.fa-windows:before{content:"\f17a"}.fa-wine-bottle:before{content:"\f72f"}.fa-wine-glass:before{content:"\f4e3"}.fa-wine-glass-alt:before{content:"\f5ce"}.fa-wix:before{content:"\f5cf"}.fa-wizards-of-the-coast:before{content:"\f730"}.fa-wolf-pack-battalion:before{content:"\f514"}.fa-won-sign:before{content:"\f159"}.fa-wordpress:before{content:"\f19a"}.fa-wordpress-simple:before{content:"\f411"}.fa-wpbeginner:before{content:"\f297"}.fa-wpexplorer:before{content:"\f2de"}.fa-wpforms:before{content:"\f298"}.fa-wpressr:before{content:"\f3e4"}.fa-wrench:before{content:"\f0ad"}.fa-x-ray:before{content:"\f497"}.fa-xbox:before{content:"\f412"}.fa-xing:before{content:"\f168"}.fa-xing-square:before{content:"\f169"}.fa-y-combinator:before{content:"\f23b"}.fa-yahoo:before{content:"\f19e"}.fa-yandex:before{content:"\f413"}.fa-yandex-international:before{content:"\f414"}.fa-yarn:before{content:"\f7e3"}.fa-yelp:before{content:"\f1e9"}.fa-yen-sign:before{content:"\f157"}.fa-yin-yang:before{content:"\f6ad"}.fa-yoast:before{content:"\f2b1"}.fa-youtube:before{content:"\f167"}.fa-youtube-square:before{content:"\f431"}.fa-zhihu:before{content:"\f63f"}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}@font-face{font-family:"Font Awesome 5 Free";font-style:normal;font-weight:900;font-display:auto;src:url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.eot);src:url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.eot?#iefix) format("embedded-opentype"),url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.woff2) format("woff2"),url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.woff) format("woff"),url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.ttf) format("truetype"),url(https://use.fontawesome.com/releases/v5.7.2/webfonts/fa-solid-900.svg#fontawesome) format("svg")}.fa,.far,.fas{font-family:"Font Awesome 5 Free"}.fa,.fas{font-weight:900}@-webkit-keyframes pulse{0%{-webkit-box-shadow:0 0 2rem 1rem #c6ff00}100%{-webkit-box-shadow:0 0 0 0 rgba(198,255,0,0)}}@keyframes pulse{0%{-moz-box-shadow:0 0 2rem 1rem #c6ff00;box-shadow:0 0 2rem 1rem #c6ff00}100%{-moz-box-shadow:0 0 0 0 rgba(198,255,0,0);box-shadow:0 0 0 0 rgba(198,255,0,0)}}@-webkit-keyframes pulseText{0%{-webkit-text-shadow:0rem 0rem 3rem #c6ff00;color:#fff}100%{-webkit-text-shadow:0rem 0rem 0rem #c6ff00}}@keyframes pulseText{0%{-moz-text-shadow:0rem 0rem 3rem #c6ff00;text-shadow:0 0 3rem #c6ff00;color:#fff}100%{-moz-text-shadow:0rem 0rem 0rem #c6ff00;text-shadow:0 0 0 #c6ff00}}#counter,button#reset,button#showPanel{top:-200%}.animated button#showPanel{top:0;transition:.3s}.animated #counter{top:0;transition:.4s}.animated button#reset{top:0;transition:.5s}.animated #progress{left:0;transition:width .6s .2s}.animated #recordTitle{right:0;transition:.7s .2s}.animated .info{opacity:1;transition:.8s .7s}.animated footer{bottom:0;transition:.8s .9s}#signin-google{background:#fff;color:#4285f4!important;width:49%}#signin-facebook{background:#3b5998;width:49%}@media screen and (min-width:600px) and (orientation:landscape){body.animated{border:.25rem solid #777;border-radius:1rem}body{max-width:600px;margin:auto}#progress{border-width:3px}}@media (orientation:portrait){html{font-size:16px}.main{bottom:5.3rem}.main .info{bottom:5%}#chart-panel canvas{height:35vh!important}}@media (orientation:landscape){html{font-size:7px}.main{bottom:5.3rem}#chart-panel canvas{height:84vh!important}#chart-panel .showBy,#chart-panel .title,#chart-panel .total,#chart-panel label{display:inline-block}#chart-panel .total{font-size:5rem}.swipe-container.show-2{right:215%}}</style>
    </head>
    
    <body>
        
        <div class="container">
            <h4 id="loading-panel" class="p-2">
                <i class="fas fa-balance-scale fa-3x pb-3"></i>
                <div class="title my-3">DIGITAL COUNTER</div>
                <div class="welcomeback my-3"></div>
                <i class="fas fa-compact-disc fa-spin loading fa-3x my-3 color-dark"></i>
            </h4>

            <div id="clicker"></div>

            <button id="reset" class="p-2"><i class="fas fa-redo"></i></button>  
            <p id="counter" class="pt-2">...</p>
            <button id="showPanel" class="position-right p-2"><i class="fas fa-cog"></i></button>

            <div class="main">
                <p id="recordTitle" class="m-0">...</p>
                <div id="progress">
                    <div class="val c-0 trans-all-5s trans-width-delay-08s">
                        <span class="goal-achieved-label label justify-content-center align-items-center"><i class="fas fa-star fa-2x mb-2 pb-2 "></i>DAILY GOAL</span>
                    </div>
                </div>
                <div class="info">
                    <div class="user color-secondary mb-3">
                        <i class="far fa-user"></i>
                        <span id="user" class="number">--</span>
                    </div>
                    <div class="today d-flex justify-content-center color-white mb-1">
                        <span class="label mr-2">Today</span>
                        <span id="today" class="number">...</span>
                    </div>
                    <div class="week d-flex justify-content-center mb-1">
                        <span class="label mr-2">This week</span>
                        <span id="week" class="number m-0">...</span>
                    </div>
                    <div class="total d-flex justify-content-center mb-1">
                        <span class="label mr-2">Total</span>
                        <span id="total" class="number m-0">...</span>
                    </div>
                </div>
            </div>

            <footer class="d-flex justify-content-between">
                <p class="ml-auto">Digital Counter v8.2.5</p>
                <p id="percent" class="color-white">--</p>
            </footer>

            <div id="templates">
                <div class="record-tpl d-none" data-id="">
                    <div class="record-body">
                        <span class="today"></span>
                        <span class="progress"></span>
                        <div class="title"><i class="done fas fa-check color-green p-0"></i><span class="label"></span></div>
                    </div>
                    <button class="details pos-right px-3 py-2"><i class="fas fa-ellipsis-v show"></i> <i class="fas fa-angle-up close"></i></button>
                    <div class="dropdown transition trans-height px-2 float-right">
                        <div class="mt-1 col-6">
                            <p class="d-flex justify-content-between total">TOTAL <span></span></p>
                            <p class="d-flex justify-content-between goal">DAILY GOAL <span></span></p>
                        </div>
                        <div class="buttons d-flex justify-content-between mt-1">
                            <button class="deleteRecord px-0 mx-0"><i class="far fa-trash-alt px-3"></i><small>remove</small></button>
                            <button class="changeTitle px-0 mx-0"><i class="far fa-pen-square px-3"></i><small>edit</small></button>
                            <button class="changeGoal px-0 mx-0"><i class="fas fa-sort-amount-up px-3"></i><small>goal</small></button>
                            <button class="showChart px-0 mx-0"><i class="fas fa-chart-line px-3"></i><small>charts</small></button>
                        </div>
                    </div>
                </div>
                        
                <div id="panel" class="transition trans-left trans-right">
                    <div class="container">
                        <button id="closePanel" class="position-right p-2"><i class="fas fa-arrow-alt-circle-right"></i></button>
                        <h1 class="panel-heading m-2">RECORDS</h1>
                        <button id="showSettings" class="toggleSettings p-2"><i class="fas fa-tools"></i></button>
                        <div class="panel-body px-2">
                            <div class="settings transition trans-height mb-2 height-0 color-secondary">
                                <button id="hideSettings" class="toggleSettings p-1 font-4 float-right"><i class="fas fa-times close"></i></button>
                                <h4 class="heading m-1 color-white">SETTINGS</h4>
                                <span>Create new record</span>
                                <div class="add-record d-flex mb-2">
                                    <input type="text" id="add-record-input" class="py-1 pl-1 mr-1" placeholder="Enter title...">
                                    <button id="add-record-btn" class="pt-1"><i class="fas fa-plus-square"></i></button>
                                </div>
                                <label id="chkDelayRefresh" class="color-white">
                                    <i class="unchecked far fa-square mr-1 color-grey"></i><i class="checked far fa-check-square mr-1 color-primary d-none"></i><small>Delay refresh counters</small>
                                </label>
                            </div>
                            <div class="records pb-3"> </div>
                            <div class="login-buttons-container">
                                <div class="d-flex justify-content-between">
                                    <button id="signin-facebook" data-signin-type="facebook"
                                        class="signin font-4 btn btn-block color-white border-0 mt-3 p-0 p-2 d-flex align-items-center">
                                        <img src="assets/img/facebook-favico.png" class="px-3"> Sign in
                                    </button>
                                    <button id="signin-google" data-signin-type="google"
                                        class="signin font-4 btn btn-block border-0 mt-3 p-0 p-2 d-flex align-items-center">
                                        <img src="assets/img/google-favico.png" class="px-3"> Sign in
                                    </button>
                                </div>
                            </div>
                            <div class="d-flex justify-content-between mt-3">
                                <button id="showPrayers" class="btn color-white py-2 d-flex justify-content-center">
                                    <img src="assets/img/ico-muslimpro.png"> Prayers
                                </button>
                                <button id="logoutBtn" class="btn bg-grey color-grey py-2 d-flex justify-content-center">
                                    <i class="fas fa-sign-out-alt mr-2"></i>Logout
                                </button>
                            </div>
                        </div>
                        <div class="panel-footer p-2 mt-2">
                            <div class="tabs-container">
                                <div class="tabs-header d-flex justify-content-around">
                                    <button class="tab-btn active" data-tab="about">About</button>
                                    <button class="tab-btn" data-tab="features">Features</button>
                                    <button class="tab-btn" data-tab="contact">Contact</button>
                                </div>
                                <div class="tabs-content">
                                    <div class="tab-pane active" id="about">
                                        <h3>What is this app for?</h3>
                                        <p style="text-align: justify;">Many people have need to count (words, items, maraton runners) among other things that go fast. Other people have tasks to count the accuracy of specific items on a production line. Another synario is religious people who set them selves a goal to say "precious words" for thousands of times, which is too hard to focus on. Also in sports, referees can use this app to count shots, fouls, passes and so on. Therefor, this app can help users do their "counting tasks" easily and achieve their goals.</p>
                                    </div>
                                    <div class="tab-pane" id="features">
                                        <ul class="pr-0 pl-3" style="text-align: left;">
                                            <li>Add more records to count multi-tasks separately</li>
                                            <li>Set a goad for each record and monitor how far you have come on the left-bar</li>
                                            <li>Logs for each records individually, today, week, total. (more coming)</li>
                                            <li>Charts for each records individually</li>
                                            <li>General yellow counter that can be reset, in the center of the top</li>
                                            <li>The records are saved locally in the browser, and you can LOGIN to sync them on the cloud to save your data and use on other devices</li>
                                        </ul>
                                        <h3>Notice</h3>
                                        <p style="text-align: justify;">Browser compatibility is being optimized all the time. But the main functions are working fine and tested.</p>
                                    </div>
                                    <div class="tab-pane" id="contact">
                                        <h3>Contact</h3>
                                        <p class="">Muhannad Senan</p>
                                        <p class="">msn-23@live.com</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
    
                <div id="chart-panel" class="chart-panel d-flex transition trans-left trans-right">
                    <div class="w-100 container border border-grey">
                        <button class="close p-2 pos-right"><i class="fas fa-times-circle"></i></button>
                        <div class="title p-1">
                            <label class="color-grey">Show</label>
                            <select class="showBy">
                                <option value="7-days">7 days</option>
                                <option value="30-days">30 days</option>
                                <option value="today-all">Today - all</option>
                                <option value="week">Week</option>
                                <option value="month">Month</option>
                                <option value="year">Year</option>
                            </select>
                        </div>
                        <p class="total font-4"><small>TOTAL</small> <span></span></p>
                        <div id="chart-container" class="chart-container"></div>
                        <div class="loading d-flex"><i class="fas fa-compact-disc fa-spin"></i></div>
                    </div>
                </div>
            </div>
        </div>        
        
        
        <script>!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});!function(e){var n;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var t=window.Cookies,o=window.Cookies=e();o.noConflict=function(){return window.Cookies=t,o}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(o){function r(){}function i(n,t,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var c=JSON.stringify(t);/^[\{\[]/.test(c)&&(t=c)}catch(e){}t=o.write?o.write(t,n):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var f="";for(var u in i)i[u]&&(f+="; "+u,!0!==i[u]&&(f+="="+i[u].split(";")[0]));return document.cookie=n+"="+t+f}}function c(e,t){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],c=0;c<i.length;c++){var f=i[c].split("="),u=f.slice(1).join("=");t||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var a=n(f[0]);if(u=(o.read||o)(u,a)||n(u),t)try{u=JSON.parse(u)}catch(e){}if(r[a]=u,e===a)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return c(e,!1)},r.getJSON=function(e){return c(e,!0)},r.remove=function(n,t){i(n,"",e(t,{expires:-1}))},r.defaults={},r.withConverter=t,r}(function(){})});((e,t)=>{"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).firebase=t()})(this,function(){var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}))(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function e(n,o){var i,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))c.label=t[1];else if(6===t[0]&&c.label<s[1])c.label=s[1],s=t;else{if(!(s&&c.label<s[2])){s[2]&&c.ops.pop(),c.trys.pop();continue}c.label=s[2],c.ops.push(t)}}t=o.call(n,c)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function h(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}}}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&(e[r]=d(e[r],t[r]));return e}t.prototype.wrapCallback=function(r){var n=this;return function(e,t){e?n.reject(e):n.resolve(t),"function"==typeof r&&(n.promise.catch(function(){}),1===r.length?r(e):r(e,t))}};var i=t;function t(){var r=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})}a=Error,r(n=c,S=a),n.prototype=null===S?Object.create(S):(s.prototype=S.prototype,new s);var n,a,p=c;function s(){this.constructor=n}function c(e,t){t=a.call(this,t)||this;return t.code=e,t.name="FirebaseError",Object.setPrototypeOf(t,c.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,v.prototype.create),t}l.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n,o=t[0]||{},i=this.service+"/"+e,e=this.errors[e],e=e?(n=o,e.replace(f,function(e,t){var r=n[t];return null!=r?r.toString():"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+i+").",a=new p(i,e),s=0,c=Object.keys(o);s<c.length;s++){var l=c[s];"_"!==l.slice(-1)&&(l in a&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),a[l]=o[l])}return a};var v=l;function l(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var f=/\{\$([^}]+)}/g;function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e,t){e=new L(e,t);return e.subscribe.bind(e)}u.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},u.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},u.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},u.prototype.subscribe=function(e,t,r){var n,o=this;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(n=(e=>{if("object"==typeof e&&null!==e)for(var t=0,r=["next","error","complete"];t<r.length;t++){var n=r[t];if(n in e&&"function"==typeof e[n])return 1}})(e)?e:{next:e,error:t,complete:r}).next&&(n.next=b),void 0===n.error&&(n.error=b),void 0===n.complete&&(n.complete=b);e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{o.finalError?n.error(o.finalError):n.complete()}catch(e){}}),this.observers.push(n),e},u.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount)&&void 0!==this.onNoObservers&&this.onNoObservers(this)},u.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},u.prototype.sendOne=function(e,t){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[e])try{t(r.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},u.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))};var L=u;function u(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(r)}).catch(function(e){r.error(e)})}function b(){}w.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},w.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},w.prototype.setServiceProps=function(e){return this.serviceProps=e,this};var g=w;function w(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var O="[DEFAULT]",T=(E.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e=void 0===e?O:e);if(!this.instancesDeferred.has(t)){var r=new i;this.instancesDeferred.set(t,r);try{var n=this.getOrInitializeService(t);n&&r.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise},E.prototype.getImmediate=function(e){var t=o({identifier:O,optional:!1},e),r=t.identifier,t=t.optional,r=this.normalizeInstanceIdentifier(r);try{var n=this.getOrInitializeService(r);if(n)return n;if(t)return null;throw Error("Service "+this.name+" is not available")}catch(e){if(t)return null;throw e}},E.prototype.getComponent=function(){return this.component},E.prototype.setComponent=function(e){var t,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=e).instantiationMode)try{this.getOrInitializeService(O)}catch(e){}try{for(var n=h(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var i=((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a})(o.value,2),a=i[0],s=i[1],c=this.normalizeInstanceIdentifier(a);try{var l=this.getOrInitializeService(c);s.resolve(l)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},E.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?O:e),this.instances.delete(e)},E.prototype.delete=function(){return i=this,a=void 0,s=function(){var t;return e(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))];case 1:return e.sent(),[2]}})},new(a=Promise)(function(e,t){function r(e){try{o(s.next(e))}catch(e){t(e)}}function n(e){try{o(s.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(r,n)}o((s=s.apply(i,[])).next())});var i,a,s},E.prototype.isComponentSet=function(){return null!=this.component},E.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,e===O?void 0:e),this.instances.set(e,t)),t||null},E.prototype.normalizeInstanceIdentifier=function(e){return!this.component||this.component.multipleInstances?e:O},E);function E(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}_.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},_.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},_.prototype.getProvider=function(e){var t;return this.providers.has(e)?this.providers.get(e):(t=new T(e,this),this.providers.set(e,t),t)},_.prototype.getProviders=function(){return Array.from(this.providers.values())};var I,z=_;function _(e){this.name=e,this.providers=new Map}function N(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function V(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString();switch(t){case I.DEBUG:case I.VERBOSE:console.log.apply(console,N(["["+o+"]  "+e.name+":"],r));break;case I.INFO:console.info.apply(console,N(["["+o+"]  "+e.name+":"],r));break;case I.WARN:console.warn.apply(console,N(["["+o+"]  "+e.name+":"],r));break;case I.ERROR:console.error.apply(console,N(["["+o+"]  "+e.name+":"],r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}(S=I=I||{})[S.DEBUG=0]="DEBUG",S[S.VERBOSE=1]="VERBOSE",S[S.INFO=2]="INFO",S[S.WARN=3]="WARN",S[S.ERROR=4]="ERROR",S[S.SILENT=5]="SILENT";var M=I.INFO,S=(Object.defineProperty(P.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in I))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),P.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,N([this,I.DEBUG],e))},P.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,N([this,I.VERBOSE],e))},P.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,N([this,I.INFO],e))},P.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,N([this,I.WARN],e))},P.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,N([this,I.ERROR],e))},P);function P(e){this.name=e,this._logLevel=M,this._logHandler=V}var A=new v("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),C="@firebase/app",R="[DEFAULT]",B=((F={})[C]="fire-core",F["@firebase/analytics"]="fire-analytics",F["@firebase/auth"]="fire-auth",F["@firebase/database"]="fire-rtdb",F["@firebase/functions"]="fire-fn",F["@firebase/installations"]="fire-iid",F["@firebase/messaging"]="fire-fcm",F["@firebase/performance"]="fire-perf",F["@firebase/remote-config"]="fire-rc",F["@firebase/storage"]="fire-gcs",F["@firebase/firestore"]="fire-fst",F["fire-js"]="fire-js",F["firebase-wrapper"]="fire-js-all",F),j=new S("@firebase/app"),D=(Object.defineProperty(k.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(k.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),k.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(e){return e.delete()}))}).then(function(){t.isDeleted_=!0})},k.prototype._getService=function(e,t){return void 0===t&&(t=R),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},k.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=R),this.container.getProvider(e).clearInstance(t)},k.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){j.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},k.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},k.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw A.create("app-deleted",{appName:this.name_})},k);function k(e,t,r){var n,o,i=this;this.firebase_=r,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=d(void 0,e),this.container=new z(t.name),this._addComponent(new g("app",function(){return i},"PUBLIC"));try{for(var a=h(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var c=s.value;this._addComponent(c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}}D.prototype.name&&D.prototype.options||D.prototype.delete||console.log("dc");var F=function e(){c=D,l={},p=new Map,(f={__esModule:!0,initializeApp:function(e,t){var t=t="object"==typeof(t=void 0===t?{}:t)&&null!==t?t:{name:t},r=(void 0===t.name&&(t.name=R),t.name);if("string"!=typeof r||!r)throw A.create("bad-app-name",{appName:String(r)});if(m(l,r))throw A.create("duplicate-app",{appName:r});e=new c(e,t,f);return l[r]=e},app:u,registerVersion:function(e,t,r){var n=null!=(o=B[e])?o:e,o=(r&&(n+="-"+r),n.match(/\s|\//)),e=t.match(/\s|\//);o||e?(r=['Unable to register library "'+n+'" with version "'+t+'":'],o&&r.push('library name "'+n+'" contains illegal characters (whitespace or "/")'),o&&e&&r.push("and"),e&&r.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),j.warn(r.join(" "))):i(new g(n+"-version",function(){return{library:n,version:t}},"VERSION"))},apps:null,SDK_VERSION:"7.6.1",INTERNAL:{registerComponent:i,removeApp:function(e){delete l[e]},components:p,useAsService:function(e,t){return"serverAuth"!==t?t:null}}}).default=f,Object.defineProperty(f,"apps",{get:function(){return Object.keys(l).map(function(e){return l[e]})}}),u.App=c;var c,l,p,f,t=f;function u(e){if(m(l,e=e||R))return l[e];throw A.create("no-app",{appName:e})}function i(r){var e,t,n,o=r.name;if(p.has(o))j.debug("There were multiple attempts to register component "+o+".");else{p.set(o,r),"PUBLIC"===r.type&&(n=function(e){if("function"!=typeof(e=void 0===e?u():e)[o])throw A.create("invalid-app-argument",{appName:o});return e[o]()},void 0!==r.serviceProps&&d(n,r.serviceProps),f[o]=n,c.prototype[o]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,o).apply(this,r.multipleInstances?e:[])});try{for(var i=h(Object.keys(l)),a=i.next();!a.done;a=i.next()){var s=a.value;l[s]._addComponent(r)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}return"PUBLIC"===r.type?f[o]:null}return t.INTERNAL=o(o({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){d(t,e)},createSubscribe:y,ErrorFactory:v,deepExtend:d}),t}(),H=(x.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){var t;return"VERSION"===(null==(t=e.getComponent())?void 0:t.type)?(t=e.getImmediate()).library+"/"+t.version:null}).filter(function(e){return e}).join(" ")},x);function x(e){this.container=e}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),S=self.firebase.SDK_VERSION)&&0<=S.indexOf("LITE")&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ");var U=F.initializeApp;F.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(()=>{try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){}})()&&j.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),U.apply(void 0,e)};S=F;return(F=S).INTERNAL.registerComponent(new g("platform-logger",function(e){return new H(e)},"PRIVATE")),F.registerVersion(C,"0.5.0",void 0),F.registerVersion("fire-js",""),S.registerVersion("firebase","7.6.1","app"),S});
((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t||self).firebase)})(this,function(zp){try{!function(){zp=zp&&zp.hasOwnProperty("default")?zp.default:zp;var x=function(t,e){return(x=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}))(t,e)};function t(t,e){function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var F,q=function(){return(q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function d(o,a,s,u){return new(s=s||Promise)(function(t,e){function n(t){try{i(u.next(t))}catch(t){e(t)}}function r(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new s(function(t){t(e.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function m(r,i){var o,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(n){return function(t){var e=[n,t];if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(s=2&e[0]?a.return:e[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,e[1])).done)return s;switch(a=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,a=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3]))u.label=e[1];else if(6===e[0]&&u.label<s[1])u.label=s[1],s=e;else{if(!(s&&u.label<s[2])){s[2]&&u.ops.pop(),u.trys.pop();continue}u.label=s[2],u.ops.push(e)}}e=i.call(r,u)}catch(t){e=[6,t],a=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}function V(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function B(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function U(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case F.DEBUG:case F.VERBOSE:console.log.apply(console,B(["["+i+"]  "+t.name+":"],n));break;case F.INFO:console.info.apply(console,B(["["+i+"]  "+t.name+":"],n));break;case F.WARN:console.warn.apply(console,B(["["+i+"]  "+t.name+":"],n));break;case F.ERROR:console.error.apply(console,B(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}(Q=F=F||{})[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT";var K=F.INFO,Q=(Object.defineProperty(j.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in F))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(j.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),j.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,B([this,F.DEBUG],t))},j.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,B([this,F.VERBOSE],t))},j.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,B([this,F.INFO],t))},j.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,B([this,F.WARN],t))},j.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,B([this,F.ERROR],t))},j);function j(t){this.name=t,this._logLevel=K,this._logHandler=U}function G(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}t(H,W=Error);var W,z=H;function H(t,e){e=W.call(this,e)||this;return e.code=t,e.name="FirebaseError",Object.setPrototypeOf(e,H.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Y.prototype.create),e}J.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(X,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").",a=new z(o,t),s=0,u=Object.keys(i);s<u.length;s++){var c=u[s];"_"!==c.slice(-1)&&(c in a&&console.warn('Overwriting FirebaseError base field "'+c+'" can cause unexpected behavior.'),a[c]=i[c])}return a};var Y=J;function J(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var X=/\{\$([^}]+)}/g,Z=($.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},$.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},$.prototype.setServiceProps=function(t){return this.serviceProps=t,this},$);function $(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=e;function tt(t){return"string"==typeof t}function et(t){return"number"==typeof t}function nt(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function rt(){}function it(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function ot(t){return"array"==it(t)}function at(t){var e=it(t);return"array"==e||"object"==e&&"number"==typeof t.length}function st(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ut="closure_uid_"+(1e9*Math.random()>>>0),ct=0;function ht(t,e,n){return t.call.apply(t.bind,arguments)}function lt(e,n,t){var r;if(e)return 2<arguments.length?(r=Array.prototype.slice.call(arguments,2),function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}):function(){return e.apply(n,arguments)};throw Error()}function ft(t,e,n){return(ft=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ht:lt).apply(null,arguments)}function pt(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var dt=Date.now||function(){return+new Date};function mt(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).xb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function yt(){this.j=this.j,this.i=this.i}yt.prototype.j=!1,yt.prototype.la=function(){this.j||(this.j=!0,this.G())},yt.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var gt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(tt(t))return tt(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=tt(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function bt(){return Array.prototype.concat.apply([],arguments)}function wt(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tt(t){return/^[\s\xa0]*$/.test(t)}var St,Et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function It(t,e){return-1!=t.indexOf(e)}function Ct(t,e){return t<e?-1:e<t?1:0}t:{var Dt=c.navigator;if(Dt){Dt=Dt.userAgent;if(Dt){St=Dt;break t}}St=""}function Nt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function At(t){var e,n={};for(e in t)n[e]=t[e];return n}var kt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<kt.length;i++)e=kt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function _t(t){return _t[" "](t),t}_t[" "]=rt;var Mt,Lt=It(St,"Opera"),Ot=It(St,"Trident")||It(St,"MSIE"),Pt=It(St,"Edge"),xt=Pt||Ot,Ft=It(St,"Gecko")&&!(It(St.toLowerCase(),"webkit")&&!It(St,"Edge"))&&!(It(St,"Trident")||It(St,"MSIE"))&&!It(St,"Edge"),qt=It(St.toLowerCase(),"webkit")&&!It(St,"Edge");function Vt(){var t=c.document;return t?t.documentMode:void 0}t:{var Bt="",Ut=(Ut=St,Ft?/rv:([^\);]+)(\)|;)/.exec(Ut):Pt?/Edge\/([\d\.]+)/.exec(Ut):Ot?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ut):qt?/WebKit\/(\S+)/.exec(Ut):Lt?/(?:Version)[ \/]?(\S+)/.exec(Ut):void 0);if(Ut&&(Bt=Ut?Ut[1]:""),Ot){Ut=Vt();if(null!=Ut&&Ut>parseFloat(Bt)){Mt=String(Ut);break t}}Mt=Bt}var Kt={};function Qt(s){return t=s,e=Kt,Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=(()=>{for(var t=0,e=Et(String(Mt)).split("."),n=Et(String(s)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",a=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=Ct(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Ct(0==o[2].length,0==a[2].length)||Ct(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t})();var t,e}var e=c.document,jt=e&&Ot?Vt()||("CSS1Compat"==e.compatMode?parseInt(Mt,10):5):void 0,Gt=!Ot||9<=Number(jt),Wt=Ot&&!Qt("9"),zt=(()=>{if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",rt,e),c.removeEventListener("test",rt,e)}catch(t){}return t})();function Ht(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Yt(t,e){if(Ht.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Ft){t:{try{_t(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=tt(t.pointerType)?t.pointerType:Jt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Ht.prototype.b=function(){this.Ia=!1},mt(Yt,Ht);var Jt={2:"touch",3:"pen",4:"mouse"},Xt=(Yt.prototype.b=function(){Yt.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Wt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},"closure_listenable_"+(1e6*Math.random()|0)),Zt=0;function $t(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Zt,this.X=this.Z=!1}function te(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ee(t){this.src=t,this.a={},this.b=0}function ne(t,e){var n,r,i,o=e.type;o in t.a&&(r=t.a[o],(n=0<=(i=gt(r,e)))&&Array.prototype.splice.call(r,i,1),n)&&(te(e),0==t.a[o].length)&&(delete t.a[o],t.b--)}function re(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ee.prototype.add=function(t,e,n,r,i){var o=t.toString(),a=((t=this.a[o])||(t=this.a[o]=[],this.b++),re(t,e,r,i));return-1<a?(e=t[a],n||(e.Z=!1)):((e=new $t(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ie="closure_lm_"+(1e6*Math.random()|0),oe={};function ae(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(ot(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=de(r),e&&e[Xt]?e.Aa(n,r,st(i)?!!i.capture:!!i,o):se(e,n,r,!0,i,o)}(t,e,n,r,i);if(ot(e)){for(var o=0;o<e.length;o++)ae(t,e[o],n,r,i);return null}return n=de(n),t&&t[Xt]?t.za(e,n,st(r)?!!r.capture:!!r,i):se(t,e,n,!1,r,i)}function se(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=st(i)?!!i.capture:!!i;if(a&&!Gt)return null;var s,u,c=fe(t);if(c||(t[ie]=c=new ee(t)),!(n=c.add(e,n,r,a,o)).proxy)if(s=le,r=u=Gt?function(t){return s.call(u.src,u.listener,t)}:function(t){if(!(t=s.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=zt?i:a)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ce(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ue(t){var e,n,r;et(t)||!t||t.X||((e=t.src)&&e[Xt]?ne(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ce(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=fe(e))?(ne(n,t),0==n.b&&(n.src=null,e[ie]=null)):te(t)))}function ce(t){return t in oe?oe[t]:oe[t]="on"+t}function he(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&ue(t),n.call(r,e)}function le(t,e){return!!t.X||he(t,Gt?new Yt(e,this):e=new Yt(e||nt("window.event"),this))}function fe(t){return(t=t[ie])instanceof ee?t:null}var pe="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"==it(e)?e:(e[pe]||(e[pe]=function(t){return e.handleEvent(t)}),e[pe])}function me(){yt.call(this),this.c=new ee(this),(this.J=this).B=null}function ye(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.X&&u.capture==n&&(a=u.listener,s=u.da||u.src,u.Z&&ne(t.c,u),i=!1!==a.call(s,r)&&i)}return i&&0!=r.Ia}mt(me,yt),me.prototype[Xt]=!0,(e=me.prototype).addEventListener=function(t,e,n,r){ae(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(ot(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=st(i)?!!i.capture:!!i,r=de(r),e&&e[Xt]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=re(a=e.a[n],r,i,o))&&(te(a[r]),Array.prototype.splice.call(a,r,1),0==a.length)&&(delete e.a[n],e.b--)):(e=e&&fe(e))&&(n=e.a[n.toString()],r=(e=-1)<(e=n?re(n,r,i,o):e)?n[e]:null)&&ue(r)}(this,t,e,n,r)},e.dispatchEvent=function(t){var e;if(n=this.B)for(e=[];n;n=n.B)e.push(n);var n=this.J,r=t.type||t;if(tt(t)?t=new Ht(t,n):t instanceof Ht?t.target=t.target||n:(a=t,Rt(t=new Ht(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],a=ye(o,r,!0,t)&&a;if(a=ye(o=t.a=n,r,!0,t)&&a,a=ye(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=ye(o=t.a=e[i],r,!1,t)&&a;return a},e.G=function(){if(me.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)te(n[r]);delete e.a[t],e.b--}}this.B=null},e.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},e.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var ge=c.JSON.stringify;function ve(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function be(){this.b=this.a=null}ve.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var we,Te=new ve(function(){return new Se},function(t){t.reset()});function Se(){this.next=this.b=this.a=null}function Ee(t,e){var n;we||(n=c.Promise.resolve(void 0),we=function(){n.then(De)}),Ie||(we(),Ie=!0),Ce.add(t,e)}be.prototype.add=function(t,e){var n=Te.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Se.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Ie=!(Se.prototype.reset=function(){this.next=this.b=this.a=null}),Ce=new be;function De(){for(var t,e;n=void 0,e=null,(n=Ce).a&&(e=n.a,n.a=n.a.next,n.a||(n.b=null),e.next=null),t=e;){try{t.a.call(t.b)}catch(t){(t=>{c.setTimeout(function(){throw t},0)})(t)}var n=Te;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Ie=!1}function Ne(t,e){me.call(this),this.b=t||1,this.a=e||c,this.f=ft(this.fb,this),this.g=dt()}function Ae(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function ke(t,e,n){if("function"==it(t))n&&(t=ft(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ft(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function Re(t,e,n){yt.call(this),this.f=null!=n?ft(t,n):t,this.c=e,this.b=ft(this.$a,this),this.a=[]}function _e(t){t.U=ke(t.b,t.c),t.f.apply(null,t.a)}function Me(t){yt.call(this),this.b=t,this.a={}}mt(Ne,me),(e=Ne.prototype).ba=!1,e.L=null,e.fb=function(){var t;this.ba&&(0<(t=dt()-this.g)&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ae(this),this.start())))},e.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=dt())},e.G=function(){Ne.N.G.call(this),Ae(this),delete this.a},mt(Re,yt),(e=Re.prototype).ea=!1,e.U=null,e.Ta=function(t){this.a=arguments,this.U?this.ea=!0:_e(this)},e.G=function(){Re.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},e.$a=function(){this.U=null,this.ea&&(this.ea=!1,_e(this))},mt(Me,yt);var Le=[];function Oe(t,e,n,r){ot(n)||(n&&(Le[0]=n.toString()),n=Le);for(var i=0;i<n.length;i++){var o=ae(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Pe(t){Nt(t.a,function(t,e){this.a.hasOwnProperty(e)&&ue(t)},t),t.a={}}function xe(){}Me.prototype.G=function(){Me.N.G.call(this),Pe(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fe=new me;function qe(t){Ht.call(this,"serverreachability",t)}function Ve(){Fe.dispatchEvent(new qe(Fe))}function Be(t){Ht.call(this,"statevent",t)}function Ue(){Fe.dispatchEvent(new Be(Fe))}function Ke(t){Ht.call(this,"timingevent",t)}function Qe(t,e){if("function"!=it(t))throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){t()},e)}mt(qe,Ht),mt(Be,Ht),mt(Ke,Ht);var je={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},Ge={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function We(){}function ze(t){return t.a||(t.a={})}function He(){}We.prototype.a=null;var n={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function Ye(){Ht.call(this,"d")}function Je(){Ht.call(this,"c")}function Xe(){}function Ze(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Me(this),this.O=45e3,this.P=new Ne(t=xt?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}mt(Ye,Ht),mt(Je,Ht),mt(Xe,We);var $e=new Xe,tn={},en={};function nn(t,e,n){t.F=1,t.f=Dn(wn(e)),t.l=n,t.H=!0,on(t,null)}function rn(t,e,n,r){t.F=1,t.f=Dn(wn(e)),t.l=null,t.H=n,on(t,r)}function on(t,e){t.v=dt(),sn(t),t.D=wn(t.f),Cn(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Re(ft(t.Ja,t,t.a),t.J)),Oe(t.I,t.a,"readystatechange",t.cb),e=t.h?At(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Ve()}function an(t,e,n){for(var r,i,o,a=!0;!t.m&&t.A<n.length;){r=n,o=i=void 0,i=(s=t).A;var s=-1==(o=r.indexOf("\n",i))?en:(i=Number(r.substring(i,o)),isNaN(i)?tn:(o+=1)+i>r.length?en:(r=r.substr(o,i),s.A=o+i,r));if(s==en){4==e&&(t.c=4,Ue(),a=!1);break}if(s==tn){t.c=4,Ue(),a=!1;break}fn(t,s)}4==e&&0==n.length&&(t.c=1,Ue(),a=!1),t.b=t.b&&a,a||(ln(t),hn(t))}function sn(t){t.R=dt()+t.O,un(t,t.O)}function un(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Qe(ft(t.ab,t),e)}function cn(t){t.i&&(c.clearTimeout(t.i),t.i=null)}function hn(t){t.g.Ca()||t.m||t.g.na(t)}function ln(t){cn(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Ae(t.P),Pe(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function fn(t,e){try{t.g.Fa(t,e),Ve()}catch(t){}}function pn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(at(t)||tt(t))vt(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(at(t)||tt(t))for(var n=[],r=t.length,i=0;i<r;i++)n.push(i);else for(i in n=[],r=0,t)n[r++]=i;for(var i=(r=(t=>{if(t.C&&"function"==typeof t.C)return t.C();if(tt(t))return t.split("");if(at(t))for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);else for(r in e=[],n=0,t)e[n++]=t[r];return e})(t)).length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function dn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof dn)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t,e){gn(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c)&&yn(t)}function yn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];gn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)gn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=Ze.prototype).setTimeout=function(t){this.O=t},e.cb=function(t){t=t.target;var e=this.B;e&&3==yr(t)?e.Ta():this.Ja(t)},e.Ja=function(t){try{if(t==this.a)t:{var e=yr(this.a),n=this.a.ya();this.a.T();if(!(e<3||3==e&&!xt&&!this.a.aa())){this.m||4!=e||7==n||Ve(),cn(this);var r=this.a.T(),i=(this.o=r,this.a.aa());if(this.b=200==r){if(this.S&&!this.s){e:{if(this.a){var o=gr(this.a,"X-HTTP-Initial-Response");if(o&&!Tt(o)){var a=o;break e}}a=null}if(!a){this.b=!1,this.c=3,Ue(),ln(this),hn(this);break t}this.s=!0,fn(this,a)}this.H?(an(this,e,i),xt&&this.b&&3==e&&(Oe(this.I,this.P,"tick",this.bb),this.P.start())):fn(this,i),4==e&&ln(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,sn(this)))}else 400==r&&0<i.indexOf("Unknown SID")?this.c=3:this.c=0,Ue(),ln(this),hn(this)}}}catch(t){}},e.bb=function(){var t,e;this.a&&(t=yr(this.a),e=this.a.aa(),this.A<e.length)&&(cn(this),an(this,t,e),this.b)&&4!=t&&sn(this)},e.cancel=function(){this.m=!0,ln(this)},e.ab=function(){this.i=null;var t=dt();0<=t-this.R?(2!=this.F&&(Ve(),Ue()),ln(this),this.c=2,hn(this)):un(this,this.R-t)},(e=dn.prototype).C=function(){yn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.K=function(){return yn(this),this.a.concat()},e.get=function(t,e){return gn(this.b,t)?this.b[t]:e},e.set=function(t,e){gn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var vn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bn(t,e){this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof bn?(this.h=void 0!==e?e:t.h,Tn(this,t.f),this.j=t.j,Sn(this,t.b),En(this,t.i),this.a=t.a,In(this,Bn(t.c)),this.g=t.g):t&&(t=String(t).match(vn))?(this.h=!!e,Tn(this,t[1]||"",!0),this.j=Nn(t[2]||""),Sn(this,t[3]||"",!0),En(this,t[4]),this.a=Nn(t[5]||"",!0),In(this,t[6]||"",!0),this.g=Nn(t[7]||"")):(this.h=!!e,this.c=new Pn(null,this.h))}function wn(t){return new bn(t)}function Tn(t,e,n){t.f=n?Nn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Sn(t,e,n){t.b=n?Nn(e,!0):e}function En(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function In(t,e,n){var r,i;e instanceof Pn?(t.c=e,r=t.c,(i=t.h)&&!r.f&&(xn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fn(this,e),Vn(this,n,t))},r)),r.f=i):(n||(e=An(e,Ln)),t.c=new Pn(e,t.h))}function h(t,e,n){t.c.set(e,n)}function Cn(t,e,n){ot(n)||(n=[String(n)]),Vn(t.c,e,n)}function Dn(t){return h(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^dt()).toString(36)),t}function Nn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function An(t,e,n){return tt(t)?(t=encodeURI(t).replace(e,kn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function kn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bn.prototype.toString=function(){var t=[],e=this.f,n=(e&&t.push(An(e,Rn,!0),":"),this.b);return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(An(e,Rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(An(n,"/"==n.charAt(0)?Mn:_n,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",An(n,On)),t.join("")},bn.prototype.resolve=function(t){var e=wn(this),n=!!t.f,r=(n?Tn(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Sn(e,t.b):n=null!=t.i,t.a);if(n)En(e,t.i);else if(n=!!t.a)if("/"!=r.charAt(0)&&(this.b&&!this.a?r="/"+r:-1!=(i=e.a.lastIndexOf("/"))&&(r=e.a.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(It(i,"./")||It(i,"/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.a=r:n=""!==t.c.toString(),n?In(e,Bn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Rn=/[#\/\?@]/g,_n=/[#\?:]/g,Mn=/[#\?]/g,Ln=/[#\?@]/g,On=/#/g;function Pn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function xn(t){if(!t.a&&(t.a=new dn,t.b=0,t.c)){var e=t.c;if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r,i=e[n].indexOf("="),o=null;0<=i?(r=e[n].substring(0,i),o=e[n].substring(i+1)):r=e[n],i=r,o=o?decodeURIComponent(o.replace(/\+/g," ")):"",t.add(decodeURIComponent(i.replace(/\+/g," ")),o)}}}}function Fn(t,e){xn(t),e=Un(t,e),gn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,mn(t.a,e))}function qn(t,e){return xn(t),e=Un(t,e),gn(t.a.b,e)}function Vn(t,e,n){Fn(t,e),0<n.length&&(t.c=null,t.a.set(Un(t,e),wt(n)),t.b+=n.length)}function Bn(t){var e=new Pn;return e.c=t.c,t.a&&(e.a=new dn(t.a),e.b=t.b),e}function Un(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function Kn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Qn(t){var e,n,r=t.a.F.a;null!=r?(Ue(),r?(Ue(),kr(t.a,t,!1)):(Ue(),kr(t.a,t,!0))):(t.b=new Ze(t,void 0,void 0),t.b.h=t.h,r=Or(r=t.a,r.Y()?t.f:null,t.i),Ue(),Cn(r,"TYPE","xmlhttp"),e=t.a.j,n=t.a.I,e&&n&&h(r,e,n),rn(t.b,r,!1,t.f))}function jn(){this.a=this.b=null}function Gn(){this.a=new dn}function Wn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[ut]||(t[ut]=++ct)):e.charAt(0)+t}function zn(t,e){this.b=t,this.a=e}function Hn(t){this.g=t||10,t=c.PerformanceNavigationTiming?0<(t=c.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().yb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Gn),this.b=null,this.c=[]}(e=Pn.prototype).add=function(t,e){xn(this),this.c=null,t=Un(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.forEach=function(n,r){xn(this),this.a.forEach(function(t,e){vt(t,function(t){n.call(r,t,e,this)},this)},this)},e.K=function(){xn(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.C=function(t){xn(this);var e=[];if(tt(t))qn(this,t)&&(e=bt(e,this.a.get(Un(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=bt(e,t[n])}return e},e.set=function(t,e){return xn(this),this.c=null,qn(this,t=Un(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.C(r),o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")},mt(function(){},function(){}),(e=Kn.prototype).M=null,e.$=function(t){return this.a.$(t)},e.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},e.Ca=function(){return!1},e.Fa=function(t,e){var n;if(this.c=t.o,0==this.M)if(!this.a.o&&(t=t.a)&&(n=gr(t,"X-Client-Wire-Protocol"),this.l=n||null,this.a.j)&&(t=gr(t,"X-HTTP-Session-Id"))&&(this.a.I=t),e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Mr(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Mr(e,2);else 1==this.M&&(this.g?Ue():"11111"==e?(Ue(),this.g=!0,(!Ot||10<=Number(jt))&&(this.c=200,this.b.cancel(),Ue(),kr(this.a,this,!0))):(Ue(),this.g=!1))},e.na=function(){var t;this.c=this.b.o,this.b.b?0==this.M?(this.M=1,Qn(this)):1==this.M&&(this.g?(Ue(),kr(this.a,this,!0)):(Ue(),kr(this.a,this,!1))):(0!=this.M&&1!=this.M||Ue(),(t=this.a).m=this.c,Mr(t,2))},e.Y=function(){return this.a.Y()},e.ma=function(){return this.a.ma()},Gn.prototype.add=function(t){this.a.set(Wn(t),t)},Gn.prototype.C=function(){return this.a.C()};function Yn(t,e){!t.a&&(It(e,"spdy")||It(e,"quic")||It(e,"h2"))&&(t.f=t.g,t.a=new Gn,t.b)&&($n(t,t.b),t.b=null)}function Jn(t){return t.b||t.a&&t.a.a.c>=t.f}function Xn(t){return t.b?1:t.a?t.a.a.c:0}function Zn(t,e){return t.b?t.b==e:!!t.a&&(e=Wn(e),gn(t.a.a.b,e))}function $n(t,e){t.a?t.a.add(e):t.b=e}function tr(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=Wn(e),n=gn(t.a.a.b,n)),n&&mn(t.a.a,Wn(e)))}function er(t){var e;return null!=t.b?t.c.concat(t.b.j):null==t.a||0==t.a.a.c?wt(t.c):(e=t.c,vt(t.a.C(),function(t){e=e.concat(t.j)}),e)}function nr(){}function rr(){this.a=new nr}function ir(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Hn.prototype.cancel=function(){var t;this.c=er(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(vt(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},nr.prototype.stringify=function(t){return c.JSON.stringify(t,void 0)},nr.prototype.parse=function(t){return c.JSON.parse(t,void 0)};var or=c.JSON.parse;function ar(t){me.call(this),this.headers=new dn,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=sr,this.D=this.F=!1}mt(ar,me);var sr="",ur=/^https?$/i,cr=["POST","PUT"];function hr(t){return"content-type"==t.toLowerCase()}function lr(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,fr(t),dr(t)}function fr(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function pr(t){if(t.b&&(!t.s[1]||4!=yr(t)||2!=t.T()))if(t.l&&4==yr(t))ke(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==yr(t)){t.b=!1;try{var e,n,r,i,o=t.T();switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.A).match(vn)[1]||null)&&c.self&&c.self.location&&(i=(r=c.self.location.protocol).substr(0,r.length-1)),n=!ur.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var s=2<yr(t)?t.a.statusText:""}catch(t){s=""}t.f=s+" ["+t.T()+"]",fr(t)}}finally{dr(t)}}}function dr(t,e){if(t.a){mr(t);var n=t.a,r=t.s[0]?rt:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function mr(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(c.clearTimeout(t.m),t.m=null)}function yr(t){return t.a?t.a.readyState:0}function gr(t,e){return t.a?t.a.getResponseHeader(e):null}function vr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i,o;return r||(o="",Nt(n,function(t,e){o=(o=o+e+":")+t+"\r\n"}),n=o,tt(t)?(e=encodeURIComponent(String(e)),(e+=n=null!=n?"="+encodeURIComponent(String(n)):"")&&((n=t.indexOf("#"))<0&&(n=t.length),i=(r=t.indexOf("?"))<0||n<r?(r=n,""):t.substring(r+1,n),n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2])):h(t,e,n)),t}function br(t){this.f=[],this.F=new jn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!nt("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=nt("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=nt("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=nt("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=nt("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.zb||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Hn(t&&t.concurrentRequestLimit),this.ja=new rr,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function wr(t){var e,n;Tr(t),3==t.u&&(e=t.P++,h(n=wn(t.B),"SID",t.H),h(n,"RID",e),h(n,"TYPE","terminate"),Cr(t,n),(e=new Ze(t,e,void 0)).F=2,e.f=Dn(wn(n)),n=!1,!(n=c.navigator&&c.navigator.sendBeacon?c.navigator.sendBeacon(e.f.toString(),""):n)&&c.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=dt(),sn(e)),Lr(t)}function Tr(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(c.clearTimeout(t.l),t.l=null),Rr(t),t.b.cancel(),t.h&&(et(t.h)&&c.clearTimeout(t.h),t.h=null)}function Sr(t,e){t.f.push(new zn(t.Qa++,e)),3==t.u&&Er(t)}function Er(t){Jn(t.b)||t.h||(t.h=!0,Ee(t.Ha,t),t.A=0)}function Ir(t,e){var n=e?e.W:t.P++,r=wn(t.B);h(r,"SID",t.H),h(r,"RID",n),h(r,"AID",t.O),Cr(t,r),t.g&&t.i&&vr(r,t.g,t.i),n=new Ze(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Dr(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),$n(t.b,n),nn(n,r,e)}function Cr(t,n){t.c&&pn({},function(t,e){h(n,e,t)})}function Dr(t,e,n){n=Math.min(t.f.length,n);for(var r=t.c?ft(t.c.Sa,t.c,t):null,i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{((t,r,e)=>{var i=e||"";try{pn(t,function(t,e){var n=t;st(t)&&(n=ge(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}})(h,a,"req"+c+"_")}catch(t){r&&r(h)}}if(s){r=a.join("&");break}}return t=t.f.splice(0,n),e.j=t,r}function Nr(t){t.a||t.l||(t.S=1,Ee(t.Ga,t),t.v=0)}function Ar(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=Qe(ft(t.Ga,t),_r(t,t.v)),t.v++,1)}function kr(t,e,n){var r=e.l;r&&Yn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Or(t,null,t.ha),Er(t)}function Rr(t){null!=t.s&&(c.clearTimeout(t.s),t.s=null)}function _r(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Mr(t,e){var n,r,i,o;2==e?(n=null,t.c&&(n=null),r=ft(t.eb,t),n||(n=new bn("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Tn(n,"https"),Dn(n)),n=n.toString(),r=r,o=new xe,c.Image?((i=new Image).onload=pt(ir,o,i,"TestLoadImage: loaded",!0,r),i.onerror=pt(ir,o,i,"TestLoadImage: error",!1,r),i.onabort=pt(ir,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=pt(ir,o,i,"TestLoadImage: timeout",!1,r),c.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Ue(),t.u=0,t.c&&t.c.ta(e),Lr(t),Tr(t)}function Lr(t){t.u=0,t.m=-1,t.c&&(0==er(t.b).length&&0==t.f.length||(t.b.c.length=0,wt(t.f),t.f.length=0),t.c.sa())}function Or(t,e,n){var r,i,o,a,s,u=(o=n)instanceof bn?wn(o):new bn(o,void 0);return""!=u.b?(e&&Sn(u,e+"."+u.b),En(u,u.i)):(o=c.location,i=e?e+"."+o.hostname:o.hostname,r=o.protocol,i=i,o=+o.port,a=n,s=new bn(null,void 0),r&&Tn(s,r),i&&Sn(s,i),o&&En(s,o),a&&(s.a=a),u=s),t.V&&Nt(t.V,function(t,e){h(u,e,t)}),n=t.I,(e=t.j)&&n&&h(u,e,n),h(u,"VER",t.wa),Cr(t,u),u}function Pr(){}function xr(){if(Ot&&!(10<=Number(jt)))throw Error("Environmental error: no available transport.")}function Fr(t,e){me.call(this),this.a=new br(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:(r=(r=""==e)||0<=(r=e.length-1)&&e.indexOf("/",r)==r,e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!Tt(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tt(e)&&(this.a.j=e,null!==(t=this.b))&&e in t&&e in(t=this.b)&&delete t[e],this.f=new Br(this)}function qr(t){Ye.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Vr(){Je.call(this),this.status=1}function Br(t){this.a=t}(e=ar.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ze(this.H):ze($e),this.a.onreadystatechange=ft(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void lr(this,t)}t=n||"";var i,o=new dn(this.headers);r&&pn(r,function(t,e){o.set(e,t)}),r=(t=>{t:{for(var e=hr,n=t.length,r=tt(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:tt(t)?t.charAt(e):t[e]})(o.K()),n=c.FormData&&t instanceof c.FormData,0<=gt(cr,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{mr(this),0<this.o&&((this.D=(i=this.a,Ot&&Qt(9)&&et(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=ft(this.Ba,this)):this.m=ke(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){lr(this,t)}},e.Ba=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),dr(this))},e.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),dr(this,!0)),ar.N.G.call(this)},e.Ea=function(){this.j||(this.w||this.l||this.g?pr(this):this.Za())},e.Za=function(){pr(this)},e.T=function(){try{return 2<yr(this)?this.a.status:-1}catch(t){return-1}},e.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},e.Ua=function(t){var e;if(this.a)return e=this.a.responseText,t&&0==e.indexOf(t)&&(e=e.substring(t.length)),or(e)},e.ya=function(){return this.h},e.Xa=function(){return tt(this.f)?this.f:String(this.f)},(e=br.prototype).wa=8,e.u=1,e.Ca=function(){return 0==this.u},e.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new Ze(this,t,void 0),r=this.i;if(this.J&&(r?Rt(r=At(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&tt(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Dr(this,n,e),h(i=wn(this.B),"RID",t),h(i,"CVER",22),this.o&&this.j&&h(i,"X-HTTP-Session-Id",this.j),Cr(this,i),this.g&&r&&vr(i,this.g,r),$n(this.b,n),this.W?(h(i,"$req",e),h(i,"SID","null"),n.S=!0,nn(n,i,null)):nn(n,i,e),this.u=2}}else 3==this.u&&(t?Ir(this,t):0==this.f.length||Jn(this.b)||Ir(this))},e.Ga=function(){this.l=null,this.a=new Ze(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=wn(this.pa);h(t,"RID","rpc"),h(t,"SID",this.H),h(t,"CI",this.ia?"0":"1"),h(t,"AID",this.O),Cr(this,t),h(t,"TYPE","xmlhttp"),this.g&&this.i&&vr(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),rn(this.a,t,!0,this.ga)},e.Fa=function(t,e){if(0!=this.u&&(this.a==t||Zn(this.b,t)))if(this.m=t.o,!t.s&&Zn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(ot(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Rr(this),this.a.cancel(),this.a=null}Ar(this),Ue()}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Qe(ft(this.Ya,this),6e3));if(Xn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Mr(this,11)}else if(!t.s&&this.a!=t||Rr(this),!Tt(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r,i=e[n];this.O=i[0],i=i[1],2==this.u?"c"==i[0]?(this.H=i[1],this.ga=i[2],null!=(r=i[3])&&(this.wa=r),null!=(i=i[5])&&et(i)&&0<i&&(this.D=1.5*i),this.o&&(i=t.a)&&((r=gr(i,"X-Client-Wire-Protocol"))&&Yn(this.b,r),this.j)&&(i=gr(i,"X-HTTP-Session-Id"))&&(this.I=i,h(this.B,this.j,i)),this.u=3,this.c&&this.c.va(),i=t,this.pa=Or(this,this.Y()?this.ga:null,this.ha),i.s?(tr(this.b,i),(r=this.D)&&i.setTimeout(r),i.i&&(cn(i),sn(i)),this.a=i):Nr(this),0<this.f.length&&Er(this)):"stop"!=i[0]&&"close"!=i[0]||Mr(this,7):3==this.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Mr(this,7):wr(this):"noop"!=i[0]&&this.c&&this.c.ua(i),this.v=0)}},e.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Ar(this),Ue())},e.na=function(t){var e,n,r=null;if(this.a==t){Rr(this),this.a=null;var i=2}else{if(!Zn(this.b,t))return;r=t.j,tr(this.b,t),i=1}if(this.m=t.o,0!=this.u)if(t.b)(1==i?(r=dt()-t.v,Fe.dispatchEvent(new Ke(Fe,t.l&&t.l.length,this.A)),Er):Nr)(this);else{var o=t.c;if(3==o||0==o&&0<this.m||(1!=i||(n=t,Xn((e=this).b)>=e.b.f-(e.h?1:0))||(e.h?(e.f=n.j.concat(e.f),0):1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa)||(e.h=Qe(ft(e.Ha,e,n),_r(e,e.A)),e.A++,0)))&&(2!=i||!Ar(this)))switch(r&&0<r.length&&(t=this.b,t.c=t.c.concat(r)),o){case 1:Mr(this,5);break;case 4:Mr(this,10);break;case 3:Mr(this,6);break;default:Mr(this,2)}}},e.eb=function(t){Ue()},e.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new ar(this.Ka)).F=this.R,t},e.ma=function(){return!!this.c&&!0},e.Y=function(){return this.R},(e=Pr.prototype).va=function(){},e.ua=function(){},e.ta=function(){},e.sa=function(){},e.Sa=function(){},xr.prototype.a=function(t,e){return new Fr(t,e)},mt(Fr,me),(e=Fr.prototype).addEventListener=function(t,e,n,r){Fr.N.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){Fr.N.removeEventListener.call(this,t,e,n,r)},e.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Ue(),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new Kn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=vr(e,t.g,t.i)),(t=t.w).i=n,e=Or(t.a,null,t.i),Ue(),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,Qn(t)):(Cn(e,"MODE","init"),!t.a.o&&t.a.j&&Cn(e,"X-HTTP-Session-Id",t.a.j),t.b=new Ze(t,void 0,void 0),t.b.h=t.h,rn(t.b,e,!1,null),t.M=0)},e.close=function(){wr(this.a)},e.Wa=function(t){var e;tt(t)?((e={}).__data__=t,Sr(this.a,e)):this.h?((e={}).__data__=ge(t),Sr(this.a,e)):Sr(this.a,t)},e.G=function(){this.a.c=null,delete this.f,wr(this.a),delete this.a,Fr.N.G.call(this)},mt(qr,Ye),mt(Vr,Je),mt(Br,Pr),Br.prototype.va=function(){this.a.dispatchEvent("a")},Br.prototype.ua=function(t){this.a.dispatchEvent(new qr(t))},Br.prototype.ta=function(t){this.a.dispatchEvent(new Vr)},Br.prototype.sa=function(){this.a.dispatchEvent("b")};e=pt(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},xr);xr.prototype.createWebChannel=xr.prototype.a,Fr.prototype.send=Fr.prototype.Wa,Fr.prototype.open=Fr.prototype.Va,je.NO_ERROR=0,je.TIMEOUT=8,je.HTTP_ERROR=6,Ge.COMPLETE="complete",(He.EventType=n).OPEN="a",n.CLOSE="b",n.ERROR="c",n.MESSAGE="d",me.prototype.listen=me.prototype.za,ar.prototype.listenOnce=ar.prototype.Aa,ar.prototype.getLastError=ar.prototype.Xa,ar.prototype.getLastErrorCode=ar.prototype.ya,ar.prototype.getStatus=ar.prototype.T,ar.prototype.getResponseJson=ar.prototype.Ua,ar.prototype.getResponseText=ar.prototype.aa,ar.prototype.send=ar.prototype.ca;var Ur,n={createWebChannelTransport:e,ErrorCode:je,EventType:Ge,WebChannel:He,XhrIo:ar},Kr=n.createWebChannelTransport,Qr=n.ErrorCode,jr=n.EventType,Gr=n.WebChannel,Wr=n.XhrIo,zr=zp.SDK_VERSION,Hr=new Q("@firebase/firestore");function Yr(){return Hr.logLevel===F.DEBUG?Ur.DEBUG:Hr.logLevel===F.SILENT?Ur.SILENT:Ur.ERROR}function Jr(t){switch(t){case Ur.DEBUG:Hr.logLevel=F.DEBUG;break;case Ur.ERROR:Hr.logLevel=F.ERROR;break;case Ur.SILENT:Hr.logLevel=F.SILENT;break;default:Hr.error("Firestore ("+zr+"): Invalid value passed to `setLogLevel`")}}function f(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];Hr.logLevel<=F.DEBUG&&(n=r.map(Zr),Hr.debug.apply(Hr,V(["Firestore ("+zr+") ["+t+"]: "+e],n)))}function Xr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Hr.logLevel<=F.ERROR&&(e=n.map(Zr),Hr.error.apply(Hr,V(["Firestore ("+zr+"): "+t],e)))}function Zr(t){if("string"==typeof t)return t;var e=$r.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function l(t){t="FIRESTORE ("+zr+") INTERNAL ASSERTION FAILED: "+t;throw Xr(t),new Error(t)}function y(t,e){t||l(e)}Ur={DEBUG:0,0:"DEBUG",ERROR:1,1:"ERROR",SILENT:2,2:"SILENT"};ti.setPlatform=function(t){ti.platform&&l("Platform already defined"),ti.platform=t},ti.getPlatform=function(){return ti.platform||l("Platform not set"),ti.platform};var $r=ti;function ti(){}function ei(){return $r.getPlatform().emptyByteString}var ni,p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},g=(t(ri,ni=Error),ri);function ri(t,e){var n=ni.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function ii(t,e){function n(){var t="This constructor is private.";throw new g(p.INVALID_ARGUMENT,t=e?t+" "+e:t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}function oi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ai(t,e){return void 0!==t?t:e}function si(t,e){for(var n in t){var r;Object.prototype.hasOwnProperty.call(t,n)&&(r=Number(n),isNaN(r)||e(r,t[n]))}}function ui(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ci(t){for(var e in y(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function hi(t,e){if(0!==e.length)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Di(e.length,"argument")+".")}function v(t,e,n){if(e.length!==n)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() requires "+Di(n,"argument")+", but was called with "+Di(e.length,"argument")+".")}function li(t,e,n){if(e.length<n)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Di(n,"argument")+", but was called with "+Di(e.length,"argument")+".")}function fi(t,e,n,r){if(e.length<n||e.length>r)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Di(e.length,"argument")+".")}function pi(t,e,n,r){vi(t,e,Ci(n)+" argument",r)}function di(t,e,n,r){void 0!==r&&pi(t,e,n,r)}function mi(t,e,n,r){vi(t,e,n+" option",r)}function yi(t,e,n,r){void 0!==r&&mi(t,e,n,r)}function gi(t,e,n,r,i){if(void 0!==r){for(var o=r,a=[],s=0,u=i;s<u.length;s++){var c=u[s];if(c===o)return;a.push(wi(c))}r=wi(o);throw new g(p.INVALID_ARGUMENT,"Invalid value "+r+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+a.join(", "))}}function vi(t,e,n,r){if(!("object"===e?bi(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e))throw r=wi(r),new g(p.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+r)}function bi(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function wi(t){return void 0===t?"undefined":null===t?"null":"string"==typeof t?(20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t)):"number"==typeof t||"boolean"==typeof t?""+t:"object"!=typeof t?"function"==typeof t?"a function":l("Unknown wrong type: "+typeof t):t instanceof Array?"an array":(t=(t=>{if(t.constructor){t=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(t&&1<t.length)return t[1]}return null})(t))?"a custom "+t+" object":"an object"}function Ti(t,e,n){if(void 0===n)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Ci(e)+" argument, but it was undefined.")}function Si(n,t,r){ui(t,function(t,e){if(r.indexOf(t)<0)throw new g(p.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Ei(t,e,n,r){r=wi(r);return new g(p.INVALID_ARGUMENT,"Function "+t+"() requires its "+Ci(n)+" argument to be a "+e+", but it was: "+r)}function Ii(t,e,n){if(n<=0)throw new g(p.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+Ci(e)+" argument to be a positive number, but it was: "+n+".")}function Ci(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Di(t,e){return t+" "+e+(1===t?"":"s")}Ai.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return y(20===e.length,"Invalid auto ID: "+e),e};var Ni=Ai;function Ai(){}function b(t,e){return t<e?-1:e<t?1:0}function ki(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Ri(t){return t+"\0"}function _i(){if("undefined"==typeof Uint8Array)throw new g(p.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Mi(){if(!$r.getPlatform().base64Available)throw new g(p.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}Oi.fromBase64String=function(t){v("Blob.fromBase64String",arguments,1),pi("Blob.fromBase64String","string",1,t),Mi();try{return new Oi($r.getPlatform().atob(t))}catch(t){throw new g(p.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},Oi.fromUint8Array=function(t){if(v("Blob.fromUint8Array",arguments,1),_i(),t instanceof Uint8Array)return new Oi(Array.prototype.map.call(t,function(t){return String.fromCharCode(t)}).join(""));throw Ei("Blob.fromUint8Array","Uint8Array",1,t)},Oi.prototype.toBase64=function(){return v("Blob.toBase64",arguments,0),Mi(),$r.getPlatform().btoa(this._binaryString)},Oi.prototype.toUint8Array=function(){v("Blob.toUint8Array",arguments,0),_i();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},Oi.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Oi.prototype.isEqual=function(t){return this._binaryString===t._binaryString},Oi.prototype._compareTo=function(t){return b(this._binaryString,t._binaryString)};var Li=Oi;function Oi(t){Mi(),this._binaryString=t}function Pi(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}var e=ii(Li,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),xi="(default)",Fi=(Object.defineProperty(qi.prototype,"isDefaultDatabase",{get:function(){return this.database===xi},enumerable:!0,configurable:!0}),qi.prototype.isEqual=function(t){return t instanceof qi&&t.projectId===this.projectId&&t.database===this.database},qi.prototype.compareTo=function(t){return b(this.projectId,t.projectId)||b(this.database,t.database)},qi);function qi(t,e){this.projectId=t,this.database=e||xi}Bi.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Bi.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},Bi.INVALID=-1;var Vi=Bi;function Bi(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}var Ui="__name__",je=(Object.defineProperty(Ki.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Ki.prototype.isEqual=function(t){return 0===Ki.comparator(this,t)},Ki.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Ki?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},Ki.prototype.limit=function(){return this.offset+this.length},Ki.prototype.popFirst=function(t){return y(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},Ki.prototype.popLast=function(){return y(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},Ki.prototype.firstSegment=function(){return y(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Ki.prototype.lastSegment=function(){return this.get(this.length-1)},Ki.prototype.get=function(t){return y(t<this.length,"Index out of range"),this.segments[this.offset+t]},Ki.prototype.isEmpty=function(){return 0===this.length},Ki.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ki.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ki.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Ki.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Ki.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Ki);function Ki(t,e,n){void 0===e?e=0:e>t.length&&l("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&l("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}t(Gi,Qi=je),Gi.prototype.construct=function(t,e,n){return new Gi(t,e,n)},Gi.prototype.canonicalString=function(){return this.toArray().join("/")},Gi.prototype.toString=function(){return this.canonicalString()},Gi.fromString=function(t){if(0<=t.indexOf("//"))throw new g(p.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Gi(t.split("/").filter(function(t){return 0<t.length}))},Gi.EMPTY_PATH=new Gi([]);var Qi,ji=Gi;function Gi(){return null!==Qi&&Qi.apply(this,arguments)||this}var Wi,zi=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hi=(t(Yi,Wi=je),Yi.prototype.construct=function(t,e,n){return new Yi(t,e,n)},Yi.isValidIdentifier=function(t){return zi.test(t)},Yi.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),t=Yi.isValidIdentifier(t)?t:"`"+t+"`"}).join(".")},Yi.prototype.toString=function(){return this.canonicalString()},Yi.prototype.isKeyField=function(){return 1===this.length&&this.get(0)===Ui},Yi.keyField=function(){return new Yi([Ui])},Yi.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new g(p.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new g(p.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new g(p.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new g(p.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yi(e)},Yi.EMPTY_PATH=new Yi([]),Yi);function Yi(){return null!==Wi&&Wi.apply(this,arguments)||this}Ji.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ji.prototype.isEqual=function(t){return null!==t&&0===ji.comparator(this.path,t.path)},Ji.prototype.toString=function(){return this.path.toString()},Ji.comparator=function(t,e){return ji.comparator(t.path,e.path)},Ji.isDocumentKey=function(t){return t.length%2==0},Ji.fromSegments=function(t){return new Ji(new ji(t.slice()))},Ji.fromPathString=function(t){return new Ji(ji.fromString(t))},Ji.EMPTY=new Ji(new ji([]));var w=Ji;function Ji(t){this.path=t,y(Ji.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}function Xi(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}Zi={All:"all",ListenStreamIdle:"listen_stream_idle",ListenStreamConnectionBackoff:"listen_stream_connection_backoff",WriteStreamIdle:"write_stream_idle",WriteStreamConnectionBackoff:"write_stream_connection_backoff",OnlineStateTimeout:"online_state_timeout",ClientMetadataRefresh:"client_metadata_refresh",LruGarbageCollection:"lru_garbage_collection",RetryTransaction:"retry_transaction"};to.createAndSchedule=function(t,e,n,r,i){t=new to(t,e,Date.now()+n,r,i);return t.start(n),t},to.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},to.prototype.skipDelay=function(){return this.handleDelayElapsed()},to.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new g(p.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},to.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},to.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)};var Zi,$i=to;function to(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}Object.defineProperty(no.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),no.prototype.enqueueAndForget=function(t){this.enqueue(t)},no.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},no.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},no.prototype.enqueueAndInitiateShutdown=function(e){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},no.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(t){}):this.enqueueInternal(t)},no.prototype.enqueueInternal=function(t){var n=this,e=this.tail.then(function(){return n.operationInProgress=!0,t().catch(function(t){n.failure=t,n.operationInProgress=!1;var e=t.stack||t.message||"";throw Xr("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.operationInProgress=!1,t})});return this.tail=e},no.prototype.enqueueAfterDelay=function(t,e,n){var r=this,t=(this.verifyNotFailed(),y(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.timerIdsToSkip.indexOf(t)&&(e=0),$i.createAndSchedule(this,t,e,n,function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(t),t},no.prototype.verifyNotFailed=function(){this.failure&&l("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},no.prototype.verifyOperationInProgress=function(){y(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},no.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},no.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},no.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){y(r===Zi.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.delayedOperations;t<e.length;t++){var n=e[t];if(n.skipDelay(),r!==Zi.All&&n.timerId===r)break}return i.drain()})},no.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},no.prototype.removeDelayedOperation=function(t){t=this.delayedOperations.indexOf(t);y(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)};var eo=no;function no(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var ro="",io="",oo="",ao="";function so(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=uo(e)),e=((t,e)=>{for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=ro+oo;break;case ro:n+=ro+ao;break;default:n+=o}}return n})(t.get(n),e);return uo(e)}function uo(t){return t+ro+io}function co(t){var e=t.length;if(y(2<=e,"Invalid path "+t),2===e)return y(t.charAt(0)===ro&&t.charAt(1)===io,"Non-empty path "+t+" had length 2"),ji.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(ro,o);switch((a<0||n<a)&&l('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case io:var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case oo:i=i+t.substring(o,a)+"\0";break;case ao:i+=t.substring(o,a+1);break;default:l('Invalid encoded resource path: "'+t+'"')}o=a+2}return new ji(r)}lo.now=function(){return lo.fromMillis(Date.now())},lo.fromDate=function(t){return lo.fromMillis(t.getTime())},lo.fromMillis=function(t){var e=Math.floor(t/1e3);return new lo(e,1e6*(t-1e3*e))},lo.prototype.toDate=function(){return new Date(this.toMillis())},lo.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},lo.prototype._compareTo=function(t){return this.seconds===t.seconds?b(this.nanoseconds,t.nanoseconds):b(this.seconds,t.seconds)},lo.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},lo.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"};var ho=lo;function lo(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new g(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new g(p.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new g(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new g(p.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}fo.fromMicroseconds=function(t){var e=Math.floor(t/1e6);return new fo(new ho(e,t%1e6*1e3))},fo.fromTimestamp=function(t){return new fo(t)},fo.forDeletedDoc=function(){return fo.MIN},fo.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},fo.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},fo.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},fo.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},fo.prototype.toTimestamp=function(){return this.timestamp},fo.MIN=new fo(new ho(0,0));var T=fo;function fo(t){this.timestamp=t}mo.prototype.insert=function(t,e){return new mo(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,vo.BLACK,null,null))},mo.prototype.remove=function(t){return new mo(this.comparator,this.root.remove(t,this.comparator).copy(null,null,vo.BLACK,null,null))},mo.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},mo.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},mo.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(mo.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),mo.prototype.minKey=function(){return this.root.minKey()},mo.prototype.maxKey=function(){return this.root.maxKey()},mo.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},mo.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},mo.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},mo.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},mo.prototype.getIterator=function(){return new yo(this.root,null,this.comparator,!1)},mo.prototype.getIteratorFrom=function(t){return new yo(this.root,t,this.comparator,!1)},mo.prototype.getReverseIterator=function(){return new yo(this.root,null,this.comparator,!0)},mo.prototype.getReverseIteratorFrom=function(t){return new yo(this.root,t,this.comparator,!0)};var po=mo;function mo(t,e){this.comparator=t,this.root=e||vo.EMPTY}go.prototype.getNext=function(){y(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},go.prototype.hasNext=function(){return 0<this.nodeStack.length},go.prototype.peek=function(){var t;return 0===this.nodeStack.length?null:{key:(t=this.nodeStack[this.nodeStack.length-1]).key,value:t.value}};var yo=go;function go(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}o.prototype.copy=function(t,e,n,r,i){return new o(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},o.prototype.isEmpty=function(){return!1},o.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},o.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},o.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},o.prototype.minKey=function(){return this.min().key},o.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},o.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},o.prototype.removeMin=function(){var t;return this.left.isEmpty()?o.EMPTY:(t=(t=(t=this).left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},o.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return o.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},o.prototype.isRed=function(){return this.color},o.prototype.fixUp=function(){var t=this;return t=(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},o.prototype.moveRedLeft=function(){var t=this.colorFlip();return t=t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},o.prototype.moveRedRight=function(){var t=this.colorFlip();return t=t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},o.prototype.rotateLeft=function(){var t=this.copy(null,null,o.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},o.prototype.rotateRight=function(){var t=this.copy(null,null,o.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},o.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},o.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},o.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw l("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw l("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw l("Black depths differ");return t+(this.isRed()?0:1)},o.EMPTY=null,o.RED=!0,o.BLACK=!1;var vo=o;function o(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:o.RED,this.left=null!=r?r:o.EMPTY,this.right=null!=i?i:o.EMPTY,this.size=this.left.size+1+this.right.size}Object.defineProperty(bo.prototype,"key",{get:function(){throw l("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"value",{get:function(){throw l("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"color",{get:function(){throw l("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"left",{get:function(){throw l("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(bo.prototype,"right",{get:function(){throw l("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),bo.prototype.copy=function(t,e,n,r,i){return this},bo.prototype.insert=function(t,e,n){return new vo(t,e)},bo.prototype.remove=function(t,e){return this},bo.prototype.isEmpty=function(){return!0},bo.prototype.inorderTraversal=function(t){return!1},bo.prototype.reverseTraversal=function(t){return!1},bo.prototype.minKey=function(){return null},bo.prototype.maxKey=function(){return null},bo.prototype.isRed=function(){return!1},bo.prototype.checkMaxDepth=function(){return!0},bo.prototype.check=function(){return 0};Ge=bo;function bo(){this.size=0}vo.EMPTY=new Ge;wo.fromMapKeys=function(t){var e=new wo(t.comparator);return t.forEach(function(t){e=e.add(t)}),e},wo.prototype.has=function(t){return null!==this.data.get(t)},wo.prototype.first=function(){return this.data.minKey()},wo.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(wo.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),wo.prototype.indexOf=function(t){return this.data.indexOf(t)},wo.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},wo.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},wo.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},wo.prototype.firstAfterOrEqual=function(t){t=this.data.getIteratorFrom(t);return t.hasNext()?t.getNext().key:null},wo.prototype.getIterator=function(){return new To(this.data.getIterator())},wo.prototype.getIteratorFrom=function(t){return new To(this.data.getIteratorFrom(t))},wo.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},wo.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},wo.prototype.isEmpty=function(){return this.data.isEmpty()},wo.prototype.unionWith=function(t){var e=this;return t.forEach(function(t){e=e.add(t)}),e},wo.prototype.isEqual=function(t){if(!(t instanceof wo))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},wo.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},wo.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},wo.prototype.copy=function(t){var e=new wo(this.comparator);return e.data=t,e};var S=wo;function wo(t){this.comparator=t,this.data=new po(this.comparator)}So.prototype.getNext=function(){return this.iter.getNext().key},So.prototype.hasNext=function(){return this.iter.hasNext()};var To=So;function So(t){this.iter=t}var Eo=new po(w.comparator);var Io=new po(w.comparator);var Co=new po(w.comparator);var Do=new S(w.comparator);function E(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Do,r=0,i=t;r<i.length;r++)n=n.add(i[r]);return n}var No=new S(b);ko.prototype.applyToRemoteDocument=function(t,e,n){e&&y(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o,a=this.mutations[i];a.key.isEqual(t)&&(o=r[i],e=a.applyToRemoteDocument(e,o))}return e},ko.prototype.applyToLocalView=function(t,e){e&&y(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=i.applyToLocalView(e,e,this.localWriteTime));for(var i,o=e,a=0,s=this.mutations;a<s.length;a++)(i=s[a]).key.isEqual(t)&&(e=i.applyToLocalView(e,o,this.localWriteTime));return e},ko.prototype.applyToLocalDocumentSet=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.applyToLocalView(t.key,n.get(t.key));e&&(i=i.insert(t.key,e))}),i},ko.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},E())},ko.prototype.isEqual=function(t){return this.batchId===t.batchId&&ki(this.mutations,t.mutations)&&ki(this.baseMutations,t.baseMutations)};var Ao=ko;function ko(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,y(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}_o.from=function(t,e,n,r){y(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=Co,o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new _o(t,e,n,r,i)};var Ro=_o;function _o(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}Mo.prototype.catch=function(t){return this.next(void 0,t)},Mo.prototype.next=function(r,i){var o=this;return this.callbackAttached&&l("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new Mo(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},Mo.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Mo.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof Mo?e:Mo.resolve(e)}catch(t){return Mo.reject(t)}},Mo.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):Mo.resolve(e)},Mo.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):Mo.reject(e)},Mo.resolve=function(n){return new Mo(function(t,e){t(n)})},Mo.reject=function(n){return new Mo(function(t,e){e(n)})},Mo.waitFor=function(t){return new Mo(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Mo.or=function(t){for(var n=Mo.resolve(!1),e=0,r=t;e<r.length;e++)(e=>{n=n.next(function(t){return t?Mo.resolve(t):e()})})(r[e]);return n},Mo.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)};var I=Mo;function Mo(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}var Lo="SimpleDb",Oo=(Po.openOrCreate=function(i,t,o){return y(Po.isAvailable(),"IndexedDB not supported in current environment."),f(Lo,"Opening database:",i),new I(function(e,n){var r=window.indexedDB.open(i,t);r.onsuccess=function(t){t=t.target.result;e(new Po(t))},r.onblocked=function(){n(new g(p.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new g(p.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(t)},r.onupgradeneeded=function(t){f(Lo,'Database "'+i+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;o.createOrUpgrade(e,r.transaction,t.oldVersion,js).next(function(){f(Lo,"Database upgrade to version "+js+" complete")})}}).toPromise()},Po.delete=function(t){return f(Lo,"Removing database:",t),Ko(window.indexedDB.deleteDatabase(t)).toPromise()},Po.isAvailable=function(){var t,e,n;return!("undefined"==typeof window||null==window.indexedDB||!Po.isMockPersistence()&&(void 0===window.navigator||(t=G(),e=0<(e=Po.getIOSVersion(t))&&e<10,n=0<(n=Po.getAndroidVersion(t))&&n<4.5,0<t.indexOf("MSIE "))||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n))},Po.isMockPersistence=function(){var t;return"undefined"!=typeof process&&"YES"===(null==(t=process.env)?void 0:t.USE_MOCK_PERSISTENCE)},Po.getStore=function(t,e){return t.store(e)},Po.getIOSVersion=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},Po.getAndroidVersion=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},Po.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},Po.prototype.runTransaction=function(r,c,h){return d(this,void 0,void 0,function(){var o,a,s,e,u,n;return m(this,function(t){switch(t.label){case 0:o=r.startsWith("readonly"),a=r.endsWith("idempotent"),s=0,e=function(){var e,n,r,i;return m(this,function(t){switch(t.label){case 0:++s,e=qo.open(u.db,o?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),(n=h(e).catch(function(t){return e.abort(t),I.reject(t)}).toPromise()).catch(function(){}),[4,e.completionPromise];case 2:return t.sent(),[2,{value:n}];case 3:return r=t.sent(),i=a&&"FirebaseError"!==r.name&&s<3,f(Lo,"Transaction failed with error: %s. Retrying: %s.",r.message,i),i?[3,4]:[2,{value:Promise.reject(r)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:return"object"==typeof(n=t.sent())?[2,n.value]:[3,1];case 3:return[2]}})})},Po.prototype.close=function(){this.db.close()},Po);function Po(t){this.db=t,12.2===Po.getIOSVersion(G())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}Object.defineProperty(Fo.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(Fo.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(Fo.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),Fo.prototype.done=function(){this.shouldStop=!0},Fo.prototype.skip=function(t){this.nextKey=t},Fo.prototype.delete=function(){return Ko(this.dbCursor.delete())};var xo=Fo;function Fo(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}Vo.open=function(t,e,n){return new Vo(t.transaction(n,e))},Object.defineProperty(Vo.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Vo.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(f(Lo,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Vo.prototype.store=function(t){var e=this.transaction.objectStore(t);return y(!!e,"Object store not part of transaction: "+t),new Bo(e)};var qo=Vo;function Vo(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new Xi,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){t=jo(t.target.error);e.completionDeferred.reject(t)}}Uo.prototype.put=function(t,e){return Ko(void 0!==e?(f(Lo,"PUT",this.store.name,t,e),this.store.put(e,t)):(f(Lo,"PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},Uo.prototype.add=function(t){return f(Lo,"ADD",this.store.name,t,t),Ko(this.store.add(t))},Uo.prototype.get=function(e){var n=this;return Ko(this.store.get(e)).next(function(t){return f(Lo,"GET",n.store.name,e,t=void 0===t?null:t),t})},Uo.prototype.delete=function(t){return f(Lo,"DELETE",this.store.name,t),Ko(this.store.delete(t))},Uo.prototype.count=function(){return f(Lo,"COUNT",this.store.name),Ko(this.store.count())},Uo.prototype.loadAll=function(t,e){var t=this.cursor(this.options(t,e)),n=[];return this.iterateCursor(t,function(t,e){n.push(e)}).next(function(){return n})},Uo.prototype.deleteAll=function(t,e){f(Lo,"DELETE ALL",this.store.name);t=this.options(t,e),t.keysOnly=!1,e=this.cursor(t);return this.iterateCursor(e,function(t,e,n){return n.delete()})},Uo.prototype.iterate=function(t,e){e?n=t:(n={},e=t);var n,t=this.cursor(n);return this.iterateCursor(t,e)},Uo.prototype.iterateSerial=function(r){var t=this.cursor({});return new I(function(n,e){t.onerror=function(t){t=jo(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},Uo.prototype.iterateCursor=function(t,i){var o=[];return new I(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n,t=t.target.result;!t||(e=new xo(t),(n=i(t.primaryKey,t.value,e))instanceof I&&(n=n.catch(function(t){return e.done(),I.reject(t)}),o.push(n)),e.isDone)?r():null===e.skipToKey?t.continue():t.continue(e.skipToKey)}}).next(function(){return I.waitFor(o)})},Uo.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(y(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},Uo.prototype.cursor=function(t){var e,n="next";return t.reverse&&(n="prev"),t.index?(e=this.store.index(t.index),t.keysOnly?e.openKeyCursor(t.range,n):e.openCursor(t.range,n)):this.store.openCursor(t.range,n)};var Bo=Uo;function Uo(t){this.store=t}function Ko(t){return new I(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=jo(t.target.error);n(t)}})}var Qo=!1;function jo(t){var e=Oo.getIOSVersion(G());if(12.2<=e&&e<13){var n,e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e))return n=new g("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."),Qo||(Qo=!0,setTimeout(function(){throw n},0)),n}return t}zo.forUser=function(t,e,n,r){return y(""!==t.uid,"UserID must not be an empty string."),new zo(t.isAuthenticated()?t.uid:"",e,n,r)},zo.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xo(t).iterate({index:Zs.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},zo.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Jo(n),$o(e).put(t)})},zo.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next(function(t){return t.lastStreamToken})},zo.prototype.setLastStreamToken=function(e,n){return this.getMutationQueueMetadata(e).next(function(t){return t.lastStreamToken=Jo(n),$o(e).put(t)})},zo.prototype.addMutationBatch=function(c,h,l,f){var p=this,d=Zo(c),m=Xo(c);return m.add({}).next(function(t){y("number"==typeof t,"Auto-generated key is not a number");for(var e=new Ao(t,h,l,f),n=p.serializer.toDbMutationBatch(p.userId,e),r=[],i=new S(function(t,e){return b(t.canonicalString(),e.canonicalString())}),o=0,a=f;o<a.length;o++){var s=a[o],u=tu.key(p.userId,s.key.path,t),i=i.add(s.key.path.popLast());r.push(m.put(n)),r.push(d.put(u,tu.PLACEHOLDER))}return i.forEach(function(t){r.push(p.indexManager.addToCollectionParentIndex(c,t))}),c.addOnCommittedListener(function(){p.documentKeysByBatchId[t]=e.keys()}),I.waitFor(r).next(function(){return e})})},zo.prototype.lookupMutationBatch=function(t,e){var n=this;return Xo(t).get(e).next(function(t){return t?(y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null})},zo.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?I.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(function(t){return t?(t=t.keys(),n.documentKeysByBatchId[e]=t):null})},zo.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Xo(t).iterate({index:Zs.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(y(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.fromDbMutationBatch(e)),n.done()}).next(function(){return o})},zo.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Xo(t).iterate({index:Zs.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},zo.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xo(t).loadAll(Zs.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.fromDbMutationBatch(t)})})},zo.prototype.getAllMutationBatchesAffectingDocumentKey=function(a,s){var u=this,t=tu.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),c=[];return Zo(a).iterate({range:t},function(e,t,n){var r=e[0],i=e[2],o=co(e[1]);if(r===u.userId&&s.path.isEqual(o))return Xo(a).get(i).next(function(t){if(!t)throw l("Dangling document-mutation reference found: "+e+" which points to "+i);y(t.userId===u.userId,"Unexpected user '"+t.userId+"' for mutation batch "+i),c.push(u.serializer.fromDbMutationBatch(t))});n.done()}).next(function(){return c})},zo.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var a=this,s=new S(b),n=[];return t.forEach(function(o){var t=tu.prefixForPath(a.userId,o.path),t=IDBKeyRange.lowerBound(t),t=Zo(e).iterate({range:t},function(t,e,n){var r=t[0],i=t[2],t=co(t[1]);r===a.userId&&o.path.isEqual(t)?s=s.add(i):n.done()});n.push(t)}),I.waitFor(n).next(function(){return a.lookupMutationBatches(e,s)})},zo.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,a=(y(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),y(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView"),e.path),s=a.length+1,e=tu.prefixForPath(this.userId,a),e=IDBKeyRange.lowerBound(e),u=new S(b);return Zo(t).iterate({range:e},function(t,e,n){var r=t[0],i=t[2],t=co(t[1]);r===o.userId&&a.isPrefixOf(t)?t.length===s&&(u=u.add(i)):n.done()}).next(function(){return o.lookupMutationBatches(t,u)})},zo.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Xo(t).get(e).next(function(t){if(null===t)throw l("Dangling document-mutation reference found, which points to "+e);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))}))}),I.waitFor(i).next(function(){return r})},zo.prototype.removeMutationBatch=function(e,n){var r=this;return Yo(e.simpleDbTransaction,this.userId,n).next(function(t){return e.addOnCommittedListener(function(){r.removeCachedMutationKeys(n.batchId)}),I.forEach(t,function(t){return r.referenceDelegate.removeMutationReference(e,t)})})},zo.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},zo.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(t){var r;return t?(t=IDBKeyRange.lowerBound(tu.prefixForUser(i.userId)),r=[],Zo(e).iterate({range:t},function(t,e,n){t[0]===i.userId?(t=co(t[1]),r.push(t)):n.done()}).next(function(){y(0===r.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+r.map(function(t){return t.canonicalString()}))})):I.resolve()})},zo.prototype.containsKey=function(t,e){return Ho(t,this.userId,e)},zo.prototype.getMutationQueueMetadata=function(t){var e=this;return $o(t).get(this.userId).next(function(t){return t||new Js(e.userId,-1,"")})};var Go,Wo=zo;function zo(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Ho(t,r,e){var e=tu.prefixForPath(r,e.path),i=e[1],e=IDBKeyRange.lowerBound(e),o=!1;return Zo(t).iterate({range:e,keysOnly:!0},function(t,e,n){t[0]===r&&t[1]===i&&(o=!0),n.done()}).next(function(){return o})}function Yo(t,e,n){var r=t.store(Zs.store),i=t.store(tu.store),o=[],t=IDBKeyRange.only(n.batchId),a=0,r=r.iterate({range:t},function(t,e,n){return a++,n.delete()});o.push(r.next(function(){y(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=tu.key(e,h.key.path,n.batchId);o.push(i.delete(l)),s.push(h.key)}return I.waitFor(o).next(function(){return s})}function Jo(t){return t instanceof Uint8Array?(y(Oo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function Xo(t){return Gu.getStore(t,Zs.store)}function Zo(t){return Gu.getStore(t,tu.store)}function $o(t){return Gu.getStore(t,Js.store)}Go={QueryCache:0,0:"QueryCache",SyncEngine:1,1:"SyncEngine"};ea.prototype.next=function(){var t=this.nextId;return this.nextId+=2,t},ea.prototype.after=function(t){return this.seek(t+2),this.next()},ea.prototype.seek=function(t){y((1&t)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},ea.forTargetCache=function(){return new ea(Go.QueryCache,2)},ea.forSyncEngine=function(){return new ea(Go.SyncEngine)};var ta=ea;function ea(t,e){y((1&(this.generatorId=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.seek(void 0!==e?e:this.generatorId)}ra.prototype.allocateTargetId=function(e){var n=this;return this.retrieveMetadata(e).next(function(t){return t.highestTargetId=n.targetIdGenerator.after(t.highestTargetId),n.saveMetadata(e,t).next(function(){return t.highestTargetId})})},ra.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next(function(t){return T.fromTimestamp(new ho(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},ra.prototype.getHighestSequenceNumber=function(t){return aa(t.simpleDbTransaction)},ra.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.retrieveMetadata(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),t.highestListenSequenceNumber<n&&(t.highestListenSequenceNumber=n),i.saveMetadata(e,t)})},ra.prototype.addTargetData=function(e,n){var r=this;return this.saveTargetData(e,n).next(function(){return r.retrieveMetadata(e).next(function(t){return t.targetCount+=1,r.updateMetadataFromTargetData(n,t),r.saveMetadata(e,t)})})},ra.prototype.updateTargetData=function(t,e){return this.saveTargetData(t,e)},ra.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return ia(e).delete(t.targetId)}).next(function(){return n.retrieveMetadata(e)}).next(function(t){return y(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.saveMetadata(e,t)})},ra.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return ia(n).iterate(function(t,e){e=o.serializer.fromDbTarget(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(a++,s.push(o.removeTargetData(n,e)))}).next(function(){return I.waitFor(s)}).next(function(){return a})},ra.prototype.forEachTarget=function(t,n){var r=this;return ia(t).iterate(function(t,e){e=r.serializer.fromDbTarget(e);n(e)})},ra.prototype.retrieveMetadata=function(t){return oa(t.simpleDbTransaction)},ra.prototype.saveMetadata=function(t,e){return Gu.getStore(t,fu.store).put(fu.key,e)},ra.prototype.saveTargetData=function(t,e){return ia(t).put(this.serializer.toDbTarget(e))},ra.prototype.updateMetadataFromTargetData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),e.highestListenSequenceNumber<t.sequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},ra.prototype.getTargetCount=function(t){return this.retrieveMetadata(t).next(function(t){return t.targetCount})},ra.prototype.getTargetData=function(t,r){var i=this,e=r.canonicalId(),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),o=null;return ia(t).iterate({range:e,index:uu.queryTargetsIndexName},function(t,e,n){e=i.serializer.fromDbTarget(e);r.isEqual(e.target)&&(o=e,n.done())}).next(function(){return o})},ra.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],a=sa(n);return t.forEach(function(t){var e=so(t.path);o.push(a.put(new hu(r,e))),o.push(i.referenceDelegate.addReference(n,t))}),I.waitFor(o)},ra.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=sa(n);return I.forEach(t,function(t){var e=so(t.path);return I.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,t)])})},ra.prototype.removeMatchingKeysForTargetId=function(t,e){t=sa(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},ra.prototype.getMatchingKeysForTargetId=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=sa(t),r=E();return t.iterate({range:e,keysOnly:!0},function(t,e,n){t=co(t[1]),t=new w(t);r=r.add(t)}).next(function(){return r})},ra.prototype.containsKey=function(t,e){var e=so(e.path),e=IDBKeyRange.bound([e],[Ri(e)],!1,!0),r=0;return sa(t).iterate({index:hu.documentTargetsIndex,keysOnly:!0,range:e},function(t,e,n){0!==t[0]&&(r++,n.done())}).next(function(){return 0<r})},ra.prototype.getTargetDataForTarget=function(t,e){var n=this;return ia(t).get(e).next(function(t){return t?n.serializer.fromDbTarget(t):null})};var na=ra;function ra(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=ta.forTargetCache()}function ia(t){return Gu.getStore(t,uu.store)}function oa(t){return Oo.getStore(t,fu.store).get(fu.key).next(function(t){return y(null!==t,"Missing metadata row."),t})}function aa(t){return oa(t).next(function(t){return t.highestListenSequenceNumber})}function sa(t){return Gu.getStore(t,hu.store)}ca.fromSet=function(t){return new ca(t)},ca.fromArray=function(t){var e=new S(Hi.comparator);return t.forEach(function(t){return e=e.add(t)}),new ca(e)},ca.prototype.covers=function(e){var n=!1;return this.fields.forEach(function(t){t.isPrefixOf(e)&&(n=!0)}),n},ca.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)};var ua=ca;function ca(t){this.fields=t}la.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)};var ha=la;function la(t,e){this.field=t,this.transform=e}function fa(t,e){this.version=t,this.transformResults=e}pa={Set:0,0:"Set",Patch:1,1:"Patch",Transform:2,2:"Transform",Delete:3,3:"Delete"};ma.exists=function(t){return new ma(void 0,t)},ma.updateTime=function(t){return new ma(t)},Object.defineProperty(ma.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),ma.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof C&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof C:(y(this.isNone,"Precondition should be empty"),!0)},ma.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},ma.NONE=new ma;var pa,da=ma;function ma(t,e){this.updateTime=t,this.exists=e,y(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}ga.prototype.verifyKeyMatches=function(t){null!=t&&y(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},ga.getPostMutationVersion=function(t){return t instanceof C?t.version:T.MIN};var ya=ga;function ga(){}t(wa,va=ya),wa.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by SetMutation."),new C(this.key,e.version,{hasCommittedMutations:!0},this.value)},wa.prototype.applyToLocalView=function(t,e,n){var r;return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(r=ya.getPostMutationVersion(t),new C(this.key,r,{hasLocalMutations:!0},this.value)):t},wa.prototype.extractBaseValue=function(t){return null},wa.prototype.isEqual=function(t){return t instanceof wa&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)};var va,ba=wa;function wa(t,e,n){var r=va.call(this)||this;return r.key=t,r.value=e,r.precondition=n,r.type=pa.Set,r}t(Ea,Ta=ya),Ea.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by PatchMutation."),this.precondition.isValidFor(t)?(t=this.patchDocument(t),new C(this.key,e.version,{hasCommittedMutations:!0},t)):new Ns(this.key,e.version)},Ea.prototype.applyToLocalView=function(t,e,n){var r,i;return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(r=ya.getPostMutationVersion(t),i=this.patchDocument(t),new C(this.key,r,{hasLocalMutations:!0},i)):t},Ea.prototype.extractBaseValue=function(t){return null},Ea.prototype.isEqual=function(t){return t instanceof Ea&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},Ea.prototype.patchDocument=function(t){t=t instanceof C?t.data():ys.EMPTY;return this.patchObject(t)},Ea.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(t){var e;t.isEmpty()||(e=r.data.field(t),n=null!==e?n.set(t,e):n.delete(t))}),n};var Ta,Sa=Ea;function Ea(t,e,n,r){var i=Ta.call(this)||this;return i.key=t,i.data=e,i.fieldMask=n,i.precondition=r,i.type=pa.Patch,i}t(Da,Ia=ya),Da.prototype.applyToRemoteDocument=function(t,e){var n,r;return this.verifyKeyMatches(t),y(null!=e.transformResults,"Transform results missing for TransformMutation."),this.precondition.isValidFor(t)?(r=this.requireDocument(t),t=this.serverTransformResults(t,e.transformResults),n=e.version,r=this.transformObject(r.data(),t),new C(this.key,n,{hasCommittedMutations:!0},r)):new Ns(this.key,e.version)},Da.prototype.applyToLocalView=function(t,e,n){var r;return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(r=this.requireDocument(t),n=this.localTransformResults(n,t,e),e=this.transformObject(r.data(),n),new C(this.key,r.version,{hasLocalMutations:!0},e)):t},Da.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof C?t.field(i.field):void 0,o=i.transform.computeBaseValue(o||null);null!=o&&(e=(null==e?ys.EMPTY:e).set(i.field,o))}return e},Da.prototype.isEqual=function(t){return t instanceof Da&&this.key.isEqual(t.key)&&ki(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},Da.prototype.requireDocument=function(t){return y(t instanceof C,"Unknown MaybeDocument type "+t),y(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Da.prototype.serverTransformResults=function(t,e){var n=[];y(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof C&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},Da.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;null===(u=e instanceof C?e.field(a.field):u)&&n instanceof C&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,t))}return r},Da.prototype.transformObject=function(t,e){y(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t};var Ia,Ca=Da;function Da(t,e){var n=Ia.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=pa.Transform,n.precondition=da.exists(!0),n}t(_a,Na=ya),_a.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),y(null==e.transformResults,"Transform results received by DeleteMutation."),new Is(this.key,e.version,{hasCommittedMutations:!0})},_a.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&y(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Is(this.key,T.forDeletedDoc())):t},_a.prototype.extractBaseValue=function(t){return null},_a.prototype.isEqual=function(t){return t instanceof _a&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)};var Na,Aa,ka,Ra=_a;function _a(t,e){var n=Na.call(this)||this;return n.key=t,n.precondition=e,n.type=pa.Delete,n}Aa={NullValue:0,0:"NullValue",BooleanValue:1,1:"BooleanValue",NumberValue:2,2:"NumberValue",TimestampValue:3,3:"TimestampValue",StringValue:4,4:"StringValue",BlobValue:5,5:"BlobValue",RefValue:6,6:"RefValue",GeoPointValue:7,7:"GeoPointValue",ArrayValue:8,8:"ArrayValue",ObjectValue:9,9:"ObjectValue"},ka={Default:0,0:"Default",Estimate:1,1:"Estimate",Previous:2,2:"Previous"};La.fromSnapshotOptions=function(t,e){switch(t.serverTimestamps){case"estimate":return new La(ka.Estimate,e);case"previous":return new La(ka.Previous,e);case"none":case void 0:return new La(ka.Default,e);default:return l("fromSnapshotOptions() called with invalid options.")}};var Ma=La;function La(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}Oa.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},Oa.prototype.defaultCompareTo=function(t){return y(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),b(this.typeOrder,t.typeOrder)};n=Oa;function Oa(){}t(Fa,Pa=n),Fa.prototype.value=function(t){return null},Fa.prototype.isEqual=function(t){return t instanceof Fa},Fa.prototype.compareTo=function(t){return t instanceof Fa?0:this.defaultCompareTo(t)},Fa.INSTANCE=new Fa;var Pa,xa=Fa;function Fa(){var t=Pa.call(this)||this;return t.typeOrder=Aa.NullValue,t.internalValue=null,t}t(Ba,qa=n),Ba.prototype.value=function(t){return this.internalValue},Ba.prototype.isEqual=function(t){return t instanceof Ba&&this.internalValue===t.internalValue},Ba.prototype.compareTo=function(t){return t instanceof Ba?b(this,t):this.defaultCompareTo(t)},Ba.of=function(t){return t?Ba.TRUE:Ba.FALSE},Ba.TRUE=new Ba(!0),Ba.FALSE=new Ba(!1);var qa,Va=Ba;function Ba(t){var e=qa.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.BooleanValue,e}t(Qa,Ua=n),Qa.prototype.value=function(t){return this.internalValue},Qa.prototype.compareTo=function(t){return t instanceof Qa?(e=this.internalValue,n=t.internalValue,e<n?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1):this.defaultCompareTo(t);var e,n};var Ua,Ka=Qa;function Qa(t){var e=Ua.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.NumberValue,e}function ja(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}t(za,Ga=Ka),za.prototype.isEqual=function(t){return t instanceof za&&ja(this.internalValue,t.internalValue)};var Ga,Wa=za;function za(){return null!==Ga&&Ga.apply(this,arguments)||this}t(Ja,Ha=Ka),Ja.prototype.isEqual=function(t){return t instanceof Ja&&ja(this.internalValue,t.internalValue)},Ja.NAN=new Ja(NaN),Ja.POSITIVE_INFINITY=new Ja(1/0),Ja.NEGATIVE_INFINITY=new Ja(-1/0);var Ha,Ya=Ja;function Ja(){return null!==Ha&&Ha.apply(this,arguments)||this}t($a,Xa=n),$a.prototype.value=function(t){return this.internalValue},$a.prototype.isEqual=function(t){return t instanceof $a&&this.internalValue===t.internalValue},$a.prototype.compareTo=function(t){return t instanceof $a?b(this.internalValue,t.internalValue):this.defaultCompareTo(t)};var Xa,Za=$a;function $a(t){var e=Xa.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.StringValue,e}t(ns,ts=n),ns.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},ns.prototype.isEqual=function(t){return t instanceof ns&&this.internalValue.isEqual(t.internalValue)},ns.prototype.compareTo=function(t){return t instanceof ns?this.internalValue._compareTo(t.internalValue):t instanceof is?-1:this.defaultCompareTo(t)};var ts,es=ns;function ns(t){var e=ts.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.TimestampValue,e}t(os,rs=n),os.prototype.value=function(t){return t&&t.serverTimestampBehavior===ka.Estimate?new es(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===ka.Previous&&this.previousValue?this.previousValue.value(t):null},os.prototype.isEqual=function(t){return t instanceof os&&this.localWriteTime.isEqual(t.localWriteTime)},os.prototype.compareTo=function(t){return t instanceof os?this.localWriteTime._compareTo(t.localWriteTime):t instanceof es?1:this.defaultCompareTo(t)},os.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"};var rs,is=os;function os(t,e){var n=rs.call(this)||this;return n.localWriteTime=t,n.previousValue=e,n.typeOrder=Aa.TimestampValue,n}t(us,as=n),us.prototype.value=function(t){return this.internalValue},us.prototype.isEqual=function(t){return t instanceof us&&this.internalValue.isEqual(t.internalValue)},us.prototype.compareTo=function(t){return t instanceof us?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)};var as,ss=us;function us(t){var e=as.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.BlobValue,e}t(ls,cs=n),ls.prototype.value=function(t){return this.key},ls.prototype.isEqual=function(t){return t instanceof ls&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},ls.prototype.compareTo=function(t){var e;return t instanceof ls?0!==(e=this.databaseId.compareTo(t.databaseId))?e:w.comparator(this.key,t.key):this.defaultCompareTo(t)};var cs,hs=ls;function ls(t,e){var n=cs.call(this)||this;return n.databaseId=t,n.key=e,n.typeOrder=Aa.RefValue,n}t(ds,fs=n),ds.prototype.value=function(t){return this.internalValue},ds.prototype.isEqual=function(t){return t instanceof ds&&this.internalValue.isEqual(t.internalValue)},ds.prototype.compareTo=function(t){return t instanceof ds?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)};var fs,ps=ds;function ds(t){var e=fs.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.GeoPointValue,e}t(a,ms=n),a.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(t,e){r[t]=e.value(n)}),r},a.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},a.prototype.isEqual=function(t){if(t instanceof a){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.hasNext()&&!n.hasNext()}return!1},a.prototype.compareTo=function(t){if(t instanceof a){for(var e=this.internalValue.getIterator(),n=t.internalValue.getIterator();e.hasNext()&&n.hasNext();){var r=e.getNext(),i=n.getNext(),r=b(r.key,i.key)||r.value.compareTo(i.value);if(r)return r}return b(e.hasNext(),n.hasNext())}return this.defaultCompareTo(t)},a.prototype.set=function(t,e){var n;return y(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length?this.setChild(t.firstSegment(),e):(n=(n=(n=this.child(t.firstSegment()))instanceof a?n:a.EMPTY).set(t.popFirst(),e),this.setChild(t.firstSegment(),n))},a.prototype.delete=function(t){var e;return y(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length?new a(this.internalValue.remove(t.firstSegment())):(e=this.child(t.firstSegment()))instanceof a?(e=e.delete(t.popFirst()),new a(this.internalValue.insert(t.firstSegment(),e))):this},a.prototype.contains=function(t){return null!==this.field(t)},a.prototype.field=function(t){y(!t.isEmpty(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof a?e.internalValue.get(t):null}),e},a.prototype.fieldMask=function(){var r=new S(Hi.comparator);return this.internalValue.forEach(function(t,e){var n=new Hi([t]);!(e instanceof a)||(t=e.fieldMask().fields).isEmpty()?r=r.add(n):t.forEach(function(t){r=r.add(n.child(t))})}),ua.fromSet(r)},a.prototype.toString=function(){return this.internalValue.toString()},a.prototype.child=function(t){return this.internalValue.get(t)||void 0},a.prototype.setChild=function(t,e){return new a(this.internalValue.insert(t,e))},a.EMPTY=new a(new po(b));var ms,ys=a;function a(t){var e=ms.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.ObjectValue,e}t(bs,gs=n),bs.prototype.value=function(e){return this.internalValue.map(function(t){return t.value(e)})},bs.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},bs.prototype.forEach=function(t){this.internalValue.forEach(t)},bs.prototype.isEqual=function(t){if(t instanceof bs){if(this.internalValue.length!==t.internalValue.length)return!1;for(var e=0;e<this.internalValue.length;e++)if(!this.internalValue[e].isEqual(t.internalValue[e]))return!1;return!0}return!1},bs.prototype.compareTo=function(t){if(t instanceof bs){for(var e=Math.min(this.internalValue.length,t.internalValue.length),n=0;n<e;n++){var r=this.internalValue[n].compareTo(t.internalValue[n]);if(r)return r}return b(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},bs.prototype.toString=function(){return"["+this.internalValue.map(function(t){return t.toString()}).join(",")+"]"};var gs,vs=bs;function bs(t){var e=gs.call(this)||this;return e.internalValue=t,e.typeOrder=Aa.ArrayValue,e}ws.compareByKey=function(t,e){return w.comparator(t.key,e.key)};Q=ws;function ws(t,e){this.key=t,this.version=e}t(Ss,Ts=Q),Ss.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);return void 0===n&&(n=void 0===(t=this.getProtoField(t))?null:this.converter(t),this.fieldValueCache.set(e,n)),n},Ss.prototype.data=function(){var n,r=this;return this.objectValue||(n=ys.EMPTY,ui(this.proto.fields||{},function(t,e){n=n.set(new Hi([t]),r.converter(e))}),this.objectValue=n,this.fieldValueCache=void 0),this.objectValue},Ss.prototype.value=function(){return this.data().value()},Ss.prototype.isEqual=function(t){return t instanceof Ss&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Ss.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Ss.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Ss.prototype.getProtoField=function(t){y(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Ss.compareByField=function(t,e,n){e=e.field(t),n=n.field(t);return null!==e&&null!==n?e.compareTo(n):l("Trying to compare documents on fields that don't exist")};var Ts,C=Ss;function Ss(t,e,n,r,i,o){t=Ts.call(this,t,e)||this;return t.objectValue=r,t.proto=i,t.converter=o,y(void 0!==t.objectValue||void 0!==t.proto&&void 0!==t.converter,"If objectValue is not defined, proto and converter need to be set."),t.hasLocalMutations=!!n.hasLocalMutations,t.hasCommittedMutations=!!n.hasCommittedMutations,t}t(Cs,Es=Q),Cs.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Cs.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),Cs.prototype.isEqual=function(t){return t instanceof Cs&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)};var Es,Is=Cs;function Cs(t,e,n){t=Es.call(this,t,e)||this;return t.hasCommittedMutations=!(!n||!n.hasCommittedMutations),t}t(As,Ds=Q),As.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(As.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),As.prototype.isEqual=function(t){return t instanceof As&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)};var Ds,Ns=As;function As(){return null!==Ds&&Ds.apply(this,arguments)||this}Rs.prototype.get=function(t){var e=this.mapKeyFn(t),e=this.inner[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(o.isEqual(t))return i}},Rs.prototype.has=function(t){return void 0!==this.get(t)},Rs.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},Rs.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},Rs.prototype.forEach=function(a){ui(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0];a(o,i[1])}})},Rs.prototype.isEmpty=function(){return ci(this.inner)};var ks=Rs;function Rs(t){this.mapKeyFn=t,this.inner={}}Object.defineProperty(_s.prototype,"readTime",{get:function(){return y(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){y(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),_s.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},_s.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},_s.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?I.resolve(n):this.getFromCache(t,e)},_s.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},_s.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},_s.prototype.assertNotApplied=function(){y(!this.changesApplied,"Changes have already been applied.")};je=_s;function _s(){this.changes=new ks(function(t){return t.toString()}),this.changesApplied=!1}Os.prototype.addEntry=function(t,e,n){return Fs(t).put(qs(e),n)},Os.prototype.removeEntry=function(t,e){t=Fs(t),e=qs(e);return t.delete(e)},Os.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.setMetadata(e,t)})},Os.prototype.getEntry=function(t,e){var n=this;return Fs(t).get(qs(e)).next(function(t){return n.maybeDecodeDocument(t)})},Os.prototype.getSizedEntry=function(t,e){var n=this;return Fs(t).get(qs(e)).next(function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Vs(t)}:null})},Os.prototype.getEntries=function(t,e){var n=this,r=Eo;return this.forEachDbEntry(t,e,function(t,e){e=n.maybeDecodeDocument(e);r=r.insert(t,e)}).next(function(){return r})},Os.prototype.getSizedEntries=function(t,e){var r=this,i=Eo,o=new po(w.comparator);return this.forEachDbEntry(t,e,function(t,e){var n=r.maybeDecodeDocument(e);o=n?(i=i.insert(t,n),o.insert(t,Vs(e))):(i=i.insert(t,null),o.insert(t,0))}).next(function(){return{maybeDocuments:i,sizeMap:o}})},Os.prototype.forEachDbEntry=function(t,e,i){var n,o,a;return e.isEmpty()?I.resolve():(n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),a=o.getNext(),Fs(t).iterate({range:n},function(t,e,n){for(var r=w.fromSegments(t);a&&w.comparator(a,r)<0;)i(a,null),a=o.getNext();a&&a.isEqual(r)&&(i(a,e),a=o.hasNext()?o.getNext():null),a?n.skip(a.path.toArray()):n.done()}).next(function(){for(;a;)i(a,null),a=o.hasNext()?o.getNext():null}))},Os.prototype.getDocumentsMatchingQuery=function(t,r,e){var n,i=this,o=(y(!r.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView"),Io),a=r.path.length+1,s={};return e.isEqual(T.MIN)?(n=r.path.toArray(),s.range=IDBKeyRange.lowerBound(n)):(n=r.path.toArray(),e=this.serializer.toDbTimestampKey(e),s.range=IDBKeyRange.lowerBound([n,e],!0),s.index=iu.collectionReadTimeIndex),Fs(t).iterate(s,function(t,e,n){t.length===a&&(t=i.serializer.fromDbRemoteDocument(e),r.path.isPrefixOf(t.key.path)?t instanceof C&&r.matches(t)&&(o=o.insert(t.key,t)):n.done())}).next(function(){return o})},Os.prototype.getNewDocumentChanges=function(t,e){var r=this,i=Eo,o=this.serializer.toDbTimestampKey(e),e=Fs(t),t=IDBKeyRange.lowerBound(o,!0);return e.iterate({index:iu.readTimeIndex,range:t},function(t,e){var n=r.serializer.fromDbRemoteDocument(e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{changedDocs:i,readTime:r.serializer.fromDbTimestampKey(o)}})},Os.prototype.getLastDocumentChange=function(t){var r,i=this,t=Fs(t),o=T.MIN;return t.iterate({index:iu.readTimeIndex,reverse:!0},function(t,e,n){r=i.serializer.fromDbRemoteDocument(e),e.readTime&&(o=i.serializer.fromDbTimestampKey(e.readTime)),n.done()}).next(function(){return{changedDoc:r,readTime:o}})},Os.prototype.newChangeBuffer=function(t){return new Os.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},Os.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Os.prototype.getMetadata=function(t){return xs(t).get(au.key).next(function(t){return y(!!t,"Missing document cache metadata"),t})},Os.prototype.setMetadata=function(t,e){return xs(t).put(au.key,e)},Os.prototype.maybeDecodeDocument=function(t){return!t||(t=this.serializer.fromDbRemoteDocument(t))instanceof Is&&t.version.isEqual(T.forDeletedDoc())?null:t},Os.RemoteDocumentChangeBuffer=(t(Ps,Ms=je),Ps.prototype.applyChanges=function(i){var o=this,a=[],s=0,u=new S(function(t,e){return b(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(t,e){var n,r=o.documentSizes.get(t);y(void 0!==r,"Cannot modify a document that wasn't read (for "+t+")"),e?(y(!o.readTime.isEqual(T.MIN),"Cannot add a document with a read time of zero"),e=o.documentCache.serializer.toDbRemoteDocument(e,o.readTime),u=u.add(t.path.popLast()),n=Vs(e),s+=n-r,a.push(o.documentCache.addEntry(i,t,e))):(s-=r,o.trackRemovals?(n=o.documentCache.serializer.toDbRemoteDocument(new Is(t,T.forDeletedDoc()),o.readTime),a.push(o.documentCache.addEntry(i,t,n))):a.push(o.documentCache.removeEntry(i,t)))}),u.forEach(function(t){a.push(o.documentCache.indexManager.addToCollectionParentIndex(i,t))}),a.push(this.documentCache.updateMetadata(i,s)),I.waitFor(a)},Ps.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next(function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)})},Ps.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next(function(t){var e=t.maybeDocuments;return t.sizeMap.forEach(function(t,e){n.documentSizes.set(t,e)}),e})},Ps);var Ms,Ls=Os;function Os(t,e){this.serializer=t,this.indexManager=e}function Ps(t,e){var n=Ms.call(this)||this;return n.documentCache=t,n.trackRemovals=e,n.documentSizes=new ks(function(t){return t.toString()}),n}function xs(t){return Gu.getStore(t,au.store)}function Fs(t){return Gu.getStore(t,iu.store)}function qs(t){return t.path.toArray()}function Vs(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw l("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}Us.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),I.resolve()},Us.prototype.getCollectionParents=function(t,e){return I.resolve(this.collectionParentIndex.getEntries(e))};var Bs=Us;function Us(){this.collectionParentIndex=new Ks}Qs.prototype.add=function(t){y(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),t=t.popLast(),n=this.index[e]||new S(ji.comparator),r=!n.has(t);return this.index[e]=n.add(t),r},Qs.prototype.has=function(t){var e=t.lastSegment(),t=t.popLast(),e=this.index[e];return e&&e.has(t)},Qs.prototype.getEntries=function(t){return(this.index[t]||new S(ji.comparator)).toArray()};var Ks=Qs;function Qs(){this.index={}}var js=9,Gs=(Ws.prototype.createOrUpgrade=function(e,n,t,r){var i,o=this,a=(y(t<r&&0<=t&&r<=js,"Unexpected schema upgrade from v"+t+" to v{toVersion}."),new qo(n)),s=(t<1&&1<=r&&(e.createObjectStore(Hs.store),(s=e).createObjectStore(Js.store,{keyPath:Js.keyPath}),s.createObjectStore(Zs.store,{keyPath:Zs.keyPath,autoIncrement:!0}).createIndex(Zs.userMutationsIndex,Zs.userMutationsKeyPath,{unique:!0}),s.createObjectStore(tu.store),yu(e),e.createObjectStore(iu.store)),I.resolve());return t<3&&3<=r&&(0!==t&&((i=e).deleteObjectStore(hu.store),i.deleteObjectStore(uu.store),i.deleteObjectStore(fu.store),yu(e)),s=s.next(function(){return t=a.store(fu.store),e=new fu(0,0,T.MIN.toTimestamp(),0),t.put(fu.key,e);var t,e})),t<4&&4<=r&&(s=(s=0!==t?s.next(function(){return n=e,(r=a).store(Zs.store).loadAll().next(function(t){n.deleteObjectStore(Zs.store),n.createObjectStore(Zs.store,{keyPath:Zs.keyPath,autoIncrement:!0}).createIndex(Zs.userMutationsIndex,Zs.userMutationsKeyPath,{unique:!0});var e=r.store(Zs.store),t=t.map(function(t){return e.put(t)});return I.waitFor(t)});var n,r}):s).next(function(){e.createObjectStore(gu.store,{keyPath:gu.keyPath})})),t<5&&5<=r&&(s=s.next(function(){return o.removeAcknowledgedMutations(a)})),t<6&&6<=r&&(s=s.next(function(){return e.createObjectStore(au.store),o.addDocumentGlobal(a)})),t<7&&7<=r&&(s=s.next(function(){return o.ensureSequenceNumbers(a)})),t<8&&8<=r&&(s=s.next(function(){return o.createCollectionParentIndex(e,a)})),s=t<9&&9<=r?s.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(iu.store)).createIndex(iu.readTimeIndex,iu.readTimeIndexPath,{unique:!1}),t.createIndex(iu.collectionReadTimeIndex,iu.collectionReadTimeIndexPath,{unique:!1})}):s},Ws.prototype.addDocumentGlobal=function(e){var n=0;return e.store(iu.store).iterate(function(t,e){n+=Vs(e)}).next(function(){var t=new au(n);return e.store(au.store).put(au.key,t)})},Ws.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(Js.store),i=n.store(Zs.store);return t.loadAll().next(function(t){return I.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.loadAll(Zs.userMutationsIndex,t).next(function(t){return I.forEach(t,function(t){y(t.userId===e.userId,"Cannot process batch "+t.batchId+" from unexpected user");t=r.serializer.fromDbMutationBatch(t);return Yo(n,e.userId,t).next(function(){})})})})})},Ws.prototype.ensureSequenceNumbers=function(t){var o=t.store(hu.store),e=t.store(iu.store);return aa(t).next(function(r){var i=[];return e.iterate(function(t,e){var n=new ji(t),t=[0,so(n)];i.push(o.get(t).next(function(t){return t?I.resolve():o.put(new hu(0,so(n),r))}))}).next(function(){return I.waitFor(i)})})},Ws.prototype.createCollectionParentIndex=function(t,e){function n(t){var e;if(i.add(t))return e=t.lastSegment(),t=t.popLast(),r.put({collectionId:e,parent:so(t)})}t.createObjectStore(du.store,{keyPath:du.keyPath});var r=e.store(du.store),i=new Ks;return e.store(iu.store).iterate({keysOnly:!0},function(t,e){return n(new ji(t).popLast())}).next(function(){return e.store(tu.store).iterate({keysOnly:!0},function(t,e){return t[0],n(co(t[1]).popLast())})})},Ws);function Ws(t){this.serializer=t}function zs(t,e){this.seconds=t,this.nanoseconds=e}Ys.store="owner",Ys.key="owner";var Hs=Ys;function Ys(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}Xs.store="mutationQueues",Xs.keyPath="userId";var Js=Xs;function Xs(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}$s.store="mutations",$s.keyPath="batchId",$s.userMutationsIndex="userMutationsIndex",$s.userMutationsKeyPath=["userId","batchId"];var Zs=$s;function $s(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}eu.prefixForUser=function(t){return[t]},eu.prefixForPath=function(t,e){return[t,so(e)]},eu.key=function(t,e,n){return[t,so(e),n]},eu.store="documentMutations",eu.PLACEHOLDER=new eu;var tu=eu;function eu(){}function nu(t,e){this.path=t,this.readTime=e}function ru(t,e){this.path=t,this.version=e}ou.store="remoteDocuments",ou.readTimeIndex="readTimeIndex",ou.readTimeIndexPath="readTime",ou.collectionReadTimeIndex="collectionReadTimeIndex",ou.collectionReadTimeIndexPath=["parentPath","readTime"];var iu=ou;function ou(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}su.store="remoteDocumentGlobal",su.key="remoteDocumentGlobalKey";var au=su;function su(t){this.byteSize=t}cu.store="targets",cu.keyPath="targetId",cu.queryTargetsIndexName="queryTargetsIndex",cu.queryTargetsKeyPath=["canonicalId","targetId"];var uu=cu;function cu(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}lu.store="targetDocuments",lu.keyPath=["targetId","path"],lu.documentTargetsIndex="documentTargetsIndex",lu.documentTargetsKeyPath=["path","targetId"];var hu=lu;function lu(t,e,n){this.targetId=t,this.path=e,y(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}pu.key="targetGlobalKey",pu.store="targetGlobal";var fu=pu;function pu(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}mu.store="collectionParents",mu.keyPath=["collectionId","parent"];var du=mu;function mu(t,e){this.collectionId=t,this.parent=e}function yu(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}).createIndex(hu.documentTargetsIndex,hu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(uu.store,{keyPath:uu.keyPath}).createIndex(uu.queryTargetsIndexName,uu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(fu.store)}vu.store="clientMetadata",vu.keyPath="clientId";var gu=vu;function vu(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var bu,wu=V(V(V([Js.store,Zs.store,tu.store,iu.store,uu.store,Hs.store,fu.store,hu.store],[gu.store]),[au.store]),[du.store]),Tu=(Su.prototype.addToCollectionParentIndex=function(t,e){var n,r,i=this;return y(e.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(e)?I.resolve():(r=e.lastSegment(),n=e.popLast(),t.addOnCommittedListener(function(){i.collectionParentsCache.add(e)}),r={collectionId:r,parent:so(n)},Eu(t).put(r))},Su.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Ri(i),""],!1,!0);return Eu(t).loadAll(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(co(r.parent))}return o})},Su);function Su(){this.collectionParentsCache=new Ks}function Eu(t){return Gu.getStore(t,du.store)}bu={Listen:0,0:"Listen",ExistenceFilterMismatch:1,1:"ExistenceFilterMismatch",LimboResolution:2,2:"LimboResolution"};Cu.prototype.withSequenceNumber=function(t){return new Cu(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Cu.prototype.withResumeToken=function(t,e){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Cu.prototype.withLastLimboFreeSnapshotVersion=function(t){return new Cu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},Cu.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.target.isEqual(t.target)};var Iu=Cu;function Cu(t,e,n,r,i,o,a){void 0===i&&(i=T.MIN),void 0===o&&(o=T.MIN),void 0===a&&(a=ei()),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}Nu.prototype.fromDbRemoteDocument=function(t){var e,n;return t.document?this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations):t.noDocument?(e=w.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime),new Is(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})):t.unknownDocument?(e=w.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new Ns(e,n)):l("Unexpected DbRemoteDocument")},Nu.prototype.toDbRemoteDocument=function(t,e){var n,r,i,e=this.toDbTimestampKey(e),o=t.key.path.popLast().toArray();return t instanceof C?(n=t.proto||this.remoteSerializer.toDocument(t),new iu(null,null,n,n=t.hasCommittedMutations,e,o)):t instanceof Is?(r=t.key.path.toArray(),i=this.toDbTimestamp(t.version),n=t.hasCommittedMutations,new iu(null,new nu(r,i),null,n,e,o)):t instanceof Ns?(r=t.key.path.toArray(),i=this.toDbTimestamp(t.version),new iu(new ru(r,i),null,null,!0,e,o)):l("Unexpected MaybeDocument")},Nu.prototype.toDbTimestampKey=function(t){t=t.toTimestamp();return[t.seconds,t.nanoseconds]},Nu.prototype.fromDbTimestampKey=function(t){t=new ho(t[0],t[1]);return T.fromTimestamp(t)},Nu.prototype.toDbTimestamp=function(t){t=t.toTimestamp();return new zs(t.seconds,t.nanoseconds)},Nu.prototype.fromDbTimestamp=function(t){t=new ho(t.seconds,t.nanoseconds);return T.fromTimestamp(t)},Nu.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.remoteSerializer.toMutation(t)}),i=e.mutations.map(function(t){return n.remoteSerializer.toMutation(t)});return new Zs(t,e.batchId,e.localWriteTime.toMillis(),r,i)},Nu.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.remoteSerializer.fromMutation(t)}),r=t.mutations.map(function(t){return e.remoteSerializer.fromMutation(t)}),i=ho.fromMillis(t.localWriteTimeMs);return new Ao(t.batchId,i,n,r)},Nu.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach(function(t){e.push(so(t.path))}),e},Nu.prototype.fromDbResourcePaths=function(t){for(var e=E(),n=0,r=t;n<r.length;n++)var i=r[n],e=e.add(new w(co(i)));return e},Nu.prototype.fromDbTarget=function(t){var e=this.fromDbTimestamp(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):T.MIN,r=t.resumeToken,i=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query);return new Iu(i,t.targetId,bu.Listen,t.lastListenSequenceNumber,e,n,r)},Nu.prototype.toDbTarget=function(t){y(bu.Listen===t.purpose,"Only queries with purpose "+bu.Listen+" may be stored, got "+t.purpose);var e=this.toDbTimestamp(t.snapshotVersion),n=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion),r=t.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.target):this.remoteSerializer.toQueryTarget(t.target),i=t.resumeToken instanceof Uint8Array?(y(Oo.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),t.resumeToken.toString()):t.resumeToken;return new uu(t.targetId,t.target.canonicalId(),e,i,t.sequenceNumber,n,r)};var Du=Nu;function Nu(t){this.remoteSerializer=t}function Au(t,e){var n=b(t[0],e[0]);return 0===n?b(t[1],e[1]):n}Ru.prototype.nextIndex=function(){return++this.previousIndex},Ru.prototype.addElement=function(t){var e,t=[t,this.nextIndex()];this.buffer.size<this.maxElements?this.buffer=this.buffer.add(t):Au(t,e=this.buffer.last())<0&&(this.buffer=this.buffer.delete(e).add(t))},Object.defineProperty(Ru.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0});var ku=Ru;function Ru(t){this.maxElements=t,this.buffer=new S(Au),this.previousIndex=0}var _u={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mu=(Lu.withCacheSize=function(t){return new Lu(t,Lu.DEFAULT_COLLECTION_PERCENTILE,Lu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},Lu.COLLECTION_DISABLED=-1,Lu.MINIMUM_CACHE_SIZE_BYTES=1048576,Lu.DEFAULT=new Lu(Lu.DEFAULT_CACHE_SIZE_BYTES=41943040,Lu.DEFAULT_COLLECTION_PERCENTILE=10,Lu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),Lu.DISABLED=new Lu(Lu.COLLECTION_DISABLED,0,0),Lu);function Lu(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}Pu.prototype.start=function(){y(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Mu.COLLECTION_DISABLED&&this.scheduleGC()},Pu.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(Pu.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),Pu.prototype.scheduleGC=function(){var t=this,e=(y(null===this.gcTask,"Cannot schedule GC while a task is pending"),this.hasRun?3e5:6e4);f("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Zi.LruGarbageCollection,e,function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then(function(){return t.scheduleGC()}).catch(Wu)})};var Ou=Pu;function Pu(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}Fu.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next(function(t){return Math.floor(e/100*t)})},Fu.prototype.nthSequenceNumber=function(t,e){var n,r=this;return 0===e?I.resolve(Vi.INVALID):(n=new ku(e),this.delegate.forEachTarget(t,function(t){return n.addElement(t.sequenceNumber)}).next(function(){return r.delegate.forEachOrphanedDocumentSequenceNumber(t,function(t){return n.addElement(t)})}).next(function(){return n.maxValue}))},Fu.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},Fu.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},Fu.prototype.collect=function(e,n){var r=this;return this.params.cacheSizeCollectionThreshold===Mu.COLLECTION_DISABLED?(f("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(_u)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),_u):r.runGarbageCollection(e,n)})},Fu.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},Fu.prototype.runGarbageCollection=function(e,n){var r,i,o,a,s,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,a=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,s=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),Yr()<=Ur.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-l)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),I.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})};var xu=Fu;function Fu(t,e){this.delegate=t,this.params=e}qu.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},qu.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})};Ge=qu;function qu(){this.onCommittedListeners=[]}var Vu,Bu="IndexedDbPersistence",Uu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ku="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Qu=(t(ju,Vu=Ge),ju);function ju(t,e){var n=Vu.call(this)||this;return n.simpleDbTransaction=t,n.currentSequenceNumber=e,n}u.getStore=function(t,e){if(t instanceof Qu)return Oo.getStore(t.simpleDbTransaction,e);throw l("IndexedDbPersistence must use instances of IndexedDbTransaction")},u.createIndexedDbPersistence=function(n){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(u.isAvailable())return[4,(e=new u(n.allowTabSynchronization,n.persistenceKey,n.clientId,n.platform,n.lruParams,n.queue,n.serializer,n.sequenceNumberSyncer)).start()];throw new g(p.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");case 1:return t.sent(),[2,e]}})})},u.prototype.start=function(){var e=this;return y(!this.started,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),Oo.openOrCreate(this.dbName,js,new Gs(this.serializer)).then(function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()}).then(function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[fu.store],aa)}).then(function(t){e.listenSequence=new Vi(t,e.sequenceNumberSyncer)}).then(function(){e._started=!0}).catch(function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)})},u.prototype.setPrimaryStateListener=function(n){var t=this;return this.primaryStateListener=function(e){return d(t,void 0,void 0,function(){return m(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},u.prototype.setDatabaseDeletedListener=function(n){var t=this;this.simpleDb.setVersionChangeListener(function(e){return d(t,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return null!==e.newVersion?[3,2]:[4,n()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},u.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(function(){return d(e,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},u.prototype.updateClientMetadataAndTryBecomePrimary=function(){var n=this;return this.simpleDb.runTransaction("readwrite-idempotent",wu,function(e){return Hu(e).put(new gu(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.verifyPrimaryLease(e).next(function(t){t||(n.isPrimary=!1,n.queue.enqueueAndForget(function(){return n.primaryStateListener(!1)}))})}).next(function(){return n.canActAsPrimary(e)}).next(function(t){return n.isPrimary&&!t?n.releasePrimaryLeaseIfHeld(e).next(function(){return!1}):!!t&&n.acquireOrExtendPrimaryLease(e).next(function(){return!0})})}).catch(function(t){if(n.allowTabSynchronization)return f(Bu,"Releasing owner lease after error during lease refresh",t),!1;throw t}).then(function(t){n.isPrimary!==t&&n.queue.enqueueAndForget(function(){return n.primaryStateListener(t)}),n.isPrimary=t})},u.prototype.verifyPrimaryLease=function(t){var e=this;return zu(t).get(Hs.key).next(function(t){return I.resolve(e.isLocalClient(t))})},u.prototype.removeClientMetadata=function(t){return Hu(t).delete(this.clientId)},u.prototype.maybeGarbageCollectMultiClientState=function(){return d(this,void 0,void 0,function(){var i=this;return m(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(t){var r=u.getStore(t,gu.store);return r.loadAll().next(function(t){var e=i.filterActiveClients(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return I.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})})]);case 1:t.sent().forEach(function(t){i.window.localStorage.removeItem(i.zombiedClientLocalStorageKey(t.clientId))}),t.label=2;case 2:return[2]}})})},u.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Zi.ClientMetadataRefresh,4e3,function(){return t.updateClientMetadataAndTryBecomePrimary().then(function(){return t.maybeGarbageCollectMultiClientState()}).then(function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},u.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},u.prototype.canActAsPrimary=function(e){var r=this;return zu(e).get(Hs.key).next(function(t){if(null!==t&&r.isWithinAge(t.leaseTimestampMs,5e3)&&!r.isClientZombied(t.ownerId)){if(r.isLocalClient(t)&&r.networkEnabled)return!0;if(!r.isLocalClient(t)){if(t.allowTabSynchronization)return!1;throw new g(p.FAILED_PRECONDITION,Ku)}}return!(!r.networkEnabled||!r.inForeground)||Hu(e).loadAll().next(function(t){return void 0===r.filterActiveClients(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&f(Bu,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},u.prototype.shutdown=function(){return d(this,void 0,void 0,function(){var e=this;return m(this,function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Hs.store,gu.store],function(t){return e.releasePrimaryLeaseIfHeld(t).next(function(){return e.removeClientMetadata(t)})})];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},u.prototype.filterActiveClients=function(t,e){var n=this;return t.filter(function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)})},u.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[gu.store],function(t){return Hu(t).loadAll().next(function(t){return e.filterActiveClients(t,18e5).map(function(t){return t.clientId})})})},u.clearPersistence=function(n){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return u.isAvailable()?(e=n+u.MAIN_DATABASE,[4,Oo.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(u.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),u.prototype.getMutationQueue=function(t){return y(this.started,"Cannot initialize MutationQueue before persistence is started."),Wo.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},u.prototype.getTargetCache=function(){return y(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},u.prototype.getRemoteDocumentCache=function(){return y(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},u.prototype.getIndexManager=function(){return y(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},u.prototype.runTransaction=function(n,t,r){var i=this;f(Bu,"Starting transaction:",n);var o,e=t.endsWith("idempotent"),e=t.startsWith("readonly")?e?"readonly-idempotent":"readonly":e?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(e,wu,function(e){return o=new Qu(e,i.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?i.verifyPrimaryLease(e).next(function(t){return!!t||i.canActAsPrimary(e)}).next(function(t){if(t)return r(o);throw Xr("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new g(p.FAILED_PRECONDITION,Uu)}).next(function(t){return i.acquireOrExtendPrimaryLease(e).next(function(){return t})}):i.verifyAllowTabSynchronization(e).next(function(){return r(o)})}).then(function(t){return o.raiseOnCommittedEvent(),t})},u.prototype.verifyAllowTabSynchronization=function(t){var e=this;return zu(t).get(Hs.key).next(function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new g(p.FAILED_PRECONDITION,Ku)})},u.prototype.acquireOrExtendPrimaryLease=function(t){var e=new Hs(this.clientId,this.allowTabSynchronization,Date.now());return zu(t).put(Hs.key,e)},u.isAvailable=function(){return Oo.isAvailable()},u.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},u.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=zu(t);return n.get(Hs.key).next(function(t){return e.isLocalClient(t)?(f(Bu,"Releasing primary lease."),n.delete(Hs.key)):I.resolve()})},u.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Xr("Detected an update time that is in the future: "+t+" > "+n),1))},u.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},u.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},u.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},u.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},u.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return f(Bu,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Xr(Bu,"Failed to get zombied client id.",t),!1}},u.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){Xr("Failed to set zombie client id.",t)}},u.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},u.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},u.MAIN_DATABASE="main";var Gu=u;function u(t,e,n,r,i,o,a,s){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new Yu(this,i),this.dbName=e+u.MAIN_DATABASE,this.serializer=new Du(a),this.document=r.document,this.targetCache=new na(this.referenceDelegate,this.serializer),this.indexManager=new Tu,this.remoteDocumentCache=new Ls(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new g(p.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function Wu(e){return d(this,void 0,void 0,function(){return m(this,function(t){if(e.code!==p.FAILED_PRECONDITION||e.message!==Uu)throw e;return f(Bu,"Unexpectedly lost primary lease"),[2]})})}function zu(t){return t.store(Hs.store)}function Hu(t){return t.store(gu.store)}Ju.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocmentCount(t);return this.db.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},Ju.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},Ju.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},Ju.prototype.forEachOrphanedDocumentSequenceNumber=function(t,n){return this.forEachOrphanedDocument(t,function(t,e){return n(e)})},Ju.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},Ju.prototype.addReference=Xu,Ju.prototype.removeReference=Xu,Ju.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},Ju.prototype.removeMutationReference=Xu,Ju.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?I.resolve(!0):(r=e,i=!1,$o(n=t).iterateSerial(function(t){return Ho(n,t,r).next(function(t){return t&&(i=!0),I.resolve(!t)})}).next(function(){return i}));var n,r,i},Ju.prototype.removeOrphanedDocuments=function(n,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],s=0;return this.forEachOrphanedDocument(n,function(e,t){t<=r&&(t=i.isPinned(n,e).next(function(t){if(!t)return s++,o.getEntry(n,e).next(function(){return o.removeEntry(e),sa(n).delete([0,so(e.path)])})}),a.push(t))}).next(function(){return I.waitFor(a)}).next(function(){return o.apply(n)}).next(function(){return s})},Ju.prototype.removeTarget=function(t,e){e=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,e)},Ju.prototype.updateLimboDocument=Xu,Ju.prototype.forEachOrphanedDocument=function(t,r){var i,t=sa(t),o=Vi.INVALID;return t.iterate({index:hu.documentTargetsIndex},function(t,e){var t=t[0],n=e.path,e=e.sequenceNumber;0===t?(o!==Vi.INVALID&&r(new w(co(i)),o),o=e,i=n):o=Vi.INVALID}).next(function(){o!==Vi.INVALID&&r(new w(co(i)),o)})},Ju.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)};var Yu=Ju;function Ju(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new xu(this,e)}function Xu(t,e){return sa(t).put((t=t.currentSequenceNumber,new hu(0,so(e.path),t)))}var n=Number,Zu=n.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),$u=n.MAX_SAFE_INTEGER||Math.pow(2,53)-1,tc=n.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function ec(t){return null==t}function nc(t){return tc(t)&&t<=$u&&Zu<=t}oc.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t=t+n[e].canonicalId()+",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t=t+i[r].canonicalId()+",";ec(this.limit)||(t=t+"|l:"+this.limit),this.startAt&&(t=(t+="|lb:")+this.startAt.canonicalId()),this.endAt&&(t=(t+="|ub:")+this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},oc.prototype.toString=function(){var t=this.path.canonicalString();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),ec(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},oc.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},oc.prototype.isDocumentQuery=function(){return w.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length};var rc,ic=oc;function oc(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}rc={First:"F",Last:"L"};r.atPath=function(t){return new r(t)},Object.defineProperty(r.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[_c]:this.memoizedOrderBy=[new kc(t),_c];else{y(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}n||(t=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Cc.ASCENDING,this.memoizedOrderBy.push(t===Cc.ASCENDING?_c:Mc))}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),r.prototype.addFilter=function(t){y(null==this.getInequalityFilterField()||!(t instanceof uc)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),y(!this.isDocumentQuery(),"No filtering allowed for document query");t=this.filters.concat([t]);return new r(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},r.prototype.addOrderBy=function(t){y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");t=this.explicitOrderBy.concat([t]);return new r(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},r.prototype.withLimitToFirst=function(t){return new r(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,rc.First,this.startAt,this.endAt)},r.prototype.withLimitToLast=function(t){return new r(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,rc.Last,this.startAt,this.endAt)},r.prototype.withStartAt=function(t){return new r(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},r.prototype.withEndAt=function(t){return new r(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},r.prototype.asCollectionQueryAtPath=function(t){return new r(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},r.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},r.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},r.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},r.prototype.isEqual=function(t){return this.toTarget().isEqual(t.toTarget())&&this.limitType===t.limitType},r.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return y(n,"orderBy used that doesn't compare on key field"),0},r.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},r.prototype.hasLimitToFirst=function(){return!ec(this.limit)&&this.limitType===rc.First},r.prototype.hasLimitToLast=function(){return!ec(this.limit)&&this.limitType===rc.Last},r.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},r.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof uc&&n.isInequality())return n.field}return null},r.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof uc&&0<=t.indexOf(r.op))return r.op}return null},r.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},r.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},r.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===rc.First)this.memoizedTarget=new ic(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===Cc.DESCENDING?Cc.ASCENDING:Cc.DESCENDING;t.push(new kc(r.field,i))}var o=this.endAt?new Nc(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Nc(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new ic(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.memoizedTarget},r.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):w.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},r.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},r.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},r.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},r.prototype.assertValidBound=function(t){y(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")};var ac=r;function r(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=rc.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}i.fromString=function(t){switch(t){case"<":return i.LESS_THAN;case"<=":return i.LESS_THAN_OR_EQUAL;case"==":return i.EQUAL;case">=":return i.GREATER_THAN_OR_EQUAL;case">":return i.GREATER_THAN;case"array-contains":return i.ARRAY_CONTAINS;case"in":return i.IN;case"array-contains-any":return i.ARRAY_CONTAINS_ANY;default:return l("Unknown FieldFilter operator: "+t)}},i.prototype.toString=function(){return this.name},i.prototype.isEqual=function(t){return this.name===t.name},i.LESS_THAN=new i("<"),i.LESS_THAN_OR_EQUAL=new i("<="),i.EQUAL=new i("=="),i.GREATER_THAN=new i(">"),i.GREATER_THAN_OR_EQUAL=new i(">="),i.ARRAY_CONTAINS=new i("array-contains"),i.IN=new i("in"),i.ARRAY_CONTAINS_ANY=new i("array-contains-any");var D=i;function i(t){this.name=t}t(cc,sc=function(){}),cc.create=function(t,e,n){if(t.isKeyField())return e===D.IN?(y(n instanceof vs,"Comparing on key with IN, but filter value not an ArrayValue"),y(n.internalValue.every(function(t){return t instanceof hs}),"Comparing on key with IN, but an array value was not a RefValue"),new dc(t,n)):(y(n instanceof hs,"Comparing on key, but filter value not a RefValue"),y(e!==D.ARRAY_CONTAINS&&e!==D.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new lc(t,e,n));if(n.isEqual(xa.INSTANCE)){if(e!==D.EQUAL)throw new g(p.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new cc(t,e,n)}if(n.isEqual(Ya.NAN)){if(e!==D.EQUAL)throw new g(p.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new cc(t,e,n)}return e===D.ARRAY_CONTAINS?new gc(t,n):e===D.IN?(y(n instanceof vs,"IN filter has invalid value: "+n.toString()),new wc(t,n)):e===D.ARRAY_CONTAINS_ANY?(y(n instanceof vs,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Ec(t,n)):new cc(t,e,n)},cc.prototype.matches=function(t){t=t.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},cc.prototype.matchesComparison=function(t){switch(this.op){case D.LESS_THAN:return t<0;case D.LESS_THAN_OR_EQUAL:return t<=0;case D.EQUAL:return 0===t;case D.GREATER_THAN:return 0<t;case D.GREATER_THAN_OR_EQUAL:return 0<=t;default:return l("Unknown FieldFilter operator: "+this.op)}},cc.prototype.isInequality=function(){return 0<=[D.LESS_THAN,D.LESS_THAN_OR_EQUAL,D.GREATER_THAN,D.GREATER_THAN_OR_EQUAL].indexOf(this.op)},cc.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},cc.prototype.isEqual=function(t){return t instanceof cc&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},cc.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()};var sc,uc=cc;function cc(t,e,n){var r=sc.call(this)||this;return r.field=t,r.op=e,r.value=n,r}t(fc,hc=uc),fc.prototype.matches=function(t){var e=this.value,t=w.comparator(t.key,e.key);return this.matchesComparison(t)};var hc,lc=fc;function fc(){return null!==hc&&hc.apply(this,arguments)||this}t(mc,pc=uc),mc.prototype.matches=function(e){return this.value.internalValue.some(function(t){return e.key.isEqual(t.key)})};var pc,dc=mc;function mc(t,e){t=pc.call(this,t,D.IN,e)||this;return t.value=e,t}t(vc,yc=uc),vc.prototype.matches=function(t){t=t.field(this.field);return t instanceof vs&&t.contains(this.value)};var yc,gc=vc;function vc(t,e){return yc.call(this,t,D.ARRAY_CONTAINS,e)||this}t(Tc,bc=uc),Tc.prototype.matches=function(t){var e=this.value,t=t.field(this.field);return null!==t&&e.contains(t)};var bc,wc=Tc;function Tc(t,e){t=bc.call(this,t,D.IN,e)||this;return t.value=e,t}t(Ic,Sc=uc),Ic.prototype.matches=function(t){var e=this,t=t.field(this.field);return t instanceof vs&&t.internalValue.some(function(t){return e.value.contains(t)})};var Sc,Ec=Ic;function Ic(t,e){t=Sc.call(this,t,D.ARRAY_CONTAINS_ANY,e)||this;return t.value=e,t}Dc.prototype.toString=function(){return this.name},Dc.ASCENDING=new Dc("asc"),Dc.DESCENDING=new Dc("desc");var Cc=Dc;function Dc(t){this.name=t}Ac.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},Ac.prototype.sortsBeforeDocument=function(t,e){y(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i,o=t[r],a=this.position[r],n=o.field.isKeyField()?(y(a instanceof hs,"Bound has a non-key value where the key path is being used."),w.comparator(a.key,e.key)):(y(null!==(i=e.field(o.field)),"Field should exist since document matched the orderBy already."),a.compareTo(i));if(o.dir===Cc.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Ac.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0};var Nc=Ac;function Ac(t,e){this.position=t,this.before=e}Rc.prototype.compare=function(t,e){var n=this.isKeyOrderBy?C.compareByKey(t,e):C.compareByField(this.field,t,e);switch(this.dir){case Cc.ASCENDING:return n;case Cc.DESCENDING:return-1*n;default:return l("Unknown direction: "+this.dir)}},Rc.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Rc.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Rc.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)};var kc=Rc;function Rc(t,e){this.field=t,void 0===e&&(e=Cc.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}var _c=new kc(Hi.keyField(),Cc.ASCENDING),Mc=new kc(Hi.keyField(),Cc.DESCENDING),Lc=(Oc.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},Oc.prototype.getDocumentsMatchingQuery=function(e,r,i,o){var a=this;return y(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),r.matchesAllDocuments()||i.isEqual(T.MIN)?this.executeFullCollectionScan(e,r):this.localDocumentsView.getDocuments(e,o).next(function(t){var n=a.applyQuery(r,t);return(r.hasLimitToFirst()||r.hasLimitToLast())&&a.needsRefill(r.limitType,n,o,i)?a.executeFullCollectionScan(e,r):(Yr()<=Ur.DEBUG&&f("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),a.localDocumentsView.getDocumentsMatchingQuery(e,r,i).next(function(e){return n.forEach(function(t){e=e.insert(t.key,t)}),e}))})},Oc.prototype.applyQuery=function(n,t){var r=new S(function(t,e){return n.docComparator(t,e)});return t.forEach(function(t,e){e instanceof C&&n.matches(e)&&(r=r.add(e))}),r},Oc.prototype.needsRefill=function(t,e,n,r){return n.size!==e.size||!!(n=t===rc.First?e.last():e.first())&&(n.hasPendingWrites||0<n.version.compareTo(r))},Oc.prototype.executeFullCollectionScan=function(t,e){return Yr()<=Ur.DEBUG&&f("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.localDocumentsView.getDocumentsMatchingQuery(t,e,T.MIN)},Oc);function Oc(){}xc.prototype.getDocument=function(e,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.getDocumentInternal(e,n,t)})},xc.prototype.getDocumentInternal=function(t,r,i){return this.remoteDocumentCache.getEntry(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].applyToLocalView(r,t);return t})},xc.prototype.applyLocalMutationsToDocuments=function(t,e,i){var o=Eo;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].applyToLocalView(t,e);o=o.insert(t,e)}),o},xc.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next(function(t){return n.getLocalViewOfDocuments(e,t)})},xc.prototype.getLocalViewOfDocuments=function(e,r){var i=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(function(t){var t=i.applyLocalMutationsToDocuments(e,r,t),n=Eo;return t.forEach(function(t,e){e=e||new Is(t,T.forDeletedDoc()),n=n.insert(t,e)}),n})},xc.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},xc.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new w(e)).next(function(t){var e=Io;return e=t instanceof C?e.insert(t.key,t):e})},xc.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,n,r){var i=this,o=(y(n.path.isEmpty(),"Currently we only support collection group queries at the root."),n.collectionGroup),a=Io;return this.indexManager.getCollectionParents(e,o).next(function(t){return I.forEach(t,function(t){t=n.asCollectionQueryAtPath(t.child(o));return i.getDocumentsMatchingCollectionQuery(e,t,r).next(function(t){t.forEach(function(t,e){a=a.insert(t,e)})})}).next(function(){return a})})},xc.prototype.getDocumentsMatchingCollectionQuery=function(e,n,t){var c,h,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,t).next(function(t){return c=t,r.mutationQueue.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return h=t,r.addMissingBaseDocuments(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key,u=c.get(s),a=a.applyToLocalView(u,u,r.localWriteTime);c=a instanceof C?c.insert(s,a):c.remove(s)}})}).next(function(){return c.forEach(function(t,e){n.matches(e)||(c=c.remove(t))}),c})},xc.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=E(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof Sa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof C&&(c=c.insert(t,e))}),c})};var Pc=xc;function xc(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}qc.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},qc.prototype.addReference=function(t,e){t=new Vc(t,e);this.refsByKey=this.refsByKey.add(t),this.refsByTarget=this.refsByTarget.add(t)},qc.prototype.addReferences=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},qc.prototype.removeReference=function(t,e){this.removeRef(new Vc(t,e))},qc.prototype.removeReferences=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},qc.prototype.removeReferencesForId=function(t){var e=this,n=w.EMPTY,r=new Vc(n,t),n=new Vc(n,t+1),i=[];return this.refsByTarget.forEachInRange([r,n],function(t){e.removeRef(t),i.push(t.key)}),i},qc.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach(function(t){return e.removeRef(t)})},qc.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},qc.prototype.referencesForId=function(t){var e=w.EMPTY,n=new Vc(e,t),e=new Vc(e,t+1),r=E();return this.refsByTarget.forEachInRange([n,e],function(t){r=r.add(t.key)}),r},qc.prototype.containsKey=function(t){var e=new Vc(t,0),e=this.refsByKey.firstAfterOrEqual(e);return null!==e&&t.isEqual(e.key)};var Fc=qc;function qc(){this.refsByKey=new S(Vc.compareByKey),this.refsByTarget=new S(Vc.compareByTargetId)}Bc.compareByKey=function(t,e){return w.comparator(t.key,e.key)||b(t.targetOrBatchId,e.targetOrBatchId)},Bc.compareByTargetId=function(t,e){return b(t.targetOrBatchId,e.targetOrBatchId)||w.comparator(t.key,e.key)};var Vc=Bc;function Bc(t,e){this.key=t,this.targetOrBatchId=e}N.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},N.prototype.handleUserChange=function(i){return d(this,void 0,void 0,function(){var e,y,n,r=this;return m(this,function(t){switch(t.label){case 0:return e=this.mutationQueue,y=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(d){var m;return r.mutationQueue.getAllMutationBatches(d).next(function(t){return m=t,e=r.persistence.getMutationQueue(i),y=new Pc(r.remoteDocuments,e,r.persistence.getIndexManager()),e.getAllMutationBatches(d)}).next(function(t){for(var e=[],n=[],r=E(),i=0,o=m;i<o.length;i++){var a=o[i];e.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++)var c=u[s],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){a=l[h],n.push(a.batchId);for(var f=0,p=a.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return y.getDocuments(d,r).next(function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:n}})})})];case 1:return n=t.sent(),this.mutationQueue=e,this.localDocuments=y,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,n]}})})},N.prototype.localWrite=function(s){var u,c=this,h=ho.now(),t=s.reduce(function(t,e){return t.add(e.key)},E());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(a){return c.localDocuments.getDocuments(a,t).next(function(t){u=t;for(var e=[],n=0,r=s;n<r.length;n++){var i=r[n],o=i.extractBaseValue(u.get(i.key));null!=o&&e.push(new Sa(i.key,o,o.fieldMask(),da.exists(!0)))}return c.mutationQueue.addMutationBatch(a,h,e,s)})}).then(function(t){var e=t.applyToLocalDocumentSet(u);return{batchId:t.batchId,changes:e}})},N.prototype.lookupMutationDocuments=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(e){return n.mutationQueue.lookupMutationKeys(e,t).next(function(t){return t?n.localDocuments.getDocuments(e,t):I.resolve(null)})})},N.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(t){var e=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer({trackRemovals:!0});return i.mutationQueue.acknowledgeBatch(t,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.mutationQueue.performConsistencyCheck(t)}).next(function(){return i.localDocuments.getDocuments(t,e)})})},N.prototype.rejectBatch=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(e){var n;return r.mutationQueue.lookupMutationBatch(e,t).next(function(t){return y(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t)}).next(function(){return r.mutationQueue.performConsistencyCheck(e)}).next(function(){return r.localDocuments.getDocuments(e,n)})})},N.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)})},N.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(t){return e.mutationQueue.getLastStreamToken(t)})},N.prototype.setLastStreamToken=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(t){return n.mutationQueue.setLastStreamToken(t,e)})},N.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)})},N.prototype.applyRemoteEvent=function(u){var c=this,h=u.snapshotVersion,l=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(i){var t,o=c.remoteDocuments.newChangeBuffer({trackRemovals:!0}),a=(l=c.targetDataByTarget,[]),s=(si(u.targetChanges,function(t,e){var n,r=l.get(t);r&&(a.push(c.targetCache.removeMatchingKeys(i,e.removedDocuments,t).next(function(){return c.targetCache.addMatchingKeys(i,e.addedDocuments,t)})),0<(n=e.resumeToken).length)&&(n=r.withResumeToken(n,h).withSequenceNumber(i.currentSequenceNumber),l=l.insert(t,n),N.shouldPersistTargetData(r,n,e))&&a.push(c.targetCache.updateTargetData(i,n))}),Eo),n=E();return u.documentUpdates.forEach(function(t,e){n=n.add(t)}),a.push(o.getEntries(i,n).next(function(r){u.documentUpdates.forEach(function(t,e){var n=r.get(t);e instanceof Is&&e.version.isEqual(T.MIN)?(o.removeEntry(t,h),s=s.insert(t,e)):null==n||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(y(!T.MIN.isEqual(h),"Cannot add a document when the remote version is zero"),o.addEntry(e,h),s=s.insert(t,e)):f("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.resolvedLimboDocuments.has(t)&&a.push(c.persistence.referenceDelegate.updateLimboDocument(i,t))})})),h.isEqual(T.MIN)||(t=c.targetCache.getLastRemoteSnapshotVersion(i).next(function(t){return y(0<=h.compareTo(t),"Watch stream reverted to previous snapshot?? "+h+" < "+t),c.targetCache.setTargetsMetadata(i,i.currentSequenceNumber,h)}),a.push(t)),I.waitFor(a).next(function(){return o.apply(i)}).next(function(){return c.localDocuments.getLocalViewOfDocuments(i,s)})}).then(function(t){return c.targetDataByTarget=l,t})},N.shouldPersistTargetData=function(t,e,n){return y(0<e.resumeToken.length,"Attempted to persist target data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},N.prototype.notifyLocalViewChanges=function(t){for(var n=this,e=0,r=t;e<r.length;e++){var i,o=r[e],a=o.targetId;this.localViewReferences.addReferences(o.addedKeys,a),this.localViewReferences.removeReferences(o.removedKeys,a),o.fromCache||(y(null!==(o=this.targetDataByTarget.get(a)),"Can't set limbo-free snapshot version for unknown target: "+a),i=o.snapshotVersion,o=o.withLastLimboFreeSnapshotVersion(i),this.targetDataByTarget=this.targetDataByTarget.insert(a,o))}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(e){return I.forEach(t,function(t){return I.forEach(t.removedKeys,function(t){return n.persistence.referenceDelegate.removeReference(e,t)})})})},N.prototype.nextMutationBatch=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)})},N.prototype.readDocument=function(e){var n=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(t){return n.localDocuments.getDocument(t,e)})},N.prototype.allocateTarget=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(e){var n;return i.targetCache.getTargetData(e,r).next(function(t){return t?(n=t,I.resolve(n)):i.targetCache.allocateTargetId(e).next(function(t){return n=new Iu(r,t,bu.Listen,e.currentSequenceNumber),i.targetCache.addTargetData(e,n).next(function(){return n})})})}).then(function(t){return null===i.targetDataByTarget.get(t.targetId)&&(i.targetDataByTarget=i.targetDataByTarget.insert(t.targetId,t),i.targetIdByTarget.set(r,t.targetId)),t})},N.prototype.getTargetData=function(t,e){var n=this.targetIdByTarget.get(e);return void 0!==n?I.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(t,e)},N.prototype.releaseTarget=function(n,r){var i=this,o=this.targetDataByTarget.get(n);return y(null!==o,"Tried to release nonexistent target: "+n),this.persistence.runTransaction("Release target",r?"readwrite-idempotent":"readwrite-primary-idempotent",function(e){var t=i.localViewReferences.removeReferencesForId(n);return r?I.resolve():I.forEach(t,function(t){return i.persistence.referenceDelegate.removeReference(e,t)}).next(function(){i.persistence.referenceDelegate.removeTarget(e,o)})}).then(function(){i.targetDataByTarget=i.targetDataByTarget.remove(n),i.targetIdByTarget.delete(o.target)})},N.prototype.executeQuery=function(t,n){var r=this,i=T.MIN,o=E();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(e){return r.getTargetData(e,t.toTarget()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(function(t){o=t})}).next(function(){return r.queryEngine.getDocumentsMatchingQuery(e,t,n?i:T.MIN,n?o:E())}).next(function(t){return{documents:t,remoteKeys:o}})})},N.prototype.remoteDocumentKeys=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(t){return n.targetCache.getMatchingKeysForTargetId(t,e)})},N.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},N.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},N.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},N.prototype.applyWriteToRemoteDocuments=function(t,i,o){var e=this,a=i.batch,n=a.keys(),s=I.resolve();return n.forEach(function(r){s=s.next(function(){return o.getEntry(t,r)}).next(function(t){var e=t,n=i.docVersions.get(r);y(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.compareTo(n)<0)&&((e=a.applyToRemoteDocument(r,e,i))?o.addEntry(e,i.commitVersion):y(!t,"Mutation batch "+a+" applied to document "+t+" resulted in null"))})}),s.next(function(){return e.mutationQueue.removeMutationBatch(t,a)})},N.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(t){return e.collect(t,n.targetDataByTarget)})},N.prototype.getTarget=function(e){var n=this,t=this.targetDataByTarget.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(t){return n.targetCache.getTargetDataForTarget(t,e).next(function(t){return t?t.target:null})})},N.prototype.getNewDocumentChanges=function(){var n=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(t){return n.remoteDocuments.getNewDocumentChanges(t,n.lastDocumentChangeReadTime)}).then(function(t){var e=t.changedDocs;return n.lastDocumentChangeReadTime=t.readTime,e})},N.prototype.synchronizeLastDocumentChangeReadTime=function(){return d(this,void 0,void 0,function(){var e,n=this;return m(this,function(t){return this.remoteDocuments instanceof Ls?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(t){return e.getLastDocumentChange(t)}).then(function(t){t=t.readTime;n.lastDocumentChangeReadTime=t})]):[2]})})},N.RESUME_TOKEN_MAX_AGE_MICROS=3e8;var Uc=N;function N(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new Fc,this.targetDataByTarget=new po(b),this.targetIdByTarget=new ks(function(t){return t.canonicalId()}),this.lastDocumentChangeReadTime=T.MIN,y(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.localDocuments=new Pc(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}Qc.prototype.checkEmpty=function(t){return I.resolve(0===this.mutationQueue.length)},Qc.prototype.acknowledgeBatch=function(t,e,n){var e=e.batchId,r=this.indexOfExistingBatchId(e,"acknowledged"),r=(y(0===r,"Can only acknowledge the first batch in the mutation queue"),this.mutationQueue[r]);return y(e===r.batchId,"Queue ordering failure: expected batch "+e+", got batch "+r.batchId),this.lastStreamToken=n,I.resolve()},Qc.prototype.getLastStreamToken=function(t){return I.resolve(this.lastStreamToken)},Qc.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,I.resolve()},Qc.prototype.addMutationBatch=function(t,e,n,r){y(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId,e=(this.nextBatchId++,0<this.mutationQueue.length&&y(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order"),new Ao(i,e,n,r));this.mutationQueue.push(e);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Vc(s.key,i)),this.indexManager.addToCollectionParentIndex(t,s.key.path.popLast())}return I.resolve(e)},Qc.prototype.lookupMutationBatch=function(t,e){return I.resolve(this.findMutationBatch(e))},Qc.prototype.lookupMutationKeys=function(t,e){e=this.findMutationBatch(e);return y(null!=e,"Failed to find local mutation batch."),I.resolve(e.keys())},Qc.prototype.getNextMutationBatchAfterBatchId=function(t,e){e=this.indexOfBatchId(e+1),e=e<0?0:e;return I.resolve(this.mutationQueue.length>e?this.mutationQueue[e]:null)},Qc.prototype.getHighestUnacknowledgedBatchId=function(){return I.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},Qc.prototype.getAllMutationBatches=function(t){return I.resolve(this.mutationQueue.slice())},Qc.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Vc(e,0),i=new Vc(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],function(t){y(e.isEqual(t.key),"Should only iterate over a single key's batches");t=n.findMutationBatch(t.targetOrBatchId);y(null!==t,"Batches in the index must exist in the main table"),o.push(t)}),I.resolve(o)},Qc.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var r=this,i=new S(b);return e.forEach(function(e){var t=new Vc(e,0),n=new Vc(e,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([t,n],function(t){y(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.targetOrBatchId)})}),I.resolve(this.findMutationBatches(i))},Qc.prototype.getAllMutationBatchesAffectingQuery=function(t,e){y(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,e=n,e=(w.isDocumentKey(e)||(e=e.child("")),new Vc(new w(e),0)),i=new S(b);return this.batchesByDocumentKey.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.targetOrBatchId)),!0)},e),I.resolve(this.findMutationBatches(i))},Qc.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach(function(t){t=e.findMutationBatch(t);null!==t&&n.push(t)}),n},Qc.prototype.removeMutationBatch=function(n,r){var i=this,o=(y(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift(),this.batchesByDocumentKey);return I.forEach(r.mutations,function(t){var e=new Vc(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.removeMutationReference(n,t.key)}).next(function(){i.batchesByDocumentKey=o})},Qc.prototype.removeCachedMutationKeys=function(t){},Qc.prototype.containsKey=function(t,e){var n=new Vc(e,0),n=this.batchesByDocumentKey.firstAfterOrEqual(n);return I.resolve(e.isEqual(n&&n.key))},Qc.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&y(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),I.resolve()},Qc.prototype.indexOfExistingBatchId=function(t,e){t=this.indexOfBatchId(t);return y(0<=t&&t<this.mutationQueue.length,"Batches must exist to be "+e),t},Qc.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},Qc.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);return e<0||e>=this.mutationQueue.length?null:(y((e=this.mutationQueue[e]).batchId===t,"If found batch must match"),e)};var Kc=Qc;function Qc(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=ei(),this.batchesByDocumentKey=new S(Vc.compareByKey)}Wc.prototype.addEntry=function(t,e,n){y(!n.isEqual(T.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),i=i?i.size:0,o=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:o,readTime:n}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},Wc.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},Wc.prototype.getEntry=function(t,e){e=this.docs.get(e);return I.resolve(e?e.maybeDocument:null)},Wc.prototype.getEntries=function(t,e){var n=this,r=Eo;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),I.resolve(r)},Wc.prototype.getDocumentsMatchingQuery=function(t,e,n){y(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Io,i=new w(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,a=a.value,u=a.maybeDocument,a=a.readTime;if(!e.path.isPrefixOf(s.path))break;a.compareTo(n)<=0||u instanceof C&&e.matches(u)&&(r=r.insert(u.key,u))}return I.resolve(r)},Wc.prototype.forEachDocumentKey=function(t,e){return I.forEach(this.docs,function(t){return e(t)})},Wc.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},Wc.prototype.newChangeBuffer=function(t){return new Wc.RemoteDocumentChangeBuffer(this)},Wc.prototype.getSize=function(t){return I.resolve(this.size)},Wc.RemoteDocumentChangeBuffer=(t(zc,jc=je),zc.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e?i.push(r.documentCache.addEntry(n,e,r.readTime)):r.documentCache.removeEntry(t)}),I.waitFor(i)},zc.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},zc.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},zc);var jc,Gc=Wc;function Wc(t,e){this.indexManager=t,this.sizer=e,this.docs=new po(w.comparator),this.size=0}function zc(t){var e=jc.call(this)||this;return e.documentCache=t,e}Yc.prototype.forEachTarget=function(t,n){return this.targets.forEach(function(t,e){return n(e)}),I.resolve()},Yc.prototype.getLastRemoteSnapshotVersion=function(t){return I.resolve(this.lastRemoteSnapshotVersion)},Yc.prototype.getHighestSequenceNumber=function(t){return I.resolve(this.highestSequenceNumber)},Yc.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,I.resolve(e)},Yc.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),I.resolve()},Yc.prototype.saveTargetData=function(t){this.targets.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},Yc.prototype.addTargetData=function(t,e){return y(!this.targets.has(e.target),"Adding a target that already exists"),this.saveTargetData(e),this.targetCount+=1,I.resolve()},Yc.prototype.updateTargetData=function(t,e){return y(this.targets.has(e.target),"Updating a non-existent target"),this.saveTargetData(e),I.resolve()},Yc.prototype.removeTargetData=function(t,e){return y(0<this.targetCount,"Removing a target from an empty cache"),y(this.targets.has(e.target),"Removing a non-existent target from the cache"),this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),--this.targetCount,I.resolve()},Yc.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.targets.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.targets.delete(t),s.push(o.removeMatchingKeysForTargetId(n,e.targetId)),a++)}),I.waitFor(s).next(function(){return a})},Yc.prototype.getTargetCount=function(t){return I.resolve(this.targetCount)},Yc.prototype.getTargetData=function(t,e){e=this.targets.get(e)||null;return I.resolve(e)},Yc.prototype.getTargetDataForTarget=function(t,e){return l("Not yet implemented.")},Yc.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.addReference(e,t))}),I.waitFor(i)},Yc.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.removeReference(e,t))}),I.waitFor(i)},Yc.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),I.resolve()},Yc.prototype.getMatchingKeysForTargetId=function(t,e){e=this.references.referencesForId(e);return I.resolve(e)},Yc.prototype.containsKey=function(t,e){return I.resolve(this.references.containsKey(e))};var Hc=Yc;function Yc(t){this.persistence=t,this.targets=new ks(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=T.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Fc,this.targetCount=0,this.targetIdGenerator=ta.forTargetCache()}Xc.createLruPersistence=function(t,e,n){return new Xc(t,function(t){return new rh(t,new Du(e),n)})},Xc.createEagerPersistence=function(t){return new Xc(t,function(t){return new eh(t)})},Xc.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(Xc.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),Xc.prototype.getActiveClients=function(){return d(this,void 0,void 0,function(){return m(this,function(t){return[2,[this.clientId]]})})},Xc.prototype.setPrimaryStateListener=function(t){return t(!0)},Xc.prototype.setDatabaseDeletedListener=function(){},Xc.prototype.setNetworkEnabled=function(t){},Xc.prototype.getIndexManager=function(){return this.indexManager},Xc.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Kc(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},Xc.prototype.getTargetCache=function(){return this.targetCache},Xc.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},Xc.prototype.runTransaction=function(t,e,n){var r=this,i=(f("MemoryPersistence","Starting transaction:",t),new $c(this.listenSequence.next()));return this.referenceDelegate.onTransactionStarted(),n(i).next(function(t){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},Xc.prototype.mutationQueuesContainKey=function(e,n){return I.or((t=this.mutationQueues,r=[],ui(t,function(t,e){r.push(e)}),r.map(function(t){return function(){return t.containsKey(e,n)}})));var t,r};var Jc=Xc;function Xc(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new Vi(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.targetCache=new Hc(this),this.indexManager=new Bs,this.remoteDocumentCache=new Gc(this.indexManager,function(t){return n.referenceDelegate.documentSize(t)})}t(th,Zc=Ge);var Zc,$c=th;function th(t){var e=Zc.call(this)||this;return e.currentSequenceNumber=t,e}Object.defineProperty(nh.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw l("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),nh.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},nh.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),I.resolve()},nh.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),I.resolve()},nh.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),I.resolve()},nh.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.orphanedDocuments.add(t)})}).next(function(){return r.removeTargetData(t,e)})},nh.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},nh.prototype.onTransactionCommitted=function(t){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.orphanedDocuments,function(e){return n.isReferenced(t,e).next(function(t){t||r.removeEntry(e)})}).next(function(){return n._orphanedDocuments=null,r.apply(t)})},nh.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next(function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)})},nh.prototype.documentSize=function(t){return 0},nh.prototype.isReferenced=function(t,e){var n=this;return I.or([function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return I.resolve(n.inMemoryPins.containsKey(e))}])};var eh=nh;function nh(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}ih.prototype.onTransactionStarted=function(){},ih.prototype.onTransactionCommitted=function(t){return I.resolve()},ih.prototype.forEachTarget=function(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)},ih.prototype.getSequenceNumberCount=function(t){var n=this.orphanedDocumentCount(t);return this.persistence.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},ih.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,function(t){e++}).next(function(){return e})},ih.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return I.forEach(this.orphanedSequenceNumbers,function(t,e){return i.isPinned(n,t,e).next(function(t){return t?I.resolve():r(e)})})},ih.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},ih.prototype.removeTargets=function(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)},ih.prototype.removeOrphanedDocuments=function(t,n){var r=this,i=0,e=this.persistence.getRemoteDocumentCache(),o=e.newChangeBuffer();return e.forEachDocumentKey(t,function(e){return r.isPinned(t,e,n).next(function(t){t||(i++,o.removeEntry(e))})}).next(function(){return o.apply(t)}).next(function(){return i})},ih.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),I.resolve()},ih.prototype.removeTarget=function(t,e){e=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,e)},ih.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),I.resolve()},ih.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),I.resolve()},ih.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),I.resolve()},ih.prototype.documentSize=function(t){var e,t=this.serializer.toDbRemoteDocument(t,t.version);if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw l("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length},ih.prototype.isPinned=function(t,e,n){var r=this;return I.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return I.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getTargetCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return I.resolve(void 0!==t&&n<t)}])},ih.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)};var rh=ih;function ih(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new ks(function(t){return so(t.path)}),this.garbageCollector=new xu(this,n)}ah.prototype.reset=function(){this.currentBaseMs=0},ah.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},ah.prototype.backoffAndRun=function(t){var e=this,n=(this.cancel(),Math.floor(this.currentBaseMs+this.jitterDelayMs())),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return e.lastAttemptTime=Date.now(),t()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},ah.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},ah.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs};var oh=ah;function ah(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var sh,uh="PersistentStream",Q=(sh={Initial:0,0:"Initial",Starting:1,1:"Starting",Open:2,2:"Open",Error:3,3:"Error",Backoff:4,4:"Backoff"},ch.prototype.isStarted=function(){return this.state===sh.Starting||this.state===sh.Open||this.state===sh.Backoff},ch.prototype.isOpen=function(){return this.state===sh.Open},ch.prototype.start=function(){this.state!==sh.Error?(y(this.state===sh.Initial,"Already started"),this.auth()):this.performBackoff()},ch.prototype.stop=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(sh.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ch.prototype.inhibitBackoff=function(){y(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=sh.Initial,this.backoff.reset()},ch.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return t.handleIdleCloseTimer()}))},ch.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},ch.prototype.handleIdleCloseTimer=function(){return d(this,void 0,void 0,function(){return m(this,function(t){return this.isOpen()?[2,this.close(sh.Initial)]:[2]})})},ch.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},ch.prototype.close=function(e,n){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return y(this.isStarted(),"Only started streams should be closed."),y(e===sh.Error||ec(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==sh.Error?this.backoff.reset():n&&n.code===p.RESOURCE_EXHAUSTED?(Xr(n.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===p.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(n)];case 1:return t.sent(),[2]}})})},ch.prototype.tearDown=function(){},ch.prototype.auth=function(){var n=this,t=(y(this.state===sh.Initial,"Must be in initial state to auth"),this.state=sh.Starting,this.getCloseGuardedDispatcher(this.closeCount)),e=this.closeCount;this.credentialsProvider.getToken().then(function(t){n.closeCount===e&&n.startStream(t)},function(e){t(function(){var t=new g(p.UNKNOWN,"Fetching auth token failed: "+e.message);return n.handleStreamClose(t)})})},ch.prototype.startStream=function(t){var e=this,n=(y(this.state===sh.Starting,"Trying to start stream in a non-starting state"),this.getCloseGuardedDispatcher(this.closeCount));this.stream=this.startRpc(t),this.stream.onOpen(function(){n(function(){return y(e.state===sh.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=sh.Open,e.listener.onOpen()})}),this.stream.onClose(function(t){n(function(){return e.handleStreamClose(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ch.prototype.performBackoff=function(){var t=this;y(this.state===sh.Error,"Should only perform backoff when in Error state"),this.state=sh.Backoff,this.backoff.backoffAndRun(function(){return d(t,void 0,void 0,function(){return m(this,function(t){return y(this.state===sh.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=sh.Initial,this.start(),y(this.isStarted(),"PersistentStream should have started"),[2]})})})},ch.prototype.handleStreamClose=function(t){return y(this.isStarted(),"Can't handle server close on non-started stream"),f(uh,"close with error: "+t),this.stream=null,this.close(sh.Error,t)},ch.prototype.getCloseGuardedDispatcher=function(e){var n=this;return function(t){n.queue.enqueueAndForget(function(){return n.closeCount===e?t():(f(uh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ch);function ch(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=sh.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new oh(t,e)}t(fh,hh=Q),fh.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},fh.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),t=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,t)},fh.prototype.watch=function(t){var e={},t=(e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t),this.serializer.toListenRequestLabels(t));t&&(e.labels=t),this.sendRequest(e)},fh.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)};var hh,lh=fh;function fh(t,e,n,r,i){t=hh.call(this,t,Zi.ListenStreamConnectionBackoff,Zi.ListenStreamIdle,e,n,i)||this;return t.serializer=r,t}t(mh,ph=Q),Object.defineProperty(mh.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),mh.prototype.start=function(){this.handshakeComplete_=!1,ph.prototype.start.call(this)},mh.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},mh.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},mh.prototype.onMessage=function(t){var e,n;return y(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_?(this.backoff.reset(),e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime),this.listener.onMutationResult(n,e)):(y(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete())},mh.prototype.writeHandshake=function(){y(this.isOpen(),"Writing handshake requires an opened stream"),y(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},mh.prototype.writeMutations=function(t){var e=this,t=(y(this.isOpen(),"Writing mutations requires an opened stream"),y(this.handshakeComplete_,"Handshake must be complete before writing mutations"),y(0<this.lastStreamToken.length,"Trying to write mutation without a token"),{streamToken:this.lastStreamToken,writes:t.map(function(t){return e.serializer.toMutation(t)})});this.sendRequest(t)};var ph,dh=mh;function mh(t,e,n,r,i){t=ph.call(this,t,Zi.WriteStreamConnectionBackoff,Zi.WriteStreamIdle,e,n,i)||this;return t.serializer=r,t.handshakeComplete_=!1,t.lastStreamToken=ei(),t}gh.prototype.newPersistentWriteStream=function(t){return new dh(this.queue,this.connection,this.credentials,this.serializer,t)},gh.prototype.newPersistentWatchStream=function(t){return new lh(this.queue,this.connection,this.credentials,this.serializer,t)},gh.prototype.commit=function(t){var e=this,t={database:this.serializer.encodedDatabaseId,writes:t.map(function(t){return e.serializer.toMutation(t)})};return this.invokeRPC("Commit",t).then(function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)})},gh.prototype.lookup=function(e){var i=this,t={database:this.serializer.encodedDatabaseId,documents:e.map(function(t){return i.serializer.toName(t)})};return this.invokeStreamingRPC("BatchGetDocuments",t).then(function(t){var n=Eo,r=(t.forEach(function(t){t=i.serializer.fromMaybeDocument(t);n=n.insert(t.key,t)}),[]);return e.forEach(function(t){var e=n.get(t);y(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},gh.prototype.invokeRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeRPC(e,n,t)}).catch(function(t){throw t.code===p.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},gh.prototype.invokeStreamingRPC=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.invokeStreamingRPC(e,n,t)}).catch(function(t){throw t.code===p.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})};var yh=gh;function gh(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}wh.prototype.lookup=function(r){return d(this,void 0,void 0,function(){var e,n=this;return m(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new g(p.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(r)];case 1:return(e=t.sent()).forEach(function(t){t instanceof Is||t instanceof C?n.recordVersion(t):l("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},wh.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},wh.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},wh.prototype.delete=function(t){this.write([new Ra(t,this.precondition(t))]),this.writtenDocs.add(t)},wh.prototype.commit=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach(function(t){e=e.remove(t.key)}),e.isEmpty())return[4,this.datastore.commit(this.mutations)];throw new g(p.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");case 1:return t.sent(),this.committed=!0,[2]}})})},wh.prototype.recordVersion=function(t){var e;if(t instanceof C)e=t.version;else{if(!(t instanceof Is))throw l("Document in a transaction was a "+t.constructor.name);e=T.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new g(p.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},wh.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?da.updateTime(e):da.NONE},wh.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(this.writtenDocs.has(t)||!e)return da.exists(!0);if(e.isEqual(T.forDeletedDoc()))throw new g(p.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return da.updateTime(e)},wh.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},wh.prototype.ensureCommitNotCalled=function(){y(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")};var s,vh,bh=wh;function wh(t){this.datastore=t,this.readVersions=Co,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}s={Unknown:0,0:"Unknown",Online:1,1:"Online",Offline:2,2:"Offline"},vh={RemoteStore:0,0:"RemoteStore",SharedClientState:1,1:"SharedClientState"};Sh.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(s.Unknown),y(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Zi.OnlineStateTimeout,1e4,function(){return t.onlineStateTimer=null,y(t.state===s.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(s.Offline),Promise.resolve()}))},Sh.prototype.handleWatchStreamFailure=function(t){this.state===s.Online?(this.setAndBroadcast(s.Unknown),y(0===this.watchStreamFailures,"watchStreamFailures must be 0"),y(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(s.Offline)))},Sh.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===s.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},Sh.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},Sh.prototype.logClientOfflineWarningIfNecessary=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(Xr(t),this.shouldWarnClientIsOffline=!1):f("OnlineStateTracker",t)},Sh.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)};var A,Th=Sh;function Sh(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=s.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function Eh(t){switch(t){case p.OK:return l("Treated status OK as error");case p.CANCELLED:case p.UNKNOWN:case p.DEADLINE_EXCEEDED:case p.RESOURCE_EXHAUSTED:case p.INTERNAL:case p.UNAVAILABLE:case p.UNAUTHENTICATED:return!1;case p.INVALID_ARGUMENT:case p.NOT_FOUND:case p.ALREADY_EXISTS:case p.PERMISSION_DENIED:case p.FAILED_PRECONDITION:case p.ABORTED:case p.OUT_OF_RANGE:case p.UNIMPLEMENTED:case p.DATA_LOSS:return!0;default:return l("Unknown status code: "+t)}}function Ih(t){if(void 0===t)return Xr("GRPC error has no .code"),p.UNKNOWN;switch(t){case A.OK:return p.OK;case A.CANCELLED:return p.CANCELLED;case A.UNKNOWN:return p.UNKNOWN;case A.DEADLINE_EXCEEDED:return p.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return p.RESOURCE_EXHAUSTED;case A.INTERNAL:return p.INTERNAL;case A.UNAVAILABLE:return p.UNAVAILABLE;case A.UNAUTHENTICATED:return p.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return p.INVALID_ARGUMENT;case A.NOT_FOUND:return p.NOT_FOUND;case A.ALREADY_EXISTS:return p.ALREADY_EXISTS;case A.PERMISSION_DENIED:return p.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return p.FAILED_PRECONDITION;case A.ABORTED:return p.ABORTED;case A.OUT_OF_RANGE:return p.OUT_OF_RANGE;case A.UNIMPLEMENTED:return p.UNIMPLEMENTED;case A.DATA_LOSS:return p.DATA_LOSS;default:return l("Unknown status code: "+t)}}A={OK:0,0:"OK",CANCELLED:1,1:"CANCELLED",UNKNOWN:2,2:"UNKNOWN",INVALID_ARGUMENT:3,3:"INVALID_ARGUMENT",DEADLINE_EXCEEDED:4,4:"DEADLINE_EXCEEDED",NOT_FOUND:5,5:"NOT_FOUND",ALREADY_EXISTS:6,6:"ALREADY_EXISTS",PERMISSION_DENIED:7,7:"PERMISSION_DENIED",UNAUTHENTICATED:16,16:"UNAUTHENTICATED",RESOURCE_EXHAUSTED:8,8:"RESOURCE_EXHAUSTED",FAILED_PRECONDITION:9,9:"FAILED_PRECONDITION",ABORTED:10,10:"ABORTED",OUT_OF_RANGE:11,11:"OUT_OF_RANGE",UNIMPLEMENTED:12,12:"UNIMPLEMENTED",INTERNAL:13,13:"INTERNAL",UNAVAILABLE:14,14:"UNAVAILABLE",DATA_LOSS:15,15:"DATA_LOSS"};Nh.emptySet=function(t){return new Nh(t.comparator)},Nh.prototype.has=function(t){return null!=this.keyedMap.get(t)},Nh.prototype.get=function(t){return this.keyedMap.get(t)},Nh.prototype.first=function(){return this.sortedSet.minKey()},Nh.prototype.last=function(){return this.sortedSet.maxKey()},Nh.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Nh.prototype.indexOf=function(t){t=this.keyedMap.get(t);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Nh.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Nh.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},Nh.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},Nh.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},Nh.prototype.isEqual=function(t){if(!(t instanceof Nh))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Nh.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Nh.prototype.copy=function(t,e){var n=new Nh;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n};var k,Ch,Dh=Nh;function Nh(n){this.comparator=n?function(t,e){return n(t,e)||w.comparator(t.key,e.key)}:function(t,e){return w.comparator(t.key,e.key)},this.keyedMap=Io,this.sortedSet=new po(this.comparator)}k={Added:0,0:"Added",Removed:1,1:"Removed",Modified:2,2:"Modified",Metadata:3,3:"Metadata"},Ch={Local:0,0:"Local",Synced:1,1:"Synced"};kh.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);!n||t.type!==k.Added&&n.type===k.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===k.Metadata&&n.type!==k.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===k.Modified&&n.type===k.Modified?this.changeMap=this.changeMap.insert(e,{type:k.Modified,doc:t.doc}):t.type===k.Modified&&n.type===k.Added?this.changeMap=this.changeMap.insert(e,{type:k.Added,doc:t.doc}):t.type===k.Removed&&n.type===k.Added?this.changeMap=this.changeMap.remove(e):t.type===k.Removed&&n.type===k.Modified?this.changeMap=this.changeMap.insert(e,{type:k.Removed,doc:n.doc}):t.type===k.Added&&n.type===k.Removed?this.changeMap=this.changeMap.insert(e,{type:k.Modified,doc:t.doc}):l("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n))},kh.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(t,e){n.push(e)}),n};var Ah=kh;function kh(){this.changeMap=new po(w.comparator)}_h.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:k.Added,doc:t})}),new _h(t,e,Dh.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(_h.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),_h.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0};var Rh=_h;function _h(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}Lh.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n;return(n={})[t]=Oh.createSynthesizedTargetChangeForCurrentChange(t,e),new Lh(T.MIN,n,No,Eo,E())};var Mh=Lh;function Lh(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}Ph.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new Ph(ei(),e,E(),E(),E())};var Oh=Ph;function Ph(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function xh(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}function Fh(t,e){this.targetId=t,this.existenceFilter=e}function qh(t,e,n,r){void 0===n&&(n=ei()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}Vh={NoChange:0,0:"NoChange",Added:1,1:"Added",Removed:2,2:"Removed",Current:3,3:"Current",Reset:4,4:"Reset"};Object.defineProperty(Uh.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(Uh.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(Uh.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(Uh.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),Uh.prototype.updateResumeToken=function(t){0<t.length&&(this._hasPendingChanges=!0,this._resumeToken=t)},Uh.prototype.toTargetChange=function(){var n=E(),r=E(),i=E();return this.documentChanges.forEach(function(t,e){switch(e){case k.Added:n=n.add(t);break;case k.Modified:r=r.add(t);break;case k.Removed:i=i.add(t);break;default:l("Encountered invalid change type: "+e)}}),new Oh(this._resumeToken,this._current,n,r,i)},Uh.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Gh()},Uh.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},Uh.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},Uh.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},Uh.prototype.recordTargetResponse=function(){--this.pendingResponses},Uh.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0};var Vh,Bh=Uh;function Uh(){this.pendingResponses=0,this.documentChanges=Gh(),this._resumeToken=ei(),this._current=!1,this._hasPendingChanges=!0}Qh.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof C?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof Is&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,t.key,t.newDoc)},Qh.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.ensureTargetState(t);switch(n.state){case Vh.NoChange:r.isActiveTarget(t)&&e.updateResumeToken(n.resumeToken);break;case Vh.Added:e.recordTargetResponse(),e.isPending||e.clearPendingChanges(),e.updateResumeToken(n.resumeToken);break;case Vh.Removed:e.recordTargetResponse(),e.isPending||r.removeTarget(t),y(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case Vh.Current:r.isActiveTarget(t)&&(e.markCurrent(),e.updateResumeToken(n.resumeToken));break;case Vh.Reset:r.isActiveTarget(t)&&(r.resetTarget(t),e.updateResumeToken(n.resumeToken));break;default:l("Unknown target watch change state: "+n.state)}})},Qh.prototype.forEachTarget=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):si(this.targetStates,e)},Qh.prototype.handleExistenceFilter=function(t){var e=t.targetId,t=t.existenceFilter.count,n=this.targetDataForActiveTarget(e);n&&((n=n.target).isDocumentQuery()?0===t?(n=new w(n.path),this.removeDocumentFromTarget(e,n,new Is(n,T.forDeletedDoc()))):y(1===t,"Single document existence filter with count: "+t):this.getCurrentDocumentCountForTarget(e)!==t&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e)))},Qh.prototype.createRemoteEvent=function(r){var i=this,o={},a=(si(this.targetStates,function(t,e){var n=i.targetDataForActiveTarget(t);n&&(e.current&&n.target.isDocumentQuery()&&(n=new w(n.target.path),null!==i.pendingDocumentUpdates.get(n)||i.targetContainsDocument(t,n)||i.removeDocumentFromTarget(t,n,new Is(n,r))),e.hasPendingChanges)&&(o[t]=e.toTargetChange(),e.clearPendingChanges())}),E()),t=(this.pendingDocumentTargetMapping.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){t=i.targetDataForActiveTarget(t);return!t||t.purpose===bu.LimboResolution||(n=!1)}),n&&(a=a.add(t))}),new Mh(r,o,this.pendingTargetResets,this.pendingDocumentUpdates,a));return this.pendingDocumentUpdates=Eo,this.pendingDocumentTargetMapping=jh(),this.pendingTargetResets=new S(b),t},Qh.prototype.addDocumentToTarget=function(t,e){var n;this.isActiveTarget(t)&&(n=this.targetContainsDocument(t,e.key)?k.Modified:k.Added,this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t)))},Qh.prototype.removeDocumentFromTarget=function(t,e,n){var r;this.isActiveTarget(t)&&(r=this.ensureTargetState(t),this.targetContainsDocument(t,e)?r.addDocumentChange(e,k.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n)&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))},Qh.prototype.removeTarget=function(t){delete this.targetStates[t]},Qh.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},Qh.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},Qh.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Bh),this.targetStates[t]},Qh.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new S(b),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},Qh.prototype.isActiveTarget=function(t){var e=null!==this.targetDataForActiveTarget(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},Qh.prototype.targetDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)},Qh.prototype.resetTarget=function(e){var n=this;y(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Bh,this.metadataProvider.getRemoteKeysForTarget(e).forEach(function(t){n.removeDocumentFromTarget(e,t,null)})},Qh.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)};var Kh=Qh;function Qh(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Eo,this.pendingDocumentTargetMapping=jh(),this.pendingTargetResets=new S(b)}function jh(){return new po(w.comparator)}function Gh(){return new po(w.comparator)}var Wh="RemoteStore",zh=(R.prototype.start=function(){return this.enableNetwork()},R.prototype.enableNetwork=function(){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(s.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},R.prototype.disableNetwork=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(s.Offline),[2]}})})},R.prototype.disableNetworkInternal=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),0<this.writePipeline.length&&(f(Wh,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},R.prototype.shutdown=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return f(Wh,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(s.Unknown),[2]}})})},R.prototype.listen=function(t){oi(this.listenTargets,t.targetId)||(this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t))},R.prototype.unlisten=function(t){y(oi(this.listenTargets,t),"unlisten called on target no currently watched: "+t),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),ci(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(s.Unknown))},R.prototype.getTargetDataForTarget=function(t){return this.listenTargets[t]||null},R.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},R.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},R.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},R.prototype.startWatchStream=function(){y(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Kh(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},R.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!ci(this.listenTargets)},R.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},R.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},R.prototype.onWatchStreamOpen=function(){return d(this,void 0,void 0,function(){var n=this;return m(this,function(t){return si(this.listenTargets,function(t,e){n.sendWatchRequest(e)}),[2]})})},R.prototype.onWatchStreamClose=function(e){return d(this,void 0,void 0,function(){return m(this,function(t){return void 0===e&&y(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(s.Unknown),[2]})})},R.prototype.onWatchStreamChange=function(n,r){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this.onlineStateTracker.set(s.Online),n instanceof qh&&n.state===Vh.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof xh?this.watchChangeAggregator.handleDocumentChange(n):n instanceof Fh?this.watchChangeAggregator.handleExistenceFilter(n):(y(n instanceof qh,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(T.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return e=t.sent(),0<=r.compareTo(e)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},R.prototype.raiseWatchSnapshot=function(r){var i=this,t=(y(!r.isEqual(T.MIN),"Can't raise event for unknown SnapshotVersion"),this.watchChangeAggregator.createRemoteEvent(r));return si(t.targetChanges,function(t,e){var n;0<e.resumeToken.length&&(n=i.listenTargets[t])&&(i.listenTargets[t]=n.withResumeToken(e.resumeToken,r))}),t.targetMismatches.forEach(function(t){var e=i.listenTargets[t];e&&(i.listenTargets[t]=e.withResumeToken(ei(),e.snapshotVersion),i.sendUnwatchRequest(t),t=new Iu(e.target,t,bu.ExistenceFilterMismatch,e.sequenceNumber),i.sendWatchRequest(t))}),this.syncEngine.applyRemoteEvent(t)},R.prototype.handleTargetError=function(t){var n=this,r=(y(!!t.cause,"Handling target error without a cause"),t.cause),i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return d(n,void 0,void 0,function(){return m(this,function(t){return oi(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,r)]):[2]})})})}),i},R.prototype.fillWritePipeline=function(){return d(this,void 0,void 0,function(){var e,n;return m(this,function(t){switch(t.label){case 0:return this.canAddToWritePipeline()?(e=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:t.sent(),t.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},R.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},R.prototype.outstandingWrites=function(){return this.writePipeline.length},R.prototype.addToWritePipeline=function(t){y(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},R.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},R.prototype.startWriteStream=function(){y(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},R.prototype.onWriteStreamOpen=function(){return d(this,void 0,void 0,function(){return m(this,function(t){return this.writeStream.writeHandshake(),[2]})})},R.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var t=0,e=r.writePipeline;t<e.length;t++){var n=e[t];r.writeStream.writeMutations(n.mutations)}}).catch(Wu)},R.prototype.onMutationResult=function(t,e){var n=this,r=(y(0<this.writePipeline.length,"Got result for empty write pipeline"),this.writePipeline.shift()),r=Ro.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(r).then(function(){return n.fillWritePipeline()})},R.prototype.onWriteStreamClose=function(n){return d(this,void 0,void 0,function(){var e=this;return m(this,function(t){return void 0===n&&y(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){e.shouldStartWriteStream()&&e.startWriteStream()})]:[2]})})},R.prototype.handleHandshakeError=function(e){return d(this,void 0,void 0,function(){return m(this,function(t){return Eh(e.code)?(f(Wh,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=ei(),[2,this.localStore.setLastStreamToken(ei()).catch(Wu)]):[2]})})},R.prototype.handleWriteError=function(i){return d(this,void 0,void 0,function(){var n,r=this;return m(this,function(t){return Eh(e=i.code)&&e!==p.ABORTED?(n=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(n.batchId,i).then(function(){return r.fillWritePipeline()})]):[2];var e})})},R.prototype.createTransaction=function(){return new bh(this.datastore)},R.prototype.restartNetwork=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(s.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},R.prototype.handleCredentialChange=function(){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(f(Wh,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},R.prototype.applyPrimaryState=function(e){return d(this,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(s.Unknown),t.label=4;case 4:return[2]}})})},R);function R(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(t){n.enqueueAndForget(function(){return d(o,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.canUseNetwork()?(f(Wh,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Th(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}Object.defineProperty(Yh.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(Yh.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),Yh.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},Yh.prototype._compareTo=function(t){return b(this._lat,t._lat)||b(this._long,t._long)};var Hh=Yh;function Yh(t,e){if(v("GeoPoint",arguments,2),pi("GeoPoint","number",1,t),pi("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new g(p.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new g(p.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}Xh.prototype.applyToLocalView=function(t,e){return new is(e,t)},Xh.prototype.applyToRemoteDocument=function(t,e){return e},Xh.prototype.computeBaseValue=function(t){return null},Xh.prototype.isEqual=function(t){return t instanceof Xh},Xh.instance=new Xh;var Jh=Xh;function Xh(){}$h.prototype.applyToLocalView=function(t,e){return this.apply(t)},$h.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},$h.prototype.apply=function(t){for(var n=il(t),e=0,r=this.elements;e<r.length;e++)(e=>{n.find(function(t){return t.isEqual(e)})||n.push(e)})(r[e]);return new vs(n)},$h.prototype.computeBaseValue=function(t){return null},$h.prototype.isEqual=function(t){return t instanceof $h&&ki(t.elements,this.elements)};var Zh=$h;function $h(t){this.elements=t}el.prototype.applyToLocalView=function(t,e){return this.apply(t)},el.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},el.prototype.apply=function(t){for(var n=il(t),e=0,r=this.elements;e<r.length;e++)(e=>{n=n.filter(function(t){return!t.isEqual(e)})})(r[e]);return new vs(n)},el.prototype.computeBaseValue=function(t){return null},el.prototype.isEqual=function(t){return t instanceof el&&ki(t.elements,this.elements)};var tl=el;function el(t){this.elements=t}rl.prototype.applyToLocalView=function(t,e){var n,t=this.computeBaseValue(t);return new(t instanceof Wa&&this.operand instanceof Wa?(n=t.internalValue+this.operand.internalValue,Wa):(n=t.internalValue+this.operand.internalValue,Ya))(n)},rl.prototype.applyToRemoteDocument=function(t,e){return y(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},rl.prototype.computeBaseValue=function(t){return t instanceof Ka?t:new Wa(0)},rl.prototype.isEqual=function(t){return t instanceof rl&&this.operand.isEqual(t.operand)};var nl=rl;function rl(t){this.operand=t}function il(t){return t instanceof vs?t.internalValue.slice():[]}al.prototype.isEqual=function(t){return t&&t.count===this.count};var ol=al;function al(t){this.count=t}(n={})[Cc.ASCENDING.name]="ASCENDING",n[Cc.DESCENDING.name]="DESCENDING";var sl=n,ul=((je={})[D.LESS_THAN.name]="LESS_THAN",je[D.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",je[D.GREATER_THAN.name]="GREATER_THAN",je[D.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",je[D.EQUAL.name]="EQUAL",je[D.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",je[D.IN.name]="IN",je[D.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",je),cl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(t,e){y(!ec(t),e+" is missing")}function ll(t){return"number"==typeof t?t:"string"==typeof t?Number(t):l("can't parse "+t)}_.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},_.prototype.unsafeCastProtoByteString=function(t){return t},_.prototype.fromRpcStatus=function(t){var e=void 0===t.code?p.UNKNOWN:Ih(t.code);return new g(e,t.message||"")},_.prototype.toInt32Value=function(t){return this.options.useProto3Json||ec(t)?t:{value:t}},_.prototype.fromInt32Value=function(t){return ec(t="object"==typeof t?t.value:t)?null:t},_.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},_.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);y(!!t,"Cannot deserialize null or undefined timestamp.");var e=ll(t.seconds||"0");return new ho(e,t.nanos||0)},_.prototype.fromIso8601String=function(t){var e=0,n=cl.exec(t),n=(y(!!n,"invalid timestamp: "+t),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n)),new Date(t)),t=Math.floor(n.getTime()/1e3);return new ho(t,e)},_.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},_.prototype.fromBlob=function(t){return"string"==typeof t?(y(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Li.fromBase64String(t)):(y(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Li.fromUint8Array(t))},_.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},_.prototype.fromVersion=function(t){return y(!!t,"Trying to deserialize version that isn't set"),T.fromTimestamp(this.fromTimestamp(t))},_.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},_.prototype.fromResourceName=function(t){t=ji.fromString(t);return y(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},_.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},_.prototype.fromName=function(t){t=this.fromResourceName(t);return y(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),y(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new w(this.extractLocalPathFromResourceName(t))},_.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},_.prototype.fromQueryPath=function(t){t=this.fromResourceName(t);return 4===t.length?ji.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(_.prototype,"encodedDatabaseId",{get:function(){return new ji(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),_.prototype.fullyQualifiedPrefixPath=function(t){return new ji(["projects",t.projectId,"databases",t.database])},_.prototype.extractLocalPathFromResourceName=function(t){return y(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},_.prototype.isValidResourceName=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},_.prototype.toValue=function(t){if(t instanceof xa)return{nullValue:"NULL_VALUE"};if(t instanceof Va)return{booleanValue:t.value()};if(t instanceof Wa)return{integerValue:""+t.value()};if(t instanceof Ya){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof Za?{stringValue:t.value()}:t instanceof ys?{mapValue:this.toMapValue(t)}:t instanceof vs?{arrayValue:this.toArrayValue(t)}:t instanceof es?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof ps?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof ss?{bytesValue:this.toBytes(t.value())}:t instanceof hs?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:l("Unknown FieldValue "+JSON.stringify(t))},_.prototype.fromValue=function(t){var e,n,r=this;if("nullValue"in t)return xa.INSTANCE;if("booleanValue"in t)return Va.of(t.booleanValue);if("integerValue"in t)return new Wa(ll(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Ya.NAN;if("Infinity"===t.doubleValue)return Ya.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ya.NEGATIVE_INFINITY}return new Ya(t.doubleValue)}return"stringValue"in t?new Za(t.stringValue):"mapValue"in t?this.fromFields(t.mapValue.fields||{}):"arrayValue"in t?(hl(t.arrayValue,"arrayValue"),e=t.arrayValue.values||[],new vs(e.map(function(t){return r.fromValue(t)}))):"timestampValue"in t?(hl(t.timestampValue,"timestampValue"),new es(this.fromTimestamp(t.timestampValue))):"geoPointValue"in t?(hl(t.geoPointValue,"geoPointValue"),e=t.geoPointValue.latitude||0,n=t.geoPointValue.longitude||0,new ps(new Hh(e,n))):"bytesValue"in t?(hl(t.bytesValue,"bytesValue"),e=this.fromBlob(t.bytesValue),new ss(e)):"referenceValue"in t?(hl(t.referenceValue,"referenceValue"),n=this.fromResourceName(t.referenceValue),e=new Fi(n.get(1),n.get(3)),n=new w(this.extractLocalPathFromResourceName(n)),new hs(e,n)):l("Unknown Value proto "+JSON.stringify(t))},_.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},_.prototype.toDocument=function(t){return y(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},_.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new C(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.fromValue(t)})},_.prototype.toFields=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.toValue(e)}),r},_.prototype.fromFields=function(t){var n=this,r=ys.EMPTY;return ui(t,function(t,e){r=r.set(new Hi([t]),n.fromValue(e))}),r},_.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},_.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.toValue(t))}),{values:n}},_.prototype.fromFound=function(t){var e=this,n=(y(!!t.found,"Tried to deserialize a found document from a missing document."),hl(t.found.name,"doc.found.name"),hl(t.found.updateTime,"doc.found.updateTime"),this.fromName(t.found.name)),r=this.fromVersion(t.found.updateTime);return new C(n,r,{},void 0,t.found,function(t){return e.fromValue(t)})},_.prototype.fromMissing=function(t){y(!!t.missing,"Tried to deserialize a missing document from a found document."),y(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),t=this.fromVersion(t.readTime);return new Is(e,t)},_.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):l("invalid batch get response: "+JSON.stringify(t))},_.prototype.toWatchTargetChangeState=function(t){switch(t){case Vh.Added:return"ADD";case Vh.Current:return"CURRENT";case Vh.NoChange:return"NO_CHANGE";case Vh.Removed:return"REMOVE";case Vh.Reset:return"RESET";default:return l("Unknown WatchTargetChangeState: "+t)}},_.prototype.toTestWatchChange=function(t){if(t instanceof Fh)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof xh){if(t.newDoc instanceof C)return e=t.newDoc,{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}};if(t.newDoc instanceof Is)return e=t.newDoc,{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}var e;return t instanceof qh?(e=void 0,t.cause&&(e={code:(t=>{if(void 0===t)return A.OK;switch(t){case p.OK:return A.OK;case p.CANCELLED:return A.CANCELLED;case p.UNKNOWN:return A.UNKNOWN;case p.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case p.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case p.INTERNAL:return A.INTERNAL;case p.UNAVAILABLE:return A.UNAVAILABLE;case p.UNAUTHENTICATED:return A.UNAUTHENTICATED;case p.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case p.NOT_FOUND:return A.NOT_FOUND;case p.ALREADY_EXISTS:return A.ALREADY_EXISTS;case p.PERMISSION_DENIED:return A.PERMISSION_DENIED;case p.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case p.ABORTED:return A.ABORTED;case p.OUT_OF_RANGE:return A.OUT_OF_RANGE;case p.UNIMPLEMENTED:return A.UNIMPLEMENTED;case p.DATA_LOSS:return A.DATA_LOSS;default:return l("Unknown status code: "+t)}})(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:e}}):l("Unrecognized watch change: "+JSON.stringify(t))},_.prototype.fromWatchChange=function(t){var e=this;if("targetChange"in t){hl(t.targetChange,"targetChange");var n=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=t.targetChange.resumeToken||this.emptyByteString(),o=t.targetChange.cause,o=o&&this.fromRpcStatus(o),n=new qh(n,r,i,o||null)}else if("documentChange"in t){hl(t.documentChange,"documentChange");var r=t.documentChange,a=(hl(r.document,"documentChange.name"),hl(r.document.name,"documentChange.document.name"),hl(r.document.updateTime,"documentChange.document.updateTime"),this.fromName(r.document.name)),s=this.fromVersion(r.document.updateTime),u=new C(a,s,{},void 0,r.document,function(t){return e.fromValue(t)}),i=r.targetIds||[],c=r.removedTargetIds||[];n=new xh(i,c,u.key,u)}else if("documentDelete"in t){hl(t.documentDelete,"documentDelete");o=t.documentDelete;hl(o.document,"documentDelete.document"),a=this.fromName(o.document),s=o.readTime?this.fromVersion(o.readTime):T.forDeletedDoc(),u=new Is(a,s),c=o.removedTargetIds||[],n=new xh([],c,u.key,u)}else if("documentRemove"in t){hl(t.documentRemove,"documentRemove");r=t.documentRemove;hl(r.document,"documentRemove"),a=this.fromName(r.document),c=r.removedTargetIds||[],n=new xh([],c,a,null)}else{if(!("filter"in t))return l("Unknown change type "+JSON.stringify(t));hl(t.filter,"filter");i=t.filter;hl(i.targetId,"filter.targetId");s=new ol(i.count||0),o=i.targetId;n=new Fh(o,s)}return n},_.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Vh.NoChange:"ADD"===t?Vh.Added:"REMOVE"===t?Vh.Removed:"CURRENT"===t?Vh.Current:"RESET"===t?Vh.Reset:l("Got unexpected TargetChange.state: "+t)},_.prototype.versionFromListenResponse=function(t){return"targetChange"in t&&(!(t=t.targetChange).targetIds||!t.targetIds.length)&&t.readTime?this.fromVersion(t.readTime):T.MIN},_.prototype.toMutation=function(t){var e,n=this;if(t instanceof ba)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof Ra)e={delete:this.toName(t.key)};else if(t instanceof Sa)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Ca))return l("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.toFieldTransform(t)})}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},_.prototype.fromMutation=function(t){var e,n,r,i=this,o=t.currentDocument?this.fromPrecondition(t.currentDocument):da.NONE;return t.update?(hl(t.update.name,"name"),n=this.fromName(t.update.name),e=this.fromFields(t.update.fields||{}),t.updateMask?(r=this.fromDocumentMask(t.updateMask),new Sa(n,e,r,o)):new ba(n,e,o)):t.delete?(n=this.fromName(t.delete),new Ra(n,o)):t.transform?(n=this.fromName(t.transform.document),r=t.transform.fieldTransforms.map(function(t){return i.fromFieldTransform(t)}),y(!0===o.exists,'Transforms only support precondition "exists == true"'),new Ca(n,r)):l("unknown mutation proto: "+JSON.stringify(t))},_.prototype.toPrecondition=function(t){return y(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:l("Unknown precondition")},_.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?da.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?da.exists(t.exists):da.NONE},_.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e),e=(r.isEqual(T.MIN)&&(r=this.fromVersion(e)),null);return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults.map(function(t){return n.fromValue(t)})),new fa(r,e)},_.prototype.fromWriteResults=function(t,e){var n=this;return t&&0<t.length?(y(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.fromWriteResult(t,e)})):[]},_.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof Jh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof tl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(t){return e.toValue(t)})}};if(n instanceof nl)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw l("Unknown transform: "+t.transform)},_.prototype.fromFieldTransform=function(t){var e=this,n=null,r=("setToServerValue"in t?(y("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Jh.instance):"appendMissingElements"in t?(r=t.appendMissingElements.values||[],n=new Zh(r.map(function(t){return e.fromValue(t)}))):"removeAllFromArray"in t?(r=t.removeAllFromArray.values||[],n=new tl(r.map(function(t){return e.fromValue(t)}))):"increment"in t?(y((r=this.fromValue(t.increment))instanceof Ka,"NUMERIC_ADD transform requires a NumberValue"),n=new nl(r)):l("Unknown transform proto: "+JSON.stringify(t)),Hi.fromServerFormat(t.fieldPath));return new ha(r,n)},_.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},_.prototype.fromDocumentsTarget=function(t){var e=t.documents.length,e=(y(1===e,"DocumentsTarget contained other than 1 document: "+e),t.documents[0]);return ac.atPath(this.fromQueryPath(e)).toTarget()},_.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path,n=(null!==t.collectionGroup?(y(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(y(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),this.toFilter(t.filters)),n=(n&&(e.structuredQuery.where=n),this.toOrder(t.orderBy)),n=(n&&(e.structuredQuery.orderBy=n),this.toInt32Value(t.limit));return null!==n&&(e.structuredQuery.limit=n),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},_.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),t=t.structuredQuery,n=t.from?t.from.length:0,r=null,n=(0<n&&(y(1===n,"StructuredQuery.from with more than one collection is not supported."),(n=t.from[0]).allDescendants?r=n.collectionId:e=e.child(n.collectionId)),[]),i=(t.where&&(n=this.fromFilter(t.where)),[]),o=(t.orderBy&&(i=this.fromOrder(t.orderBy)),null),a=(t.limit&&(o=this.fromInt32Value(t.limit)),null),s=(t.startAt&&(a=this.fromCursor(t.startAt)),null);return t.endAt&&(s=this.fromCursor(t.endAt)),new ac(e,r,i,n,o,rc.First,a,s).toTarget()},_.prototype.toListenRequestLabels=function(t){t=this.toLabel(t.purpose);return null==t?null:{"goog-listen-tags":t}},_.prototype.toLabel=function(t){switch(t){case bu.Listen:return null;case bu.ExistenceFilterMismatch:return"existence-filter-mismatch";case bu.LimboResolution:return"limbo-document";default:return l("Unrecognized query purpose: "+t)}},_.prototype.toTarget=function(t){var e=t.target;return(e=e.isDocumentQuery()?{documents:this.toDocumentsTarget(e)}:{query:this.toQueryTarget(e)}).targetId=t.targetId,0<t.resumeToken.length&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},_.prototype.toFilter=function(t){var e=this;if(0!==t.length)return 1===(t=t.map(function(t){return t instanceof uc?e.toUnaryOrFieldFilter(t):l("Unrecognized filter: "+JSON.stringify(t))})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}},_.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.fromFilter(t)}).reduce(function(t,e){return t.concat(e)}):l("Unknown filter: "+JSON.stringify(t)):[]},_.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.toPropertyOrder(t)})},_.prototype.fromOrder=function(t){var e=this;return t.map(function(t){return e.fromPropertyOrder(t)})},_.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.toValue(t)})}},_.prototype.fromCursor=function(t){var e=this,n=!!t.before,t=t.values.map(function(t){return e.fromValue(t)});return new Nc(t,n)},_.prototype.toDirection=function(t){return sl[t.name]},_.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Cc.ASCENDING;case"DESCENDING":return Cc.DESCENDING;default:return}},_.prototype.toOperatorName=function(t){return ul[t.name]},_.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return D.EQUAL;case"GREATER_THAN":return D.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return D.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return D.LESS_THAN;case"LESS_THAN_OR_EQUAL":return D.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return D.ARRAY_CONTAINS;case"IN":return D.IN;case"ARRAY_CONTAINS_ANY":return D.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return l("Unspecified operator");default:return l("Unknown operator")}},_.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},_.prototype.fromFieldPathReference=function(t){return Hi.fromServerFormat(t.fieldPath)},_.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},_.prototype.fromPropertyOrder=function(t){return new kc(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},_.prototype.fromFieldFilter=function(t){return uc.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},_.prototype.toUnaryOrFieldFilter=function(t){if(t.op===D.EQUAL){if(t.value.isEqual(Ya.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(xa.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},_.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return uc.create(e,D.EQUAL,Ya.NAN);case"IS_NULL":e=this.fromFieldPathReference(t.unaryFilter.field);return uc.create(e,D.EQUAL,xa.INSTANCE);case"OPERATOR_UNSPECIFIED":return l("Unspecified filter");default:return l("Unknown filter")}},_.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}},_.prototype.fromDocumentMask=function(t){t=(t.fieldPaths||[]).map(function(t){return Hi.fromServerFormat(t)});return ua.fromArray(t)};var fl=_;function _(t,e){this.databaseId=t,this.options=e}function pl(){this.viewSnap=null,this.targetId=0,this.listeners=[]}ml.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new pl,this.queries.set(e,r)),r.listeners.push(t),y(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},ml.prototype.unlisten=function(o){return d(this,void 0,void 0,function(){var e,n,r,i;return m(this,function(t){return e=o.query,n=!1,(r=this.queries.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]})})},ml.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,o=this.queries.get(o);if(o){for(var a=0,s=o.listeners;a<s.length;a++)s[a].onViewSnapshot(i)&&(e=!0);o.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},ml.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},ml.prototype.onOnlineStateChange=function(i){this.onlineState=i;var o=!1;this.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].applyOnlineStateChange(i)&&(o=!0)}),o&&this.raiseSnapshotsInSyncEvent()},ml.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},ml.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},ml.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(t){t.next()})};var dl=ml;function ml(t){this.syncEngine=t,this.queries=new ks(function(t){return t.canonicalId()}),this.onlineState=s.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}gl.prototype.onViewSnapshot=function(t){if(y(0<t.docChanges.length||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==k.Metadata&&e.push(i)}t=new Rh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},gl.prototype.onError=function(t){this.queryObserver.error(t)},gl.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},gl.prototype.shouldRaiseInitialEvent=function(t,e){var n;return y(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache||(n=e!==s.Offline,this.options.waitForSyncWhenOnline&&n?(y(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===s.Offline)},gl.prototype.shouldRaiseEvent=function(t){var e;return 0<t.docChanges.length||(e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites,!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges)},gl.prototype.raiseInitialEvent=function(t){y(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Rh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)};var yl=gl;function gl(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=s.Unknown,this.options=n||{}}bl.fromSnapshot=function(t,e){for(var n=E(),r=E(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case k.Added:n=n.add(a.doc.key);break;case k.Removed:r=r.add(a.doc.key)}}return new bl(t,e.fromCache,n,r)};var vl=bl;function bl(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}function wl(t){this.key=t}function Tl(t){this.key=t}Object.defineProperty(El.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),El.prototype.computeDocChanges=function(t,e){var a=this,s=e?e.changeSet:new Ah,u=(e||this).documentSet,c=(e||this).mutatedKeys,h=u,l=!1,f=this.query.hasLimitToFirst()&&u.size===this.query.limit?u.last():null,p=this.query.hasLimitToLast()&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(t,e){var n=u.get(t),e=e instanceof C?e:null,r=(e&&(y(t.isEqual(e.key),"Mismatching keys found in document changes: "+t+" != "+e.key),e=a.query.matches(e)?e:null),!!n&&a.mutatedKeys.has(n.key)),i=!!e&&(e.hasLocalMutations||a.mutatedKeys.has(e.key)&&e.hasCommittedMutations),o=!1;n&&e?n.data().isEqual(e.data())?r!==i&&(s.track({type:k.Metadata,doc:e}),o=!0):!a.shouldWaitForSyncedDocument(n,e)&&(s.track({type:k.Modified,doc:e}),o=!0,f&&0<a.query.docComparator(e,f)||p&&a.query.docComparator(e,p)<0)&&(l=!0):!n&&e?(s.track({type:k.Added,doc:e}),o=!0):n&&!e&&(s.track({type:k.Removed,doc:n}),o=!0,f||p)&&(l=!0),o&&(c=e?(h=h.add(e),i?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;h.size>this.query.limit;){var n=this.query.hasLimitToFirst()?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);s.track({type:k.Removed,doc:n})}return y(!l||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:h,changeSet:s,needsRefill:l,mutatedKeys:c}},El.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},El.prototype.applyChanges=function(t,e,n){var o=this,r=(y(!t.needsRefill,"Cannot apply changes that need a refill"),this.documentSet),i=(this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys,t.changeSet.getChanges()),n=(i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.docComparator(t.doc,e.doc);function n(t){switch(t){case k.Added:return 1;case k.Modified:case k.Metadata:return 2;case k.Removed:return 0;default:return l("Unknown ChangeType: "+t)}}var r,i}),this.applyTargetChange(n),e?this.updateLimboDocuments():[]),e=0===this.limboDocuments.size&&this.current?Ch.Synced:Ch.Local,a=e!==this.syncState;return this.syncState=e,0!==i.length||a?{snapshot:new Rh(this.query,t.documentSet,r,i,t.mutatedKeys,e===Ch.Local,a,!1),limboChanges:n}:{limboChanges:n}},El.prototype.applyOnlineStateChange=function(t){return this.current&&t===s.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ah,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},El.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},El.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.add(t)}),t.modifiedDocuments.forEach(function(t){return y(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")}),t.removedDocuments.forEach(function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)}),this.current=t.current)},El.prototype.updateLimboDocuments=function(){var e,n,r=this;return this.current?(e=this.limboDocuments,this.limboDocuments=E(),this.documentSet.forEach(function(t){r.shouldBeInLimbo(t.key)&&(r.limboDocuments=r.limboDocuments.add(t.key))}),n=[],e.forEach(function(t){r.limboDocuments.has(t)||n.push(new Tl(t))}),this.limboDocuments.forEach(function(t){e.has(t)||n.push(new wl(t))}),n):[]},El.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=E();t=this.computeDocChanges(t.documents);return this.applyChanges(t,!0)},El.prototype.computeInitialSnapshot=function(){return Rh.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ch.Local)};var Sl=El;function El(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=E(),this.mutatedKeys=E(),this.documentSet=new Dh(t.docComparator.bind(t))}Cl.prototype.run=function(){this.runWithBackOff()},Cl.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun(function(){return d(t,void 0,void 0,function(){var e,n,r=this;return m(this,function(t){return e=this.remoteStore.createTransaction(),(n=this.tryRunUpdateFunction(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.handleTransactionError(t)})})}).catch(function(t){r.handleTransactionError(t)}),[2]})})})},Cl.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!ec(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},Cl.prototype.handleTransactionError=function(t){var e=this;0<this.retries&&this.isRetryableTransactionError(t)?(--this.retries,this.asyncQueue.enqueueAndForget(function(){return e.runWithBackOff(),Promise.resolve()})):this.deferred.reject(t)},Cl.prototype.isRetryableTransactionError=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!Eh(t))};var Il=Cl;function Cl(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new oh(this.asyncQueue,Zi.RetryTransaction)}function Dl(t,e,n){this.query=t,this.targetId=e,this.view=n}function Nl(t){this.key=t,this.receivedDocument=!1}var Al="SyncEngine",kl=(Object.defineProperty(M.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),M.prototype.subscribe=function(t){y(null!==t,"SyncEngine listener cannot be null"),y(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},M.prototype.listen=function(o){return d(this,void 0,void 0,function(){var e,n,r,i;return m(this,function(t){switch(t.label){case 0:return this.assertSubscribed("listen()"),(i=this.queryViewsByQuery.get(o))?(e=i.targetId,this.sharedClientState.addLocalQueryTarget(e),n=i.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(o.toTarget())];case 2:return r=t.sent(),i=this.sharedClientState.addLocalQueryTarget(r.targetId),e=r.targetId,[4,this.initializeViewAndComputeSnapshot(o,e,"current"===i)];case 3:n=t.sent(),this.isPrimary&&this.remoteStore.listen(r),t.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}})})},M.prototype.initializeViewAndComputeSnapshot=function(i,o,a){return d(this,void 0,void 0,function(){var e,n,r;return m(this,function(t){switch(t.label){case 0:return[4,this.localStore.executeQuery(i,!0)];case 1:return n=t.sent(),e=new Sl(i,n.remoteKeys),n=e.computeDocChanges(n.documents),r=Oh.createSynthesizedTargetChangeForCurrentChange(o,a&&this.onlineState!==s.Offline),y(0===(n=e.applyChanges(n,!0===this.isPrimary,r)).limboChanges.length,"View returned limbo docs before target ack from the server."),y(!!n.snapshot,"applyChanges for new view should always return a snapshot"),r=new Dl(i,o,e),this.queryViewsByQuery.set(i,r),this.queriesByTarget[o]||(this.queriesByTarget[o]=[]),this.queriesByTarget[o].push(i),[2,n.snapshot]}})})},M.prototype.synchronizeViewAndComputeSnapshot=function(n){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return[4,this.localStore.executeQuery(n.query,!0)];case 1:return e=t.sent(),e=n.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(n.targetId,e.limboChanges),[2,e]}})})},M.prototype.unlisten=function(i){return d(this,void 0,void 0,function(){var e,n,r=this;return m(this,function(t){switch(t.label){case 0:return this.assertSubscribed("unlisten()"),y(!!(e=this.queryViewsByQuery.get(i)),"Trying to unlisten on query not found:"+i),1<(n=this.queriesByTarget[e.targetId]).length?(this.queriesByTarget[e.targetId]=n.filter(function(t){return!t.isEqual(i)}),this.queryViewsByQuery.delete(i),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseTarget(e.targetId,!1).then(function(){r.sharedClientState.clearQueryState(e.targetId),r.remoteStore.unlisten(e.targetId),r.removeAndCleanupTarget(e.targetId)}).catch(Wu)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(e.targetId),[4,this.localStore.releaseTarget(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},M.prototype.write=function(n,r){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(n)];case 1:return e=t.sent(),this.sharedClientState.addPendingMutation(e.batchId),this.addMutationCallback(e.batchId,r),[4,this.emitNewSnapsAndNotifyLocalStore(e.changes)];case 2:return t.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return t.sent(),[2]}})})},M.prototype.runTransaction=function(t,e,n){new Il(t,this.remoteStore,e,n).run()},M.prototype.applyRemoteEvent=function(r){return d(this,void 0,void 0,function(){var e,n=this;return m(this,function(t){switch(t.label){case 0:this.assertSubscribed("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(r)];case 2:return e=t.sent(),ui(r.targetChanges,function(t,e){t=n.limboResolutionsByTarget[Number(t)];t&&(y(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.addedDocuments.size?t.receivedDocument=!0:0<e.modifiedDocuments.size?y(t.receivedDocument,"Received change for limbo target document without add."):0<e.removedDocuments.size&&(y(t.receivedDocument,"Received remove for limbo target document without add."),t.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,Wu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},M.prototype.applyOnlineStateChange=function(n,t){var r;(this.isPrimary&&t===vh.RemoteStore||!this.isPrimary&&t===vh.SharedClientState)&&(this.assertSubscribed("applyOnlineStateChange()"),r=[],this.queryViewsByQuery.forEach(function(t,e){e=e.view.applyOnlineStateChange(n);y(0===e.limboChanges.length,"OnlineState should not affect limbo documents."),e.snapshot&&r.push(e.snapshot)}),this.syncEngineListener.onOnlineStateChange(n),this.syncEngineListener.onWatchChange(r),this.onlineState=n,this.isPrimary)&&this.sharedClientState.setOnlineState(n)},M.prototype.rejectListen=function(i,o){return d(this,void 0,void 0,function(){var e,n,r=this;return m(this,function(t){switch(t.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(i,"rejected",o),e=this.limboResolutionsByTarget[i],(e=e&&e.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[i],n=(n=new po(w.comparator)).insert(e,new Is(e,T.forDeletedDoc())),e=E().add(e),n=new Mh(T.MIN,{},new S(b),n,e),[2,this.applyRemoteEvent(n)]):[3,1];case 1:return[4,this.localStore.releaseTarget(i,!1).then(function(){return r.removeAndCleanupTarget(i,o)}).catch(Wu)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},M.prototype.applyBatchState=function(n,r,i){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(e=t.sent())?(f(Al,"Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):l("Unknown batchState: "+r),t.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 5:return t.sent(),[2]}})})},M.prototype.applySuccessfulWrite=function(r){return d(this,void 0,void 0,function(){var e,n;return m(this,function(t){switch(t.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=r.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(r)];case 2:return n=t.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return t.sent(),[3,6];case 4:return[4,Wu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},M.prototype.rejectFailedWrite=function(n,r){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(n,r),this.triggerPendingWritesCallbacks(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(n)];case 2:return e=t.sent(),this.sharedClientState.updateMutationState(n,"rejected",r),[4,this.emitNewSnapsAndNotifyLocalStore(e)];case 3:return t.sent(),[3,6];case 4:return[4,Wu(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},M.prototype.registerPendingWritesCallback=function(r){return d(this,void 0,void 0,function(){var e,n;return m(this,function(t){switch(t.label){case 0:return this.remoteStore.canUseNetwork()||f(Al,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=t.sent())?r.resolve():((n=this.pendingWritesCallbacks.get(e)||[]).push(r),this.pendingWritesCallbacks.set(e,n)),[2]}})})},M.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach(function(t){t.resolve()}),this.pendingWritesCallbacks.delete(t)},M.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach(function(t){t.forEach(function(t){t.reject(new g(p.CANCELLED,e))})}),this.pendingWritesCallbacks.clear()},M.prototype.addMutationCallback=function(t,e){var n=(n=(n=this.mutationUserCallbacks[this.currentUser.toKey()])||new po(b)).insert(t,e);this.mutationUserCallbacks[this.currentUser.toKey()]=n},M.prototype.processUserCallback=function(t,e){var n,r=this.mutationUserCallbacks[this.currentUser.toKey()];r&&((n=r.get(t))&&(y(t===r.minKey(),"Mutation callbacks processed out-of-order?"),e?n.reject(e):n.resolve(),r=r.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=r)},M.prototype.removeAndCleanupTarget=function(t,e){var n=this;void 0===e&&(e=null),this.sharedClientState.removeLocalQueryTarget(t),y(this.queriesByTarget[t]&&0!==this.queriesByTarget[t].length,"There are no queries mapped to target id "+t);for(var r,i=0,o=this.queriesByTarget[t];i<o.length;i++){var a=o[i];this.queryViewsByQuery.delete(a),e&&this.syncEngineListener.onWatchError(a,e)}delete this.queriesByTarget[t],this.isPrimary&&(r=this.limboDocumentRefs.referencesForId(t),this.limboDocumentRefs.removeReferencesForId(t),r.forEach(function(t){n.limboDocumentRefs.containsKey(t)||n.removeLimboTarget(t)}))},M.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},M.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof wl?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof Tl?(f(Al,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):l("Unknown limbo change: "+JSON.stringify(i))}},M.prototype.trackLimboChange=function(t){var e,n,t=t.key;this.limboTargetsByKey.get(t)||(f(Al,"New document in limbo: "+t),e=this.limboTargetIdGenerator.next(),n=ac.atPath(t.path),this.limboResolutionsByTarget[e]=new Nl(t),this.remoteStore.listen(new Iu(n.toTarget(),e,bu.LimboResolution,Vi.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,e))},M.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},M.prototype.emitNewSnapsAndNotifyLocalStore=function(a,s){return d(this,void 0,void 0,function(){var r,i,e,o=this;return m(this,function(t){switch(t.label){case 0:return r=[],i=[],e=[],this.queryViewsByQuery.forEach(function(t,n){e.push(Promise.resolve().then(function(){var e=n.view.computeDocChanges(a);return e.needsRefill?o.localStore.executeQuery(n.query,!1).then(function(t){t=t.documents;return n.view.computeDocChanges(t,e)}):e}).then(function(t){var e=s&&s.targetChanges[n.targetId],t=n.view.applyChanges(t,!0===o.isPrimary,e);o.updateTrackedLimbos(n.targetId,t.limboChanges),t.snapshot&&(o.isPrimary&&o.sharedClientState.updateQueryState(n.targetId,t.snapshot.fromCache?"not-current":"current"),r.push(t.snapshot),e=vl.fromSnapshot(n.targetId,t.snapshot),i.push(e))}))}),[4,Promise.all(e)];case 1:return t.sent(),this.syncEngineListener.onWatchChange(r),[4,this.localStore.notifyLocalViewChanges(i)];case 2:return t.sent(),[2]}})})},M.prototype.assertSubscribed=function(t){y(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},M.prototype.handleCredentialChange=function(n){return d(this,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(n),this.currentUser=n,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(n)]):[3,3];case 1:return e=t.sent(),this.sharedClientState.handleUserChange(n,e.removedBatchIds,e.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(e.affectedDocuments)];case 2:t.sent(),t.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return t.sent(),[2]}})})},M.prototype.applyPrimaryState=function(u){return d(this,void 0,void 0,function(){var e,n,r,i,o,a,s=this;return m(this,function(t){switch(t.label){case 0:return!0!==u||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return t.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(e=t.sent(),n=0,r=e;n<r.length;n++)i=r[n],this.remoteStore.listen(i);return[3,7];case 3:return!1!==u||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],a=Promise.resolve(),si(this.queriesByTarget,function(t,e){s.sharedClientState.isLocalQueryTarget(t)?o.push(t):a=a.then(function(){return s.removeAndCleanupTarget(t),s.localStore.releaseTarget(t,!0)}),s.remoteStore.unlisten(t)}),[4,a]);case 4:return t.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(o)];case 5:return t.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},M.prototype.resetLimboDocuments=function(){var e=this;si(this.limboResolutionsByTarget,function(t){e.remoteStore.unlisten(t)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new po(w.comparator)},M.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(p){return d(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h,l,f;return m(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=p,t.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return t.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=t.sent(),u=0,c=s,t.label=4;case 4:return u<c.length?(l=c[u],y(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(l=t.sent()).snapshot&&n.push(l.snapshot),t.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return y(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return y(!!(f=t.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(f)];case 10:return a=t.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(f),o,!1)];case 11:t.sent(),t.label=12;case 12:e.push(a),t.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,e]}})})},M.prototype.synthesizeTargetToQuery=function(t){return new ac(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,rc.First,t.startAt,t.endAt)},M.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},M.prototype.applyTargetState=function(r,i,o){return d(this,void 0,void 0,function(){var e,n;return m(this,function(t){switch(t.label){case 0:if(this.isPrimary)return f(Al,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[r])return[3,7];switch(i){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return e=t.sent(),n=Mh.createSynthesizedRemoteEventForCurrentChange(r,"current"===i),[4,this.emitNewSnapsAndNotifyLocalStore(e,n)];case 3:return t.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(r,!0)];case 5:return t.sent(),this.removeAndCleanupTarget(r,o),[3,7];case 6:l("Unexpected target state: "+i),t.label=7;case 7:return[2]}})})},M.prototype.applyActiveTargetsChange=function(l,f){return d(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c,h=this;return m(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=l,t.label=1;case 1:return e<n.length?(c=n[e],y(!this.queriesByTarget[c],"Trying to add an already active target"),[4,this.localStore.getTarget(c)]):[3,6];case 2:return y(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateTarget(r)];case 3:return i=t.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(r),i.targetId,!1)];case 4:t.sent(),this.remoteStore.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){return m(this,function(t){switch(t.label){case 0:return a.queriesByTarget[e]?[4,a.localStore.releaseTarget(e,!1).then(function(){h.remoteStore.unlisten(e),h.removeAndCleanupTarget(e)}).catch(Wu)]:[2,"continue"];case 1:return t.sent(),[2]}})},a=this,s=0,u=f,t.label=7;case 7:return s<u.length?(c=u[s],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return s++,[3,7];case 10:return[2]}})})},M.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},M.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},M.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];if(e&&e.receivedDocument)return E().add(e.key);var n=E(),e=this.queriesByTarget[t];if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r],a=this.queryViewsByQuery.get(o);y(!!a,"No query view found for "+o),n=n.unionWith(a.view.syncedDocuments)}return n},M);function M(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new ks(function(t){return t.canonicalId()}),this.queriesByTarget={},this.limboTargetsByKey=new po(w.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Fc,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ta.forSyncEngine(),this.isPrimary=void 0,this.onlineState=s.Unknown}_l.prototype.isAuthenticated=function(){return null!=this.uid},_l.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},_l.prototype.isEqual=function(t){return t.uid===this.uid},_l.UNAUTHENTICATED=new _l(null),_l.GOOGLE_CREDENTIALS=new _l("google-credentials-uid"),_l.FIRST_PARTY=new _l("first-party-uid");var Rl=_l;function _l(t){this.uid=t}var Ml="firestore_clients";function Ll(t,e){return y(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),Ml+"_"+t+"_"+e}var Ol="firestore_mutations";function Pl(t,e,n){t=Ol+"_"+t+"_"+n;return e.isAuthenticated()&&(t+="_"+e.uid),t}var xl="firestore_targets";function Fl(t,e){return xl+"_"+t+"_"+e}var ql="SharedClientState",Vl=(Bl.fromWebStorageEntry=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new g(r.error.code,r.error.message)),i?new Bl(t,e,r.state,o):(Xr(ql,"Failed to parse mutation state for ID '"+e+"': "+n),null)},Bl.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Bl);function Bl(t,e,n,r){this.user=t,this.batchId=e,this.state=n,y(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}Kl.fromWebStorageEntry=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new g(n.error.code,n.error.message)),r?new Kl(t,n.state,i):(Xr(ql,"Failed to parse target state for ID '"+t+"': "+e),null)},Kl.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)};var Ul=Kl;function Kl(t,e,n){this.targetId=t,this.state=e,y(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}jl.fromWebStorageEntry=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=No,o=0;r&&o<n.activeTargetIds.length;++o)r=nc(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new jl(t,i):(Xr(ql,"Failed to parse client data for instance '"+t+"': "+e),null)};var Ql=jl;function jl(t,e){this.clientId=t,this.activeTargetIds=e}Wl.fromWebStorageEntry=function(t){var e=JSON.parse(t);return"object"==typeof e&&e.onlineState in s&&"string"==typeof e.clientId?new Wl(e.clientId,s[e.onlineState]):(Xr(ql,"Failed to parse online state: "+t),null)};var Gl=Wl;function Wl(t,e){this.clientId=t,this.onlineState=e}Hl.prototype.addQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Hl.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Hl.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)};var zl=Hl;function Hl(){this.activeTargetIds=No}L.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},L.prototype.start=function(){return d(this,void 0,void 0,function(){var e,n,r,i,o,a,s,u,c=this;return m(this,function(t){switch(t.label){case 0:return y(!this.started,"WebStorageSharedClientState already started"),y(null!==this.syncEngine,"syncEngine property must be set before calling start()"),y(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(o=t.sent(),e=0,n=o;e<n.length;e++)(i=n[e])!==this.localClientId&&(r=this.getItem(Ll(this.persistenceKey,i)))&&(i=Ql.fromWebStorageEntry(i,r))&&(this.activeClients[i.clientId]=i);for(this.persistClientState(),(o=this.storage.getItem(this.onlineStateKey))&&(o=this.fromWebStorageOnlineState(o))&&this.handleOnlineStateEvent(o),a=0,s=this.earlyEvents;a<s.length;a++)u=s[a],this.handleWebStorageEvent(u);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return c.shutdown()}),this.started=!0,[2]}})})},L.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},L.prototype.getAllActiveQueryTargets=function(){var n=No;return ui(this.activeClients,function(t,e){n=n.unionWith(e.activeTargetIds)}),n},L.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},L.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},L.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},L.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(e=this.storage.getItem(Fl(this.persistenceKey,t)))&&(e=Ul.fromWebStorageEntry(t,e))&&(n=e.state),this.localClientState.addQueryTarget(t),this.persistClientState(),n},L.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},L.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},L.prototype.clearQueryState=function(t){this.removeItem(Fl(this.persistenceKey,t))},L.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},L.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.removeMutationState(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},L.prototype.setOnlineState=function(t){this.persistOnlineState(t)},L.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},L.prototype.getItem=function(t){var e=this.storage.getItem(t);return f(ql,"READ",t,e),e},L.prototype.setItem=function(t,e){f(ql,"SET",t,e),this.storage.setItem(t,e)},L.prototype.removeItem=function(t){f(ql,"REMOVE",t),this.storage.removeItem(t)},L.prototype.handleWebStorageEvent=function(i){var t=this;i.storageArea===this.storage&&(f(ql,"EVENT",i.key,i.newValue),i.key===this.localClientStorageKey?Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state"):this.queue.enqueueAndForget(function(){return d(t,void 0,void 0,function(){var e,n,r;return m(this,function(t){if(this.started){if(null!==i.key)if(this.clientStateKeyRe.test(i.key)){if(null==i.newValue)return e=this.fromWebStorageClientStateKey(i.key),[2,this.handleClientStateEvent(e,null)];if(e=this.fromWebStorageClientState(i.key,i.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(i.key)){if(null!==i.newValue&&(n=this.fromWebStorageMutationMetadata(i.key,i.newValue)))return[2,this.handleMutationBatchEvent(n)]}else if(this.queryTargetKeyRe.test(i.key)){if(null!==i.newValue&&(n=this.fromWebStorageQueryTargetMetadata(i.key,i.newValue)))return[2,this.handleQueryTargetEvent(n)]}else if(i.key===this.onlineStateKey){if(null!==i.newValue&&(r=this.fromWebStorageOnlineState(i.newValue)))return[2,this.handleOnlineStateEvent(r)]}else i.key===this.sequenceNumberKey&&(y(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(r=(t=>{var e=Vi.INVALID;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){Xr(ql,"Failed to read sequence number from WebStorage",t)}return e})(i.newValue))!==Vi.INVALID)&&this.sequenceNumberHandler(r)}else this.earlyEvents.push(i);return[2]})})}))},Object.defineProperty(L.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),L.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},L.prototype.persistMutationState=function(t,e,n){e=new Vl(this.currentUser,t,e,n),n=Pl(this.persistenceKey,this.currentUser,t);this.setItem(n,e.toWebStorageJSON())},L.prototype.removeMutationState=function(t){t=Pl(this.persistenceKey,this.currentUser,t);this.removeItem(t)},L.prototype.persistOnlineState=function(t){t={clientId:this.localClientId,onlineState:s[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},L.prototype.persistQueryTargetState=function(t,e,n){var r=Fl(this.persistenceKey,t),t=new Ul(t,e,n);this.setItem(r,t.toWebStorageJSON())},L.prototype.fromWebStorageClientStateKey=function(t){t=this.clientStateKeyRe.exec(t);return t?t[1]:null},L.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return y(null!==n,"Cannot parse client state key '"+t+"'"),Ql.fromWebStorageEntry(n,e)},L.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t),t=(y(null!==n,"Cannot parse mutation batch key '"+t+"'"),Number(n[1])),n=void 0!==n[2]?n[2]:null;return Vl.fromWebStorageEntry(new Rl(n),t,e)},L.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t),t=(y(null!==n,"Cannot parse query target key '"+t+"'"),Number(n[1]));return Ul.fromWebStorageEntry(t,e)},L.prototype.fromWebStorageOnlineState=function(t){return Gl.fromWebStorageEntry(t)},L.prototype.handleMutationBatchEvent=function(e){return d(this,void 0,void 0,function(){return m(this,function(t){return e.user.uid!==this.currentUser.uid?(f(ql,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]})})},L.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},L.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets(),i=(e?this.activeClients[t]=e:delete this.activeClients[t],this.getAllActiveQueryTargets()),o=[],a=[];return i.forEach(function(e){return d(n,void 0,void 0,function(){return m(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return d(n,void 0,void 0,function(){return m(this,function(t){return i.has(e)||a.push(e),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},L.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)};var Yl=L;function L(t,e,n,r,i){if(this.queue=t,this.platform=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!L.isAvailable(this.platform))throw new g(p.UNIMPLEMENTED,"LocalStorage is not available on this platform.");t=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=Ll(this.persistenceKey,this.localClientId),this.sequenceNumberKey="firestore_sequence_number_"+this.persistenceKey,this.activeClients[this.localClientId]=new zl,this.clientStateKeyRe=new RegExp("^"+Ml+"_"+t+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ol+"_"+t+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+xl+"_"+t+"_(\\d+)$"),this.onlineStateKey="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.storageListener)}Xl.prototype.addPendingMutation=function(t){},Xl.prototype.updateMutationState=function(t,e,n){},Xl.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},Xl.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},Xl.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},Xl.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Xl.prototype.clearQueryState=function(t){delete this.queryState[t]},Xl.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Xl.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},Xl.prototype.start=function(){return this.localState=new zl,Promise.resolve()},Xl.prototype.handleUserChange=function(t,e,n){},Xl.prototype.setOnlineState=function(t){},Xl.prototype.shutdown=function(){},Xl.prototype.writeSequenceNumber=function(t){};var Jl=Xl;function Xl(){this.localState=new zl,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Zl="FirestoreClient",$l=(tf.prototype.lruParams=function(){return Mu.withCacheSize(this.cacheSizeBytes)},tf);function tf(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}function ef(){}rf.prototype.start=function(t){var n=this,r=(this.verifyNotTerminated(),new Xi),i=new Xi,o=!1;return this.credentials.setChangeListener(function(e){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(e)}):(o=!0,n.initializePersistence(t,i,e).then(function(t){return n.initializeRest(e,t)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},rf.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.enableNetwork()})},rf.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof $l?this.startIndexedDbPersistence(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),r.canFallback(t))return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence();throw t}):(e.resolve(),this.startMemoryPersistence())},rf.prototype.canFallback=function(t){return t instanceof g?t.code===p.FAILED_PRECONDITION||t.code===p.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},rf.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new g(p.FAILED_PRECONDITION,"The client has already been terminated.")},rf.prototype.startIndexedDbPersistence=function(n,r){var t=this,i=Gu.buildStoragePrefix(this.databaseInfo),o=new fl(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return d(t,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(r.synchronizeTabs&&!Yl.isAvailable(this.platform))throw new g(p.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e=r.lruParams(),this.sharedClientState=r.synchronizeTabs?new Yl(this.asyncQueue,this.platform,i,this.clientId,n):new Jl,[4,Gu.createIndexedDbPersistence({allowTabSynchronization:r.synchronizeTabs,persistenceKey:i,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:o,lruParams:e,sequenceNumberSyncer:this.sharedClientState})];case 1:return e=t.sent(),[2,(this.persistence=e).referenceDelegate.garbageCollector]}})})})},rf.prototype.startMemoryPersistence=function(){return this.persistence=Jc.createEagerPersistence(this.clientId),this.sharedClientState=new Jl,Promise.resolve(null)},rf.prototype.initializeRest=function(s,u){var t=this;return f(Zl,"Initializing. user=",s.uid),this.platform.loadConnection(this.databaseInfo).then(function(a){return d(t,void 0,void 0,function(){var e,n,r,i,o=this;return m(this,function(t){switch(t.label){case 0:return e=new Lc,this.localStore=new Uc(this.persistence,e,s),[4,this.localStore.start()];case 1:return t.sent(),u&&(this.lruScheduler=new Ou(u,this.asyncQueue,this.localStore)),e=this.platform.newConnectivityMonitor(),n=this.platform.newSerializer(this.databaseInfo.databaseId),n=new yh(this.asyncQueue,a,this.credentials,n),r=function(t){return o.syncEngine.applyOnlineStateChange(t,vh.RemoteStore)},i=function(t){return o.syncEngine.applyOnlineStateChange(t,vh.SharedClientState)},this.remoteStore=new zh(this.localStore,n,this.asyncQueue,r,e),this.syncEngine=new kl(this.localStore,this.remoteStore,this.sharedClientState,s),this.sharedClientState.onlineStateHandler=i,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new dl(this.syncEngine),[4,this.sharedClientState.start()];case 2:return t.sent(),[4,this.remoteStore.start()];case 3:return t.sent(),[4,this.persistence.setPrimaryStateListener(function(e){return d(o,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}})})})];case 4:return t.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return d(o,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 5:return t.sent(),[2]}})})})},rf.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),f(Zl,"Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},rf.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.syncEngine.disableNetwork()})},rf.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return d(t,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}})})})},rf.prototype.waitForPendingWrites=function(){var t=this,e=(this.verifyNotTerminated(),new Xi);return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.registerPendingWritesCallback(e)}),e.promise},rf.prototype.listen=function(t,e,n){var r=this,i=(this.verifyNotTerminated(),new yl(t,e,n));return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},rf.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.unlisten(t)})},rf.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.localStore.readDocument(t)}).then(function(t){if(t instanceof C)return t;if(t instanceof Is)return null;throw new g(p.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},rf.prototype.getDocumentsFromLocalCache=function(r){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return d(t,void 0,void 0,function(){var e,n;return m(this,function(t){switch(t.label){case 0:return[4,this.localStore.executeQuery(r,!0)];case 1:return n=t.sent(),e=new Sl(r,n.remoteKeys),n=e.computeDocChanges(n.documents),[2,e.applyChanges(n,!1).snapshot]}})})})},rf.prototype.write=function(t){var e=this,n=(this.verifyNotTerminated(),new Xi);return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.write(t,n)}),n.promise},rf.prototype.databaseId=function(){return this.databaseInfo.databaseId},rf.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()})},rf.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(rf.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),rf.prototype.transaction=function(t){var e=this,n=(this.verifyNotTerminated(),new Xi);return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()}),n.promise};var nf=rf;function rf(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=Ni.newId()}af.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},af.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},af.prototype.mute=function(){this.muted=!0},af.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)};var of=af;function af(t){this.observer=t,this.muted=!1}uf.documentId=function(){return uf._DOCUMENT_ID},uf.prototype.isEqual=function(t){if(t instanceof uf)return this._internalPath.isEqual(t._internalPath);throw Ei("isEqual","FieldPath",1,t)},uf._DOCUMENT_ID=new uf(Hi.keyField().canonicalString());var sf=uf;function uf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t;if(!(n instanceof Array)||n.length<1)throw new g(p.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least 1 element.");for(var r=0;r<t.length;++r)if(pi("FieldPath","string",r,t[r]),0===t[r].length)throw new g(p.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hi(t)}function cf(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var hf=new RegExp("[~\\*/\\[\\]]"),lf=(ff.prototype.getToken=function(){return Promise.resolve(null)},ff.prototype.invalidateToken=function(){},ff.prototype.setChangeListener=function(t){y(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=t)(Rl.UNAUTHENTICATED)},ff.prototype.removeChangeListener=function(){y(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},ff);function ff(){this.changeListener=null}df.prototype.getToken=function(){var e=this,n=(y(null!=this.tokenListener,"getToken cannot be called after listener removed."),this.tokenCounter),t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){if(e.tokenCounter!==n)throw new g(p.ABORTED,"getToken aborted due to token change.");return t?(y("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new cf(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},df.prototype.invalidateToken=function(){this.forceRefresh=!0},df.prototype.setChangeListener=function(t){y(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},df.prototype.removeChangeListener=function(){y(null!=this.tokenListener,"removeChangeListener() called twice"),y(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},df.prototype.getUser=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t,"Received invalid UID: "+t),new Rl(t)};var pf=df;function df(t){var e=this;this.tokenListener=null,this.currentUser=Rl.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.tokenCounter=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),t.get().then(function(t){e.auth=t,e.tokenListener&&e.auth.addAuthTokenListener(e.tokenListener)},function(){}))}Object.defineProperty(yf.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0});var mf=yf;function yf(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Rl.FIRST_PARTY}vf.prototype.getToken=function(){return Promise.resolve(new mf(this.gapi,this.sessionIndex))},vf.prototype.setChangeListener=function(t){t(Rl.FIRST_PARTY)},vf.prototype.removeChangeListener=function(){},vf.prototype.invalidateToken=function(){};var gf=vf;function vf(t,e){this.gapi=t,this.sessionIndex=e}function bf(t){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}Tf.delete=function(){return hi("FieldValue.delete",arguments),Ef.instance},Tf.serverTimestamp=function(){return hi("FieldValue.serverTimestamp",arguments),Df.instance},Tf.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return li("FieldValue.arrayUnion",arguments,1),new kf(t)},Tf.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return li("FieldValue.arrayRemove",arguments,1),new Mf(t)},Tf.increment=function(t){return pi("FieldValue.increment","number",1,t),v("FieldValue.increment",arguments,1),new Pf(t)},Tf.prototype.isEqual=function(t){return this===t};var wf=Tf;function Tf(t){this._methodName=t}t(If,Sf=wf),If.instance=new If;var Sf,Ef=If;function If(){return Sf.call(this,"FieldValue.delete")||this}t(Nf,Cf=wf),Nf.instance=new Nf;var Cf,Df=Nf;function Nf(){return Cf.call(this,"FieldValue.serverTimestamp")||this}t(Rf,Af=wf);var Af,kf=Rf;function Rf(t){var e=Af.call(this,"FieldValue.arrayUnion")||this;return e._elements=t,e}t(Lf,_f=wf);var _f,Mf=Lf;function Lf(t){var e=_f.call(this,"FieldValue.arrayRemove")||this;return e._elements=t,e}t(xf,Of=wf);var Of,Pf=xf;function xf(t){var e=Of.call(this,"FieldValue.increment")||this;return e._operand=t,e}var Ge=ii(wf,"Use FieldValue.<field>() instead."),Ff=/^__.*__$/,qf=(Vf.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Sa(t,this.data,this.fieldMask,e)):n.push(new ba(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Ca(t,this.fieldTransforms)),n},Vf);function Vf(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}Kf.prototype.toMutations=function(t,e){e=[new Sa(t,this.data,this.fieldMask,e)];return 0<this.fieldTransforms.length&&e.push(new Ca(t,this.fieldTransforms)),e};var Bf,Uf=Kf;function Kf(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function Qf(t){switch(t){case Bf.Set:case Bf.MergeSet:case Bf.Update:return 1;case Bf.Argument:case Bf.ArrayArgument:return;default:throw l("Unexpected case for UserDataSource: "+t)}}Bf={Set:0,0:"Set",Update:1,1:"Update",MergeSet:2,2:"MergeSet",Argument:3,3:"Argument",ArrayArgument:4,4:"ArrayArgument"};Gf.prototype.childContextForField=function(t){var e=null==this.path?null:this.path.child(t),e=new Gf(this.dataSource,this.methodName,e,!1,this.fieldTransforms,this.fieldMask);return e.validatePathSegment(t),e},Gf.prototype.childContextForFieldPath=function(t){t=null==this.path?null:this.path.child(t),t=new Gf(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return t.validatePath(),t},Gf.prototype.childContextForArray=function(t){return new Gf(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Gf.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new g(p.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},Gf.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},Gf.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},Gf.prototype.validatePathSegment=function(t){if(0===t.length)throw this.createError("Document fields must not be empty");if(Qf(this.dataSource)&&Ff.test(t))throw this.createError('Document fields cannot begin and end with "__"')};var jf=Gf;function Gf(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var Wf=function(t,e){this.databaseId=t,this.key=e},zf=(Hf.prototype.parseSetData=function(t,e){t=new jf(Bf.Set,t,Hi.EMPTY_PATH),Jf("Data must be an object, but it was:",t,e),e=this.parseData(e,t);return new qf(e,null,t.fieldTransforms)},Hf.prototype.parseMergeData=function(t,e,n){var r=new jf(Bf.MergeSet,t,Hi.EMPTY_PATH);Jf("Data must be an object, but it was:",r,e);var i,o,e=this.parseData(e,r);if(n){for(var a=new S(Hi.comparator),s=0,u=n;s<u.length;s++){var c=u[s],h=void 0;if(c instanceof sf)h=c._internalPath;else{if("string"!=typeof c)throw l("Expected stringOrFieldPath to be a string or a FieldPath");h=Zf(t,c)}if(!r.contains(h))throw new g(p.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");a=a.add(h)}i=ua.fromSet(a),o=r.fieldTransforms.filter(function(t){return i.covers(t.field)})}else i=ua.fromArray(r.fieldMask),o=r.fieldTransforms;return new qf(e,i,o)},Hf.prototype.parseUpdateData=function(r,t){var i=this,o=new jf(Bf.Update,r,Hi.EMPTY_PATH),a=(Jf("Data must be an object, but it was:",o,t),new S(Hi.comparator)),s=ys.EMPTY,t=(ui(t,function(t,e){var t=Zf(r,t),n=o.childContextForFieldPath(t);(e=i.runPreConverter(e,n))instanceof Ef?a=a.add(t):null!=(e=i.parseData(e,n))&&(a=a.add(t),s=s.set(t,e))}),ua.fromSet(a));return new Uf(s,t,o.fieldTransforms)},Hf.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new jf(Bf.Update,t,Hi.EMPTY_PATH),o=[Xf(t,e)],a=[n];if(r.length%2!=0)throw new g(p.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Xf(t,r[s])),a.push(r[s+1]);for(var u=new S(Hi.comparator),c=ys.EMPTY,s=0;s<o.length;++s){var h=o[s],l=i.childContextForFieldPath(h),f=this.runPreConverter(a[s],l);f instanceof Ef?u=u.add(h):null!=(f=this.parseData(f,l))&&(u=u.add(h),c=c.set(h,f))}e=ua.fromSet(u);return new Uf(c,e,i.fieldTransforms)},Hf.prototype.parseQueryValue=function(t,e,n){n=new jf((n=void 0===n?!1:n)?Bf.ArrayArgument:Bf.Argument,t,Hi.EMPTY_PATH),t=this.parseData(e,n);return y(null!=t,"Parsed data should not be null."),y(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),t},Hf.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=$f(t);throw e.createError(n)}},Hf.prototype.parseData=function(t,e){if(Yf(t=this.runPreConverter(t,e)))return Jf("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof wf)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement&&e.dataSource!==Bf.ArrayArgument)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},Hf.prototype.parseObject=function(t,n){var r=this,i=new po(b);return ci(t)?n.path&&0<n.path.length&&n.fieldMask.push(n.path):ui(t,function(t,e){e=r.parseData(e,n.childContextForField(t));null!=e&&(i=i.insert(t,e))}),new ys(i)},Hf.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],a=this.parseData(a,e.childContextForArray(r));n.push(a=null==a?xa.INSTANCE:a),r++}return new vs(n)},Hf.prototype.parseSentinelFieldValue=function(t,e){if(!Qf(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof Ef){if(e.dataSource!==Bf.MergeSet)throw e.dataSource===Bf.Update?(y(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else{var n,r;t instanceof Df?e.fieldTransforms.push(new ha(e.path,Jh.instance)):t instanceof kf?(n=this.parseArrayTransformElements(t._methodName,t._elements),r=new Zh(n),e.fieldTransforms.push(new ha(e.path,r))):t instanceof Mf?(n=this.parseArrayTransformElements(t._methodName,t._elements),r=new tl(n),e.fieldTransforms.push(new ha(e.path,r))):t instanceof Pf?(n=this.parseQueryValue("FieldValue.increment",t._operand),r=new nl(n),e.fieldTransforms.push(new ha(e.path,r))):l("Unknown FieldValue type: "+t)}},Hf.prototype.parseScalarValue=function(t,e){if(null===t)return xa.INSTANCE;if("number"==typeof t)return new(nc(t)?Wa:Ya)(t);if("boolean"==typeof t)return Va.of(t);if("string"==typeof t)return new Za(t);if(t instanceof Date)return new es(ho.fromDate(t));if(t instanceof ho)return new es(new ho(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Hh)return new ps(t);if(t instanceof Li)return new ss(t);if(t instanceof Wf)return new hs(t.databaseId,t.key);throw e.createError("Unsupported field value: "+wi(t))},Hf.prototype.parseArrayTransformElements=function(r,t){var i=this;return t.map(function(t,e){var n=new jf(Bf.Argument,r,Hi.EMPTY_PATH);return i.parseData(t,n.childContextForArray(e))})},Hf);function Hf(t){this.preConverter=t}function Yf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ho||t instanceof Hh||t instanceof Li||t instanceof Wf||t instanceof wf)}function Jf(t,e,n){if(!Yf(n)||!bi(n))throw"an object"===(n=wi(n))?e.createError(t+" a custom object"):e.createError(t+" "+n)}function Xf(t,e){if(e instanceof sf)return e._internalPath;if("string"==typeof e)return Zf(t,e);throw new g(p.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Zf(t,e){try{return(e=>{if(0<=e.search(hf))throw new g(p.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(sf.bind.apply(sf,V([void 0],e.split("."))))}catch(t){throw new g(p.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}})(e)._internalPath}catch(e){var n=$f(e);throw new g(p.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function $f(t){return t instanceof Error?t.message:t.toString()}var tp=Mu.COLLECTION_DISABLED,ep=(np.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},np);function np(t){if(void 0===t.host){if(void 0!==t.ssl)throw new g(p.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else mi("settings","non-empty string","host",t.host),this.host=t.host,yi("settings","boolean","ssl",t.ssl),this.ssl=ai(t.ssl,!0);if(Si("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),yi("settings","object","credentials",t.credentials),this.credentials=t.credentials,yi("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?Xr("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&Xr("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=ai(t.timestampsInSnapshots,!0),yi("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Mu.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==tp&&t.cacheSizeBytes<Mu.MINIMUM_CACHE_SIZE_BYTES)throw new g(p.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Mu.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}yi("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}O.prototype.settings=function(t){if(v("Firestore.settings",arguments,1),pi("Firestore.settings","object",1,t),oi(t,"persistence"))throw new g(p.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');t=new ep(t);if(this._firestoreClient&&!this._settings.isEqual(t))throw new g(p.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=(t=>{if(!t)return new lf;switch(t.type){case"gapi":var e=t.client;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new gf(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new g(p.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}})(t.credentials))},O.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},O.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},O.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new g(p.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&Xr("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=ai(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new $l(this._settings.cacheSizeBytes,e))},O.prototype.clearPersistence=function(){var t=this,n=Gu.buildStoragePrefix(this.makeDatabaseInfo()),r=new Xi;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return d(t,void 0,void 0,function(){var e;return m(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,,3]),void 0===this._firestoreClient||this._firestoreClient.clientTerminated)return[4,Gu.clearPersistence(n)];throw new g(p.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise},O.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(O.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),O.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},O.prototype.onSnapshotsInSync=function(t){return this.ensureClientConfigured(),bf(t)?this.onSnapshotsInSyncInternal(t):(pi("Firestore.onSnapshotsInSync","function",1,t),this.onSnapshotsInSyncInternal({next:t}))},O.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new of({next:function(){t.next&&t.next()},error:function(t){throw l("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},O.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new ef),this._firestoreClient},O.prototype.makeDatabaseInfo=function(){return new Pi(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},O.prototype.configureClient=function(t){y(!!this._settings.host,"FirestoreSettings.host is not set"),y(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new nf($r.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},O.prototype.createDataConverter=function(r){return new zf(function(t){if(t instanceof up){var e=r,n=t.firestore._databaseId;if(n.isEqual(e))return new Wf(r,t._key);throw new g(p.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database)}return t})},O.databaseIdFromApp=function(t){t=t.options;if(!oi(t,"projectId"))throw new g(p.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');t=t.projectId;if(t&&"string"==typeof t)return new Fi(t);throw new g(p.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options")},Object.defineProperty(O.prototype,"app",{get:function(){if(this._firebaseApp)return this._firebaseApp;throw new g(p.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available")},enumerable:!0,configurable:!0}),O.prototype.collection=function(t){return v("Firestore.collection",arguments,1),pi("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Tp(ji.fromString(t),this)},O.prototype.doc=function(t){return v("Firestore.doc",arguments,1),pi("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),up.forPath(ji.fromString(t),this)},O.prototype.collectionGroup=function(t){if(v("Firestore.collectionGroup",arguments,1),pi("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new g(p.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new gp(new ac(ji.EMPTY_PATH,t),this)},O.prototype.runTransaction=function(e){var n=this;return v("Firestore.runTransaction",arguments,1),pi("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction(function(t){return e(new ip(n,t))})},O.prototype.batch=function(){return this.ensureClientConfigured(),new ap(this)},Object.defineProperty(O,"logLevel",{get:function(){switch(Yr()){case Ur.DEBUG:return"debug";case Ur.ERROR:return"error";case Ur.SILENT:return"silent";default:return l("Unknown log level: "+Yr())}},enumerable:!0,configurable:!0}),O.setLogLevel=function(t){switch(v("Firestore.setLogLevel",arguments,1),pi("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Jr(Ur.DEBUG);break;case"error":Jr(Ur.ERROR);break;case"silent":Jr(Ur.SILENT);break;default:throw new g(p.INVALID_ARGUMENT,"Invalid log level: "+t)}},O.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots};var rp=O;function O(t,e){var n=this;if(this._firebaseApp=null,this._queue=new eo,this.INTERNAL={delete:function(){return d(n,void 0,void 0,function(){return m(this,function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this._firebaseApp=r,this._databaseId=O.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new pf(e)}else{r=t;if(!r.projectId)throw new g(p.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new Fi(r.projectId,r.database),this._persistenceKey="[DEFAULT]",this._credentials=new lf}this._settings=new ep({}),this._dataConverter=this.createDataConverter(this._databaseId)}op.prototype.get=function(t){var e=this,n=(v("Transaction.get",arguments,1),Dp("Transaction.get",t,this._firestore));return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return l("Mismatch in docs returned from document lookup.");t=t[0];if(t instanceof Is)return new fp(e._firestore,n._key,null,!1,!1,n._converter);if(t instanceof C)return new fp(e._firestore,n._key,t,!1,!1,n._converter);throw l("BatchGetDocumentsRequest returned unexpected document type: "+t.constructor.name)})},op.prototype.set=function(t,e,n){fi("Transaction.set",arguments,2,3);var t=Dp("Transaction.set",t,this._firestore),e=(n=Ep("Transaction.set",n),Np(t._converter,e,"Transaction.set")),r=e[0],e=e[1],n=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(e,r,n.mergeFields):this._firestore._dataConverter.parseSetData(e,r);return this._transaction.set(t._key,n),this},op.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return n="string"==typeof e||e instanceof sf?(li("Transaction.update",arguments,3),r=Dp("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,i)):(v("Transaction.update",arguments,2),r=Dp("Transaction.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,n),this},op.prototype.delete=function(t){v("Transaction.delete",arguments,1);t=Dp("Transaction.delete",t,this._firestore);return this._transaction.delete(t._key),this};var ip=op;function op(t,e){this._firestore=t,this._transaction=e}sp.prototype.set=function(t,e,n){fi("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var t=Dp("WriteBatch.set",t,this._firestore),e=(n=Ep("WriteBatch.set",n),Np(t._converter,e,"WriteBatch.set")),r=e[0],e=e[1],n=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(e,r,n.mergeFields):this._firestore._dataConverter.parseSetData(e,r);return this._mutations=this._mutations.concat(n.toMutations(t._key,da.NONE)),this},sp.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return this.verifyNotCommitted(),n="string"==typeof e||e instanceof sf?(li("WriteBatch.update",arguments,3),r=Dp("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,i)):(v("WriteBatch.update",arguments,2),r=Dp("WriteBatch.update",t,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(n.toMutations(r._key,da.exists(!0))),this},sp.prototype.delete=function(t){v("WriteBatch.delete",arguments,1),this.verifyNotCommitted();t=Dp("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new Ra(t._key,da.NONE)),this},sp.prototype.commit=function(){return d(this,void 0,void 0,function(){return m(this,function(t){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},sp.prototype.verifyNotCommitted=function(){if(this._committed)throw new g(p.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")};var ap=sp;function sp(t){this._firestore=t,this._mutations=[],this._committed=!1}cp.forPath=function(t,e,n){if(t.length%2!=0)throw new g(p.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new cp(new w(t),e,n)},Object.defineProperty(cp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(cp.prototype,"parent",{get:function(){return new Tp(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(cp.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),cp.prototype.collection=function(t){if(v("DocumentReference.collection",arguments,1),pi("DocumentReference.collection","non-empty string",1,t),t)return t=ji.fromString(t),new Tp(this._key.path.child(t),this.firestore);throw new g(p.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()")},cp.prototype.isEqual=function(t){if(t instanceof cp)return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter;throw Ei("isEqual","DocumentReference",1,t)},cp.prototype.set=function(t,e){fi("DocumentReference.set",arguments,1,2),e=Ep("DocumentReference.set",e);var t=Np(this._converter,t,"DocumentReference.set"),n=t[0],t=t[1],e=e.merge||e.mergeFields?this.firestore._dataConverter.parseMergeData(t,n,e.mergeFields):this.firestore._dataConverter.parseSetData(t,n);return this._firestoreClient.write(e.toMutations(this._key,da.NONE))},cp.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return e="string"==typeof t||t instanceof sf?(li("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,n)):(v("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(e.toMutations(this._key,da.exists(!0)))},cp.prototype.delete=function(){return v("DocumentReference.delete",arguments,0),this._firestoreClient.write([new Ra(this._key,da.NONE)])},cp.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];fi("DocumentReference.onSnapshot",arguments,1,4);var n={includeMetadataChanges:!1},r=0,n=("object"!=typeof t[r]||bf(t[r])||(Si("DocumentReference.onSnapshot",n=t[r],["includeMetadataChanges"]),yi("DocumentReference.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++),{includeMetadataChanges:n.includeMetadataChanges}),r=bf(t[r])?t[r]:(pi("DocumentReference.onSnapshot","function",r,t[r]),di("DocumentReference.onSnapshot","function",r+1,t[r+1]),di("DocumentReference.onSnapshot","function",r+2,t[r+2]),{next:t[r],error:t[r+1],complete:t[r+2]});return this.onSnapshotInternal(n,r)},cp.prototype.onSnapshotInternal=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)},i=(n.error&&(e=n.error.bind(n)),new of({next:function(t){var e;n.next&&(y(t.docs.size<=1,"Too many documents returned on a document query"),e=t.docs.get(r._key),n.next(new fp(r.firestore,r._key,e,t.fromCache,t.hasPendingWrites,r._converter)))},error:e})),o=this._firestoreClient.listen(ac.atPath(this._key.path),i,t);return function(){i.mute(),r._firestoreClient.unlisten(o)}},cp.prototype.get=function(n){var r=this;return fi("DocumentReference.get",arguments,0,1),Cp("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(t){e(new fp(r.firestore,r._key,t,!0,t instanceof C&&t.hasLocalMutations,r._converter))},t):r.getViaSnapshotListener(e,t,n)})},cp.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new g(p.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new g(p.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},cp.prototype.withConverter=function(t){return new cp(this._key,this.firestore,t)};var up=cp;function cp(t,e,n){this._key=t,this.firestore=e,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}lp.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache};var hp=lp;function lp(t,e){this.hasPendingWrites=t,this.fromCache=e}pp.prototype.data=function(t){var e;if(fi("DocumentSnapshot.data",arguments,0,1),t=Ip("DocumentSnapshot.data",t),this._document)return this._converter?(e=new mp(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites),this._converter.fromFirestore(e,t)):this.toJSObject(this._document.data(),Ma.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))},pp.prototype.get=function(t,e){if(fi("DocumentSnapshot.get",arguments,1,2),e=Ip("DocumentSnapshot.get",e),this._document){t=this._document.data().field(Xf("DocumentSnapshot.get",t));if(null!==t)return this.toJSValue(t,Ma.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(pp.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(pp.prototype,"ref",{get:function(){return new up(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(pp.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(pp.prototype,"metadata",{get:function(){return new hp(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),pp.prototype.isEqual=function(t){if(t instanceof pp)return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter;throw Ei("isEqual","DocumentSnapshot",1,t)},pp.prototype.toJSObject=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.toJSValue(e,n)}),i},pp.prototype.toJSValue=function(t,e){var n,r;return t instanceof ys?this.toJSObject(t,e):t instanceof vs?this.toJSArray(t,e):t instanceof hs?(n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId(),t.databaseId.isEqual(r)||Xr("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new up(n,this._firestore,this._converter)):t.value(e)},pp.prototype.toJSArray=function(t,e){var n=this;return t.internalValue.map(function(t){return n.toJSValue(t,e)})};var fp=pp;function pp(t,e,n,r,i,o){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}t(yp,dp=fp),yp.prototype.data=function(t){t=dp.prototype.data.call(this,t);return y(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t};var dp,mp=yp;function yp(){return null!==dp&&dp.apply(this,arguments)||this}P.prototype.where=function(t,e,n){v("Query.where",arguments,3),Ti("Query.where",3,n);var r,i=["<","<=","==",">=",">","array-contains","in","array-contains-any"],o=e;if(!i.some(function(t){return t===o}))throw new g(p.INVALID_ARGUMENT,"Invalid value "+wi(o)+" provided to function Query.where() for its "+Ci(2)+" argument. Acceptable values: "+i.join(", "));i=Xf("Query.where",t),t=D.fromString(e);if(i.isKeyField()){if(t===D.ARRAY_CONTAINS||t===D.ARRAY_CONTAINS_ANY)throw new g(p.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+t.toString()+"' queries on FieldPath.documentId().");if(t===D.IN){this.validateDisjunctiveFilterElements(n,t);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new vs(a)}else r=this.parseDocumentIdValue(n)}else t!==D.IN&&t!==D.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,t),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,t===D.IN);e=uc.create(i,t,r);return this.validateNewFilter(e),new P(this._query.addFilter(e),this.firestore,this._converter)},P.prototype.orderBy=function(t,e){var n;if(fi("Query.orderBy",arguments,1,2),di("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=Cc.ASCENDING;else{if("desc"!==e)throw new g(p.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=Cc.DESCENDING}if(null!==this._query.startAt)throw new g(p.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new g(p.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");e=Xf("Query.orderBy",t),t=new kc(e,n);return this.validateNewOrderBy(t),new P(this._query.addOrderBy(t),this.firestore,this._converter)},P.prototype.limit=function(t){return v("Query.limit",arguments,1),pi("Query.limit","number",1,t),Ii("Query.limit",1,t),new P(this._query.withLimitToFirst(t),this.firestore,this._converter)},P.prototype.limitToLast=function(t){return v("Query.limitToLast",arguments,1),pi("Query.limitToLast","number",1,t),Ii("Query.limitToLast",1,t),new P(this._query.withLimitToLast(t),this.firestore,this._converter)},P.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];li("Query.startAt",arguments,1);t=this.boundFromDocOrFields("Query.startAt",t,e,!0);return new P(this._query.withStartAt(t),this.firestore,this._converter)},P.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];li("Query.startAfter",arguments,1);t=this.boundFromDocOrFields("Query.startAfter",t,e,!1);return new P(this._query.withStartAt(t),this.firestore,this._converter)},P.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];li("Query.endBefore",arguments,1);t=this.boundFromDocOrFields("Query.endBefore",t,e,!0);return new P(this._query.withEndAt(t),this.firestore,this._converter)},P.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];li("Query.endAt",arguments,1);t=this.boundFromDocOrFields("Query.endAt",t,e,!1);return new P(this._query.withEndAt(t),this.firestore,this._converter)},P.prototype.isEqual=function(t){if(t instanceof P)return this.firestore===t.firestore&&this._query.isEqual(t._query);throw Ei("isEqual","Query",1,t)},P.prototype.withConverter=function(t){return new P(this._query,this.firestore,t)},P.prototype.boundFromDocOrFields=function(t,e,n,r){if(Ti(t,1,e),e instanceof fp){if(0<n.length)throw new g(p.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");if(e.exists)return this.boundFromDocument(t,e._document,r);throw new g(p.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().")}e=[e].concat(n);return this.boundFromFields(t,e,r)},P.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new hs(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof is)throw new g(p.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s)throw a=a.field.canonicalString(),new g(p.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.");r.push(s)}}return new Nc(r,n)},P.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new g(p.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new g(p.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(ji.fromString(a));if(!w.isDocumentKey(s))throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");s=new w(s);i.push(new hs(this.firestore._databaseId,s))}else{s=this.firestore._dataConverter.parseQueryValue(t,a);i.push(s)}}return new Nc(i,n)},P.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];fi("Query.onSnapshot",arguments,1,4);var n={},r=0;return"object"!=typeof t[r]||bf(t[r])||(Si("Query.onSnapshot",n=t[r],["includeMetadataChanges"]),yi("Query.onSnapshot","boolean","includeMetadataChanges",n.includeMetadataChanges),r++),r=bf(t[r])?t[r]:(pi("Query.onSnapshot","function",r,t[r]),di("Query.onSnapshot","function",r+1,t[r+1]),di("Query.onSnapshot","function",r+2,t[r+2]),{next:t[r],error:t[r+1],complete:t[r+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(n,r)},P.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)},i=(e.error&&(r=e.error.bind(e)),new of({next:function(t){e.next&&e.next(new vp(n.firestore,n._query,t,n._converter))},error:r})),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},P.prototype.validateHasExplicitOrderByForLimitToLast=function(t){if(t.hasLimitToLast()&&0===t.explicitOrderBy.length)throw new g(p.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},P.prototype.get=function(n){var r=this;return fi("Query.get",arguments,0,1),Cp("Query.get",n),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(t){e(new vp(r.firestore,r._query,t,r._converter))},t):r.getViaSnapshotListener(e,t,n)})},P.prototype.getViaSnapshotListener=function(e,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new g(p.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},P.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(ji.fromString(t));if(w.isDocumentKey(e))return new hs(this.firestore._databaseId,new w(e));throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").")}if(t instanceof up)return new hs(this.firestore._databaseId,t._key);throw new g(p.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+wi(t)+".")},P.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new g(p.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new g(p.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new g(p.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new g(p.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},P.prototype.validateNewFilter=function(t){if(t instanceof uc){var e=[D.ARRAY_CONTAINS,D.ARRAY_CONTAINS_ANY],n=[D.IN,D.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new g(p.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");o=this._query.getFirstOrderByField();null!==o&&this.validateOrderByAndInequalityMatch(t.field,o)}else if(i||r){o=null;if(null!=(o=null===(o=i?this._query.findFilterOperator(n):o)&&r?this._query.findFilterOperator(e):o))throw o===t.op?new g(p.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new g(p.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+o.toString()+"' filters.")}}},P.prototype.validateNewOrderBy=function(t){var e;null===this._query.getFirstOrderByField()&&null!==(e=this._query.getInequalityFilterField())&&this.validateOrderByAndInequalityMatch(e,t.field)},P.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new g(p.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")};var gp=P;function P(t,e,n){this._query=t,this.firestore=e,this._converter=n}Object.defineProperty(bp.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(bp.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(bp.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),bp.prototype.forEach=function(e,n){var r=this;fi("QuerySnapshot.forEach",arguments,1,2),pi("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach(function(t){e.call(n,r.convertToDocumentImpl(t))})},Object.defineProperty(bp.prototype,"query",{get:function(){return new gp(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),bp.prototype.docChanges=function(t){t&&(Si("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),yi("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var i,e,o,a,n,r,s,t=!(!t||!t.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new g(p.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(i=this._firestore,e=t,o=this._snapshot,a=this._converter,o.oldDocs.isEmpty()?(r=0,o.docChanges.map(function(t){var e=new mp(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key),a);return y(t.type===k.Added,"Invalid event type for first snapshot"),y(!n||o.query.docComparator(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})):(s=o.oldDocs,o.docChanges.filter(function(t){return e||t.type!==k.Metadata}).map(function(t){var e=new mp(i,t.doc.key,t.doc,o.fromCache,o.mutatedKeys.has(t.doc.key),a),n=-1,r=-1;return t.type!==k.Added&&(y(0<=(n=s.indexOf(t.doc.key)),"Index for document not found"),s=s.delete(t.doc.key)),t.type!==k.Removed&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:(t=>{switch(t){case k.Added:return"added";case k.Modified:case k.Metadata:return"modified";case k.Removed:return"removed";default:return l("Unknown change type: "+t)}})(t.type),doc:e,oldIndex:n,newIndex:r}}))),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},bp.prototype.isEqual=function(t){if(t instanceof bp)return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter;throw Ei("isEqual","QuerySnapshot",1,t)},bp.prototype.convertToDocumentImpl=function(t){return new mp(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key),this._converter)};var vp=bp;function bp(t,e,n,r){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new hp(n.hasPendingWrites,n.fromCache)}V(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(vp.prototype.docChanges,t,{get:function(){throw new g(p.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}})}catch(t){}});t(Sp,wp=gp),Object.defineProperty(Sp.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Sp.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new up(new w(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(Sp.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),Sp.prototype.doc=function(t){if(fi("CollectionReference.doc",arguments,0,1),pi("CollectionReference.doc","non-empty string",1,t=0===arguments.length?Ni.newId():t),""===t)throw new g(p.INVALID_ARGUMENT,"Document path must be a non-empty string");t=ji.fromString(t);return up.forPath(this._query.path.child(t),this.firestore,this._converter)},Sp.prototype.add=function(t){v("CollectionReference.add",arguments,1),pi("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then(function(){return e})},Sp.prototype.withConverter=function(t){return new Sp(this._path,this.firestore,t)};var wp,Tp=Sp;function Sp(t,e,n){e=wp.call(this,ac.atPath(t),e,n)||this;if((e._path=t).length%2!=1)throw new g(p.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return e}function Ep(t,e){if(void 0===e)return{merge:!1};Si(t,e,["merge","mergeFields"]),yi(t,"boolean","merge",e.merge);var n=t,r="mergeFields",i="a string or a FieldPath",o=e.mergeFields,a=function(t){return"string"==typeof t||t instanceof sf};if(void 0!==o){var s=n,u=r,c=i,h=o,l=a;if(!(h instanceof Array))throw new g(p.INVALID_ARGUMENT,"Function "+s+"() requires its "+u+" option to be an array, but it was: "+wi(h));for(var f=0;f<h.length;++f)if(!l(h[f]))throw new g(p.INVALID_ARGUMENT,"Function "+s+"() requires all "+u+" elements to be "+c+", but the value at index "+f+" was: "+wi(h[f]))}if(void 0!==e.mergeFields&&void 0!==e.merge)throw new g(p.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ip(t,e){return void 0===e?{}:(Si(t,e,["serverTimestamps"]),gi(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Cp(t,e){di(t,"object",1,e),e&&(Si(t,e,["source"]),gi(t,0,"source",e.source,["default","server","cache"]))}function Dp(t,e,n){if(e instanceof up){if(e.firestore!==n)throw new g(p.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Ei(t,"DocumentReference",1,e)}function Np(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var Q=ii(rp,"Use firebase.firestore() instead."),n=ii(ip,"Use firebase.firestore().runTransaction() instead."),je=ii(ap,"Use firebase.firestore().batch() instead."),Ap=ii(up,"Use firebase.firestore().doc() instead."),kp=ii(fp),Rp=ii(mp),_p=ii(gp),Mp=ii(vp),Lp=ii(Tp,"Use firebase.firestore().collection() instead."),Q={Firestore:Q,GeoPoint:Hh,Timestamp:ho,Blob:e,Transaction:n,WriteBatch:je,DocumentReference:Ap,DocumentSnapshot:kp,Query:_p,QueryDocumentSnapshot:Rp,QuerySnapshot:Mp,CollectionReference:Lp,FieldPath:sf,FieldValue:Ge,setLogLevel:rp.setLogLevel,CACHE_SIZE_UNLIMITED:tp};Pp.prototype.addCallback=function(t){},Pp.prototype.shutdown=function(){};var Op=Pp;function Pp(){}var xp="ConnectivityMonitor",Fp=(qp.prototype.addCallback=function(t){this.callbacks.push(t)},qp.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},qp.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},qp.prototype.onNetworkAvailable=function(){f(xp,"Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},qp.prototype.onNetworkUnavailable=function(){f(xp,"Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},qp.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},qp);function qp(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}Bp.prototype.onOpen=function(t){y(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},Bp.prototype.onClose=function(t){y(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},Bp.prototype.onMessage=function(t){y(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},Bp.prototype.close=function(){this.closeFn()},Bp.prototype.send=function(t){this.sendFn(t)},Bp.prototype.callOnOpen=function(){y(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},Bp.prototype.callOnClose=function(t){y(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},Bp.prototype.callOnMessage=function(t){y(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)};var Vp=Bp;function Bp(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}var Up="Connection",Kp={BatchGetDocuments:"batchGet",Commit:"commit"},Qp="gl-js/ fire/"+zr,jp=(Gp.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=Qp},Gp.prototype.invokeRPC=function(u,n,r){var i=this,c=this.makeUrl(u);return new Promise(function(o,a){var s=new Wr,t=(s.listenOnce(jr.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Qr.NO_ERROR:var t=s.getResponseJson();f(Up,"XHR received:",JSON.stringify(t)),o(t);break;case Qr.TIMEOUT:f(Up,'RPC "'+u+'" timed out'),a(new g(p.DEADLINE_EXCEEDED,"Request time out"));break;case Qr.HTTP_ERROR:var e,n,r=s.getStatus();f(Up,'RPC "'+u+'" failed with status:',r,"response text:",s.getResponseText()),0<r?(e=s.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace("_","-"),n=0<=Object.values(p).indexOf(i)?i:p.UNKNOWN,a(new g(n,e.message))):a(new g(p.UNKNOWN,"Server responded with status "+s.getStatus())):(f(Up,'RPC "'+u+'" failed'),a(new g(p.UNAVAILABLE,"Connection failed.")));break;default:l('RPC "'+u+'" failed with unanticipated webchannel error '+s.getLastErrorCode()+": "+s.getLastError()+", giving up.")}}finally{f(Up,'RPC "'+u+'" completed.')}var i}),q({},n)),t=(delete t.database,JSON.stringify(t)),e=(f(Up,"XHR sending: ",c+" "+t),{"Content-Type":"text/plain"});i.modifyHeadersForRequest(e,r),s.send(c,"POST",t,e,15)})},Gp.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},Gp.prototype.openStream=function(t,e){var t=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],n=Kr(),r={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling},e=(this.modifyHeadersForRequest(r.initMessageHeaders,e),"object"==typeof navigator&&"ReactNative"===navigator.product||(r.httpHeadersOverwriteParam="$httpHeaders"),t.join(""));function i(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}f(Up,"Creating WebChannel: "+e+" "+r);var o=n.createWebChannel(e,r),a=!1,s=!1,u=new Vp({sendFn:function(t){s?f(Up,"Not sending because WebChannel is closed:",t):(a||(f(Up,"Opening WebChannel transport."),o.open(),a=!0),f(Up,"WebChannel sending:",t),o.send(t))},closeFn:function(){return o.close()}});return i(Gr.EventType.OPEN,function(){s||f(Up,"WebChannel transport opened.")}),i(Gr.EventType.CLOSE,function(){s||(s=!0,f(Up,"WebChannel transport closed"),u.callOnClose())}),i(Gr.EventType.ERROR,function(t){s||(s=!0,f(Up,"WebChannel transport errored:",t),u.callOnClose(new g(p.UNAVAILABLE,"The operation could not be completed")))}),i(Gr.EventType.MESSAGE,function(t){var e,n,r,i;s||(y(!!(t=t.data[0]),"Got a webchannel message without data."),(e=t.error||(null==(e=t[0])?void 0:e.error))?(f(Up,"WebChannel received error:",e),n=e.status,r=(()=>{var t=A[n];if(void 0!==t)return Ih(t)})(),i=e.message,void 0===r&&(r=p.INTERNAL,i="Unknown error status: "+n+" with message "+e.message),s=!0,u.callOnClose(new g(r,i)),o.close()):(f(Up,"WebChannel received:",t),u.callOnMessage(t)))}),setTimeout(function(){u.callOnOpen()},0),u},Gp.prototype.makeUrl=function(t){var e=Kp[t];return y(void 0!==e,"Unknown REST mapping for: "+t),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+e},Gp);function Gp(t){this.databaseId=t.databaseId,this.baseUrl=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}Object.defineProperty(Wp.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Wp.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Wp.prototype.loadConnection=function(t){return Promise.resolve(new jp(t))},Wp.prototype.newConnectivityMonitor=function(){return new(Fp.isAvailable()?Fp:Op)},Wp.prototype.newSerializer=function(t){return new fl(t,{useProto3Json:!0})},Wp.prototype.formatJSON=function(t){return JSON.stringify(t)},Wp.prototype.atob=function(t){return atob(t)},Wp.prototype.btoa=function(t){return btoa(t)};e=Wp;function Wp(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}$r.setPlatform(new e),n=zp,n.INTERNAL.registerComponent(new Z("firestore",function(t){var e=t.getProvider("app").getImmediate();return new rp(e,t.getProvider("auth-internal"))},"PUBLIC").setServiceProps((t=>{y("object"==typeof t,"shallowCopy() expects object parameter.");var e,n={};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n})(Q))),n.registerVersion("@firebase/firestore","1.9.1")}.apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore - be sure to load firebase-app.js first.")}});
((t,e)=>{"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e(("undefined"!=typeof globalThis?globalThis:t||self).firebase)})(this,function(e){try{!function(){var t,Fl=(t=e)&&"object"==typeof t&&"default"in t?t:{default:t};!function(){var t,x="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},j=(t=>{t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis})(this);function U(t){var e,n,i="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return i?i.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}var V="Promise",e=function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function s(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=j.setTimeout,r=(e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){i||(i=!0,e.call(n,t))}}var n=this,i=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{switch(typeof t){case"object":var e=null!=t;break;case"function":e=!0;break;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)r.b(this.a[t]);this.a=null}},new e);return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(t){r(t)}}:t}var i,r,o=new a(function(t,e){i=t,r=e});return this.Oa(n(t,i),n(e,r)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?r.b(n):this.a.push(n)},a.resolve=s,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(r){return new a(function(t,e){for(var n=U(r),i=n.next();!i.done;i=n.next())s(i.value).Oa(t,e)})},a.all=function(t){var e=U(t),o=e.next();return o.done?s([]):new a(function(n,t){for(var i=[],r=0;i.push(void 0),r++,s(o.value).Oa((e=>function(t){i[e]=t,0==--r&&n(i)})(i.length-1),t),!(o=e.next()).done;);})},a},F=j;V=V.split(".");for(var q=0;q<V.length-1;q++){var H=V[q];H in F||(F[H]={}),F=F[H]}(e=e(q=F[V=V[V.length-1]]))!=q&&null!=e&&x(F,V,{configurable:!0,writable:!0,value:e});var K=K||{},m=this||self,G=/^[\w+/_-]+[=]{0,2}$/,B=null;function W(){}function X(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function J(t){var e=X(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Y(t){return"function"==X(t)}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var z="closure_uid_"+(1e9*Math.random()>>>0),$=0;function Z(t,e,n){return t.call.apply(t.bind,arguments)}function Q(e,n,t){var i;if(e)return 2<arguments.length?(i=Array.prototype.slice.call(arguments,2),function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(n,t)}):function(){return e.apply(n,arguments)};throw Error()}function d(t,e,n){return(d=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Z:Q).apply(null,arguments)}function tt(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var et=Date.now||function(){return+new Date};function n(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function g(t,e,n){this.code=rt+t,this.message=e||ot[t]||"",this.a=n||null}function nt(t){var e=t&&t.code;return e?new g(e.substring(rt.length),t.message,t.serverResponse):null}n(g,Error),g.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},g.prototype.toJSON=function(){return this.v()};var it,rt="auth/",ot={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},at={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function st(t){for(var e in at)if(at[e].id===t)return{firebaseEndpoint:(t=at[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function ut(t){if(t)try{return t.$goog_Thenable}catch(t){}}function o(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,o):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function ct(t,e){for(var n="",i=(t=t.split("%s")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:"%s");o.call(this,n+t[i])}function ht(t){throw new ct("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function lt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function ft(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function dt(){this.b=this.a=null}it=st("__EID__")?"__EID__":void 0,n(o,Error),o.prototype.name="CustomError",n(ct,o),ct.prototype.name="AssertionError",lt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var pt=new lt(function(){return new vt},function(t){t.reset()});function vt(){this.next=this.b=this.a=null}dt.prototype.add=function(t,e){var n=pt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},vt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},vt.prototype.reset=function(){this.next=this.b=this.a=null};var mt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},p=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r="string"==typeof t?t.split(""):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)},gt=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,i=t.length,r=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<i;s++)s in a&&(n=a[s],e.call(void 0,n,s,t))&&(r[o++]=n);return r},bt=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},yt=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function wt(t,e){return 0<=mt(t,e)}function It(t,e){var n;return(n=0<=(e=mt(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Tt(n,i){for(var t=n,e=function(t,e){i.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length},r="string"==typeof t?t.split(""):t,o=t.length-1;0<=o;--o)o in r&&e.call(void 0,r[o],o,t)}function Et(){return Array.prototype.concat.apply([],arguments)}function At(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var kt,St=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Nt=/&/g,_t=/</g,Ot=/>/g,Rt=/"/g,Ct=/'/g,Dt=/\x00/g,Pt=/[\x00&<>"']/;function u(t,e){return-1!=t.indexOf(e)}function Lt(t,e){return t<e?-1:e<t?1:0}t:{var Mt=m.navigator;if(Mt){Mt=Mt.userAgent;if(Mt){kt=Mt;break t}}kt=""}function s(t){return u(kt,t)}function xt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function jt(t){for(var e in t)return;return 1}function Ut(t){var e,n={};for(e in t)n[e]=t[e];return n}var Vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function l(t){for(var e,n,i=1;i<arguments.length;i++){for(e in n=arguments[i])t[e]=n[e];for(var r=0;r<Vt.length;r++)e=Vt[r],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Ft(t,e){t:{try{var n,i=t&&t.ownerDocument;if((n=i&&(i.defaultView||i.parentWindow)||m).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(f(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;ht("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function qt(t,e){this.a=t===Gt&&e||"",this.b=Kt}function Ht(t){return t instanceof qt&&t.constructor===qt&&t.b===Kt?t.a:(ht("expected object of type Const, got '"+t+"'"),"type_error:Const")}qt.prototype.ra=!0,qt.prototype.qa=function(){return this.a},qt.prototype.toString=function(){return"Const{"+this.a+"}"};var Kt={},Gt={},Bt=new qt(Gt,"");function Wt(t,e){this.a=t===Zt&&e||"",this.b=$t}function Xt(t){return t instanceof Wt&&t.constructor===Wt&&t.b===$t?t.a:(ht("expected object of type TrustedResourceUrl, got '"+t+"' of type "+X(t)),"type_error:TrustedResourceUrl")}function Jt(t,n){var i=Ht(t);if(zt.test(i))return t=i.replace(Yt,function(t,e){if(Object.prototype.hasOwnProperty.call(n,e))return(t=n[e])instanceof qt?Ht(t):encodeURIComponent(String(t));throw Error('Found marker, "'+e+'", in format string, "'+i+'", but no valid label mapping found in args: '+JSON.stringify(n))}),new Wt(Zt,t);throw Error("Invalid TrustedResourceUrl format: "+i)}Wt.prototype.ra=!0,Wt.prototype.qa=function(){return this.a.toString()},Wt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Yt=/%{(\w+)}/g,zt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,$t={},Zt={};function Qt(t,e){this.a=t===re&&e||"",this.b=ie}function te(t){return t instanceof Qt&&t.constructor===Qt&&t.b===ie?t.a:(ht("expected object of type SafeUrl, got '"+t+"' of type "+X(t)),"type_error:SafeUrl")}Qt.prototype.ra=!0,Qt.prototype.qa=function(){return this.a.toString()},Qt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var ee=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function ne(t){return t instanceof Qt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),ee.test(t)||(t="about:invalid#zClosurez"),new Qt(re,t))}var ie={},re={};function oe(){this.a="",this.b=se}function ae(t){return t instanceof oe&&t.constructor===oe&&t.b===se?t.a:(ht("expected object of type SafeHtml, got '"+t+"' of type "+X(t)),"type_error:SafeHtml")}oe.prototype.ra=!0,oe.prototype.qa=function(){return this.a.toString()},oe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var se={};function ue(t){var e=new oe;return e.a=t,e}ue("<!DOCTYPE html>");var ce=ue("");function he(t){for(var e=t.split("%s"),n="",i=Array.prototype.slice.call(arguments,1);i.length&&1<e.length;)n+=e.shift()+i.shift();return n+e.join("%s")}function le(t){return t=Pt.test(t)&&-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(Nt,"&amp;"):t).indexOf("<")?t.replace(_t,"&lt;"):t).indexOf(">")?t.replace(Ot,"&gt;"):t).indexOf('"')?t.replace(Rt,"&quot;"):t).indexOf("'")?t.replace(Ct,"&#39;"):t).indexOf("\0")?t.replace(Dt,"&#0;"):t}function fe(t){return fe[" "](t),t}ue("<br>"),fe[" "]=W;var de,pe=s("Opera"),ve=s("Trident")||s("MSIE"),me=s("Edge"),ge=me||ve,be=s("Gecko")&&!(u(kt.toLowerCase(),"webkit")&&!s("Edge"))&&!(s("Trident")||s("MSIE"))&&!s("Edge"),ye=u(kt.toLowerCase(),"webkit")&&!s("Edge");function we(){var t=m.document;return t?t.documentMode:void 0}t:{var Ie="",i=(i=kt,be?/rv:([^\);]+)(\)|;)/.exec(i):me?/Edge\/([\d\.]+)/.exec(i):ve?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):ye?/WebKit\/(\S+)/.exec(i):pe?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(i&&(Ie=i?i[1]:""),ve){i=we();if(null!=i&&i>parseFloat(Ie)){de=String(i);break t}}de=Ie}var Te,Ee={};function Ae(s){return t=s,e=function(){for(var t=0,e=St(String(de)).split("."),n=St(String(s)).split("."),i=Math.max(e.length,n.length),r=0;0==t&&r<i;r++)for(var o=e[r]||"",a=n[r]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],(0!=o[0].length||0!=a[0].length)&&(t=Lt(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||Lt(0==o[2].length,0==a[2].length)||Lt(o[2],a[2]),o=o[3],a=a[3],0==t););return 0<=t},n=Ee,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}Te=m.document&&ve?we():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ke=!ve||9<=Number(Te);function Se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function Ne(n,t){xt(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:Re.hasOwnProperty(e)?n.setAttribute(Re[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var _e,Oe,Re={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Ce(){var t,e=arguments,n=document,i=String(e[0]),r=e[1];if(!ke&&r&&(r.name||r.type)&&(i=["<",i],r.name&&i.push(' name="',le(r.name),'"'),r.type&&(i.push(' type="',le(r.type),'"'),l(t={},r),delete t.type,r=t),i.push(">"),i=i.join("")),i=De(n,i),r&&("string"==typeof r?i.className=r:Array.isArray(r)?i.className=r.join(" "):Ne(i,r)),2<e.length){var o=n,a=i,s=e;function u(t){t&&a.appendChild("string"==typeof t?o.createTextNode(t):t)}for(var c=2;c<s.length;c++){var h=s[c];!J(h)||f(h)&&0<h.nodeType?u(h):p((t=>{if(t&&"number"==typeof t.length){if(f(t))return"function"==typeof t.item||"string"==typeof t.item;if(Y(t))return"function"==typeof t.item}})(h)?At(h):h,u)}}return i}function De(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function Pe(t){m.setTimeout(function(){throw t},0)}function Le(t,e){var n;Oe=Oe||(m.Promise&&m.Promise.resolve?(n=m.Promise.resolve(void 0),function(){n.then(je)}):function(){var e,n,i,t,r=je;!Y(m.setImmediate)||m.Window&&m.Window.prototype&&!s("Edge")&&m.Window.prototype.setImmediate==m.setImmediate?(_e=_e||(void 0===(t=void 0===(t=m.MessageChannel)&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!s("Presto")?function(){(o=De(document,"IFRAME")).style.display="none",t=o,e=new Wt(Zt,Ht(Bt)),Ft(t,"HTMLIFrameElement"),t.src=Xt(e).toString(),document.documentElement.appendChild(o);var t,e,n=o.contentWindow,i=((o=n.document).open(),o.write(ae(ce)),o.close(),"callImmediate"+Math.random()),r="file:"==n.location.protocol?"*":n.location.protocol+"//"+n.location.host,o=d(function(t){"*"!=r&&t.origin!=r||t.data!=i||this.port1.onmessage()},this);n.addEventListener("message",o,!1),this.port1={},this.port2={postMessage:function(){n.postMessage(i,r)}}}:t)||s("Trident")||s("MSIE")?function(t){m.setTimeout(t,0)}:(e=new t,i=n={},e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Db,n.Db=null,t())},function(t){i.next={Db:t},i=i.next,e.port2.postMessage(0)})))(r):m.setImmediate(r)}),Me||(Oe(),Me=!0),xe.add(t,e)}var Me=!1,xe=new dt;function je(){for(var t,e,n;e=void 0,n=null,(e=xe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){Pe(t)}ft(pt,t)}Me=!1}function b(t,e){if(this.a=Ue,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=W)try{var n=this;t.call(e,function(t){Je(n,Ve,t)},function(t){if(!(t instanceof en))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Je(n,Fe,t)})}catch(t){Je(this,Fe,t)}}var Ue=0,Ve=2,Fe=3;function qe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}qe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var He=new lt(function(){return new qe},function(t){t.reset()});function Ke(t,e,n){var i=He.get();return i.g=t,i.b=e,i.f=n,i}function c(t){var e;return t instanceof b?t:(Je(e=new b(W),Ve,t),e)}function y(n){return new b(function(t,e){e(n)})}function Ge(t,e,n){Ye(t,e,n,null)||Le(tt(e,t))}function Be(n){return new b(function(i){var r=n.length,o=[];if(r)for(var t=function(t,e,n){r--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==r&&i(o)},e=0;e<n.length;e++)Ge(n[e],tt(t,e,!0),tt(t,e,!1));else i(o)})}function We(t,e){t.b||t.a!=Ve&&t.a!=Fe||ze(t),t.f?t.f.next=e:t.b=e,t.f=e}function Xe(t,r,o,a){var e=Ke(null,null,null);return e.a=new b(function(n,i){e.g=r?function(t){try{var e=r.call(a,t);n(e)}catch(t){i(t)}}:n,e.b=o?function(t){try{var e=o.call(a,t);void 0===e&&t instanceof en?i(t):n(e)}catch(t){i(t)}}:i}),We(e.a.c=t,e),e.a}function Je(t,e,n){var i,r;t.a==Ue&&(t===n&&(e=Fe,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ye(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,ze(t),e!=Fe)||n instanceof en||(r=n,(i=t).g=!0,Le(function(){i.g&&tn.call(null,r)})))}function Ye(t,e,n,i){if(t instanceof b)return We(t,Ke(e||W,n||null,i)),1;if(ut(t))return t.then(e,n,i),1;if(f(t))try{var r=t.then;if(Y(r)){var o=t,a=r,s=e,u=n,c=i;function h(t){l||(l=!0,u.call(c,t))}var l=!1;try{a.call(o,function(t){l||(l=!0,s.call(c,t))},h)}catch(o){h(o)}return 1}}catch(t){return n.call(i,t),1}}function ze(t){t.h||(t.h=!0,Le(t.ec,t))}function $e(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ze(t,e,n,i){if(n==Fe&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Qe(e,n,i);else try{e.c?e.g.call(e.f):Qe(e,n,i)}catch(t){tn.call(null,t)}ft(He,e)}function Qe(t,e,n){e==Ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}b.prototype.then=function(t,e,n){return Xe(this,Y(t)?t:null,Y(e)?e:null,n)},b.prototype.$goog_Thenable=!0,(t=b.prototype).ma=function(t,e){return(t=Ke(t,t,e)).c=!0,We(this,t),this},t.o=function(t,e){return Xe(this,null,t,e)},t.cancel=function(t){var e;this.a==Ue&&(e=new en(t),Le(function(){!function t(e,n){if(e.a==Ue)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,!((o=s.a==e?s:o)&&1<r)));s=s.next)o||(a=s);o&&(i.a==Ue&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):$e(i),Ze(i,o,Fe,n)))}e.c=null}else Je(e,Fe,n)}(this,e)},this))},t.Yc=function(t){this.a=Ue,Je(this,Ve,t)},t.Zc=function(t){this.a=Ue,Je(this,Fe,t)},t.ec=function(){for(var t;t=$e(this);)Ze(this,t,this.a,this.i);this.h=!1};var tn=Pe;function en(t){o.call(this,t)}function nn(){this.wa=this.wa,this.na=this.na}n(en,o);var rn=0;function on(t){t.wa||(t.wa=!0,t.Ba(),0==rn)||(t=t,Object.prototype.hasOwnProperty.call(t,z)&&t[z]||(t[z]=++$))}nn.prototype.wa=!(en.prototype.name="cancel"),nn.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var x=Object.freeze||function(t){return t},an=!ve||9<=Number(Te),sn=ve&&!Ae("9"),un=(()=>{if(!m.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{m.addEventListener("test",W,e),m.removeEventListener("test",W,e)}catch(t){}return t})();function h(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function cn(t,e){if(h.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(be){t:{try{fe(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:hn[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}h.prototype.preventDefault=function(){this.defaultPrevented=!0},n(cn,h);var hn=x({2:"touch",3:"pen",4:"mouse"}),ln=(cn.prototype.preventDefault=function(){cn.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,sn)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},cn.prototype.f=function(){return this.a},"closure_listenable_"+(1e6*Math.random()|0)),fn=0;function dn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Ta=r,this.key=++fn,this.ua=this.Na=!1}function pn(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function vn(t){this.src=t,this.a={},this.b=0}function mn(t,e){var n=e.type;n in t.a&&It(t.a[n],e)&&(pn(e),0==t.a[n].length)&&(delete t.a[n],t.b--)}function gn(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==i)return r}return-1}vn.prototype.add=function(t,e,n,i,r){var o=t.toString(),a=((t=this.a[o])||(t=this.a[o]=[],this.b++),gn(t,e,i,r));return-1<a?(e=t[a],n||(e.Na=!1)):((e=new dn(e,this.src,o,!!i,r)).Na=n,t.push(e)),e};var bn="closure_lm_"+(1e6*Math.random()|0),yn={};function wn(t,e,n,i,r){if(i&&i.once)Tn(t,e,n,i,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)wn(t,e[o],n,i,r);else n=Rn(n),t&&t[ln]?Cn(t,e,n,f(i)?!!i.capture:!!i,r):In(t,e,n,!1,i,r)}function In(t,e,n,i,r,o){if(!e)throw Error("Invalid event type");var a,s,u=f(r)?!!r.capture:!!r,c=_n(t);if(c||(t[bn]=c=new vn(t)),!(n=c.add(e,n,i,u,o)).proxy)if(a=Nn,i=s=an?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=i).src=t,i.listener=n,t.addEventListener)void 0===(r=un?r:u)&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(An(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}}function Tn(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tn(t,e[o],n,i,r);else n=Rn(n),t&&t[ln]?Dn(t,e,n,f(i)?!!i.capture:!!i,r):In(t,e,n,!0,i,r)}function a(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)a(t,e[o],n,i,r);else i=f(i)?!!i.capture:!!i,n=Rn(n),t&&t[ln]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=gn(o=t.a[e],n,i,r))&&(pn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length)&&(delete t.a[e],t.b--)):(t=t&&_n(t))&&(e=t.a[e.toString()],n=(t=-1)<(t=e?gn(e,n,i,r):t)?e[t]:null)&&En(n)}function En(t){var e,n,i;"number"!=typeof t&&t&&!t.ua&&((e=t.src)&&e[ln]?mn(e.u,t):(n=t.type,i=t.proxy,e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(An(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=_n(e))?(mn(n,t),0==n.b&&(n.src=null,e[bn]=null)):pn(t)))}function An(t){return t in yn?yn[t]:yn[t]="on"+t}function kn(t,e,n,i){var r=!0;if((t=_n(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=Sn(o,i),r=r&&!1!==o)}return r}function Sn(t,e){var n=t.listener,i=t.Ta||t.src;return t.Na&&En(t),n.call(i,e)}function Nn(t,e){if(t.ua)return!0;if(an)return Sn(t,new cn(e,this));if(!e)t:{e=["window","event"];for(var n=m,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new cn(i=e,this),n=!0,!(i.keyCode<0||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}!r&&null!=i.returnValue||(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=kn(i[r],t,!0,e),n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=kn(i[r],t,!1,e),n=n&&o}return n}function _n(t){return(t=t[bn])instanceof vn?t:null}var On="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rn(e){return Y(e)?e:(e[On]||(e[On]=function(t){return e.handleEvent(t)}),e[On])}function v(){nn.call(this),this.u=new vn(this),(this.Yb=this).eb=null}function Cn(t,e,n,i,r){t.u.add(String(e),n,!1,i,r)}function Dn(t,e,n,i,r){t.u.add(String(e),n,!0,i,r)}function Pn(t,e,n,i){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.ua&&u.capture==n&&(a=u.listener,s=u.Ta||u.src,u.Na&&mn(t.u,u),r=!1!==a.call(s,i)&&r)}return r&&!i.defaultPrevented}function Ln(t,e,n){if(Y(t))n&&(t=d(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=d(t.handleEvent,t)}return 2147483647<Number(e)?-1:m.setTimeout(t,e||0)}function Mn(n){var i=null;return new b(function(t,e){-1==(i=Ln(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw m.clearTimeout(i),t})}function xn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(J(t))for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);else for(i in e=[],n=0,t)e[n++]=t[i];return e}function jn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(J(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n)}else for(var i in e=[],n=0,t)e[n++]=i;return e}}function Un(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Un)for(n=t.X(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Vn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];Fn(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){for(var r={},n=e=0;e<t.a.length;)Fn(r,i=t.a[e])||(r[t.a[n++]=i]=1),e++;t.a.length=n}}function Fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n(v,nn),v.prototype[ln]=!0,v.prototype.addEventListener=function(t,e,n,i){wn(this,t,e,n,i)},v.prototype.removeEventListener=function(t,e,n,i){a(this,t,e,n,i)},v.prototype.dispatchEvent=function(t){var e;if(n=this.eb)for(e=[];n;n=n.eb)e.push(n);var n=this.Yb,i=t.type||t;if("string"==typeof t?t=new h(t,n):t instanceof h?t.target=t.target||n:(a=t,l(t=new h(i,n),a)),a=!0,e)for(var r=e.length-1;0<=r;r--)var o=t.b=e[r],a=Pn(o,i,!0,t)&&a;if(a=Pn(o=t.b=n,i,!0,t)&&a,a=Pn(o,i,!1,t)&&a,e)for(r=0;r<e.length;r++)a=Pn(o=t.b=e[r],i,!1,t)&&a;return a},v.prototype.Ba=function(){if(v.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)pn(n[i]);delete e.a[t],e.b--}}this.eb=null},(t=Un.prototype).V=function(){Vn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Vn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Fn(this.b,t)?this.b[t]:e},t.set=function(t,e){Fn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var qn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hn(t,e){this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Hn?(this.h=void 0!==e?e:t.h,Kn(this,t.f),this.i=t.i,this.b=t.b,Gn(this,t.l),this.c=t.c,Bn(this,ci(t.a)),this.g=t.g):t&&(t=String(t).match(qn))?(this.h=!!e,Kn(this,t[1]||"",!0),this.i=Yn(t[2]||""),this.b=Yn(t[3]||"",!0),Gn(this,t[4]),this.c=Yn(t[5]||"",!0),Bn(this,t[6]||"",!0),this.g=Yn(t[7]||"")):(this.h=!!e,this.a=new ii(null,this.h))}function Kn(t,e,n){t.f=n?Yn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Gn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Bn(t,e,n){var i,r;e instanceof ii?(t.a=e,i=t.a,(r=t.h)&&!i.f&&(ri(i),i.c=null,i.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ai(this,e),ui(this,n,t))},i)),i.f=r):(n||(e=zn(e,ei)),t.a=new ii(e,t.h))}function w(t,e,n){t.a.set(e,n)}function Wn(t,e){return t.a.get(e)}function Xn(t){return t instanceof Hn?new Hn(t):new Hn(t,void 0)}function Jn(t,e){var n=new Hn(null,void 0);return Kn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Yn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$n),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function $n(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Hn.prototype.toString=function(){var t=[],e=this.f,n=(e&&t.push(zn(e,Zn,!0),":"),this.b);return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(zn(e,Zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(zn(n,"/"==n.charAt(0)?ti:Qn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",zn(n,ni)),t.join("")},Hn.prototype.resolve=function(t){var e=new Hn(this),n=!!t.f;n?Kn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var i=t.c;if(n)Gn(e,t.l);else if(n=!!t.c)if("/"!=i.charAt(0)&&(this.b&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(u(r,"./")||u(r,"/.")){for(var i=0==r.lastIndexOf("/",0),r=r.split("/"),o=[],a=0;a<r.length;){var s=r[a++];"."==s?i&&a==r.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&a==r.length&&o.push("")):(o.push(s),i=!0)}i=o.join("/")}else i=r;return n?e.c=i:n=""!==t.a.toString(),n?Bn(e,ci(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Zn=/[#\/\?@]/g,Qn=/[#\?:]/g,ti=/[#\?]/g,ei=/[#\?@]/g,ni=/#/g;function ii(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ri(t){if(!t.a&&(t.a=new Un,t.b=0,t.c)){var e=t.c;if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i,r=e[n].indexOf("="),o=null;0<=r?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],r=i,o=o?decodeURIComponent(o.replace(/\+/g," ")):"",t.add(decodeURIComponent(r.replace(/\+/g," ")),o)}}}}function oi(t){var e=jn(t);if(void 0===e)throw Error("Keys are undefined");var n=new ii(null,void 0);t=xn(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];Array.isArray(o)?ui(n,r,o):n.add(r,o)}return n}function ai(t,e){ri(t),e=hi(t,e),Fn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Fn((t=t.a).b,e))&&(delete t.b[e],t.c--,t.a.length>2*t.c)&&Vn(t)}function si(t,e){return ri(t),e=hi(t,e),Fn(t.a.b,e)}function ui(t,e,n){ai(t,e),0<n.length&&(t.c=null,t.a.set(hi(t,e),At(n)),t.b+=n.length)}function ci(t){var e=new ii;return e.c=t.c,t.a&&(e.a=new Un(t.a),e.b=t.b),e}function hi(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function li(t){var e=[];return function t(e,n,i){if(null==n)i.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var r=n;n=r.length,i.push("[");for(var o="",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=",";return i.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,r)&&"function"!=typeof(a=n[r])&&(i.push(o),vi(r,i),i.push(":"),t(e,a,i),o=",");return i.push("}")}n=n.valueOf()}switch(typeof n){case"string":vi(n,i);break;case"number":i.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":i.push(String(n));break;case"function":i.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new fi,t,e),e.join("")}function fi(){}(t=ii.prototype).add=function(t,e){ri(this),this.c=null,t=hi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,i){ri(this),this.a.forEach(function(t,e){p(t,function(t){n.call(i,t,e,this)},this)},this)},t.X=function(){ri(this);for(var t=this.a.V(),e=this.a.X(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},t.V=function(t){ri(this);var e=[];if("string"==typeof t)si(this,t)&&(e=Et(e,this.a.get(hi(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Et(e,t[n])}return e},t.set=function(t,e){return ri(this),this.c=null,si(this,t=hi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++)for(var i=e[n],r=encodeURIComponent(String(i)),i=this.V(i),o=0;o<i.length;o++){var a=r;""!==i[o]&&(a+="="+encodeURIComponent(String(i[o]))),t.push(a)}return this.c=t.join("&")};var di={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},pi=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function vi(t,e){e.push('"',t.replace(pi,function(t){var e=di[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),di[t]=e),e}),'"')}function mi(){var t=I();return ve&&Te&&11==Te||/Edge\/\d+/.test(t)}function gi(){return m.window&&m.window.location.href||self&&self.location&&self.location.href||""}function bi(t,e){e=e||m.window;var n="about:blank";t&&(n=te(ne(t))),e.location.href=n}function yi(t){return!!((t=(t||I()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function wi(t){t=t||m.window;try{t.close()}catch(t){}}function Ii(t,e,n){var i=Math.floor(1e9*Math.random()).toString(),r=(e=e||500,n=n||600,(window.screen.availHeight-n)/2),o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=I().toLowerCase(),i&&(e.target=i,u(n,"crios/"))&&(e.target="_blank"),Di(I())==Ri&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",t=(t=e)||{},i=window,e=n instanceof Qt?n:ne(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(a){case"width":case"height":case"top":case"left":r.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:r.push(a+"="+(t[a]?1:0))}var a=r.join(",");if((s("iPhone")&&!s("iPod")&&!s("iPad")||s("iPad")||s("iPod"))&&i.navigator&&i.navigator.standalone&&n&&"_self"!=n?(Ft(a=De(document,"A"),"HTMLAnchorElement"),e instanceof Qt||(e="object"==typeof e&&e.ra?e.qa():String(e),ee.test(e)||(e="about:invalid#zClosurez"),e=new Qt(re,e)),a.href=te(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open("",n,a),t=te(e),a&&(ge&&u(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=ue('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+le(t)+'">'),i=a.document)&&(i.write(ae(t)),i.close())):(a=i.open(te(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var Ti=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ei=/^[^@]+@[^@]+$/;function Ai(){var e=null;return new b(function(t){"complete"==m.document.readyState?t():(e=function(){t()},Tn(window,"load",e))}).o(function(t){throw a(window,"load",e),t})}function ki(t){return t=t||I(),!("file:"!==Ui()&&"ionic:"!==Ui()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Si(){var t=m.window;try{return t&&t!=t.top}catch(t){}}function Ni(){return void 0!==m.WorkerGlobalScope&&"function"==typeof m.importScripts}function _i(){return Fl.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Fl.default.INTERNAL.hasOwnProperty("node")?"Node":Ni()?"Worker":"Browser"}function Oi(){var t=_i();return"ReactNative"===t||"Node"===t}var Ri="Firefox",Ci="Chrome";function Di(t){var e=t.toLowerCase();return u(e,"opera/")||u(e,"opr/")||u(e,"opios/")?"Opera":u(e,"iemobile")?"IEMobile":u(e,"msie")||u(e,"trident/")?"IE":u(e,"edge/")?"Edge":u(e,"firefox/")?Ri:u(e,"silk/")?"Silk":u(e,"blackberry")?"Blackberry":u(e,"webos")?"Webos":!u(e,"safari/")||u(e,"chrome/")||u(e,"crios/")||u(e,"android")?!u(e,"chrome/")&&!u(e,"crios/")||u(e,"edge/")?u(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ci:"Safari"}var Pi={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function Li(t,e){e=e||[];var n,i=[],r={};for(n in Pi)r[Pi[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=["FirebaseCore-web"]),"Browser"===(i=_i())?i=Di(r=I()):"Worker"===i&&(i=Di(r=I())+"-"+i),i+"/JsCore/"+t+"/"+e.join(",")}function I(){return m.navigator&&m.navigator.userAgent||""}function T(t,e){t=t.split("."),e=e||m;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function Mi(){try{var t=m.localStorage,e=Ki();if(t)return t.setItem(e,"1"),t.removeItem(e),!mi()||!!m.indexedDB}catch(t){return Ni()&&!!m.indexedDB}return!1}function xi(){return(ji()||"chrome-extension:"===Ui()||ki())&&!Oi()&&Mi()&&!Ni()}function ji(){return"http:"===Ui()||"https:"===Ui()}function Ui(){return m.location&&m.location.protocol||null}function Vi(t){return!yi(t=t||I())&&Di(t)!=Ri}function Fi(t){return void 0===t?null:li(t)}function qi(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Hi(t){if(null!==t)return JSON.parse(t)}function Ki(t){return t||Math.floor(1e9*Math.random()).toString()}function Gi(t){return"Safari"!=Di(t=t||I())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Bi(){var t=m.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Wi(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=I(),e=_i(),this.b=yi(t)||"ReactNative"===e}function Xi(){var t=m.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Ji(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Yi(){return T("fireauth.oauthhelper",m)||T("fireauth.iframe",m)}Wi.prototype.get=function(){var t=m.navigator;return!t||"boolean"!=typeof t.onLine||!ji()&&"chrome-extension:"!==Ui()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zi,$i={};function Zi(t){$i[t]||($i[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Qi={};Object.defineProperty(Qi,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qi,"abcd",{configurable:!0,enumerable:!0,value:2}),zi=2==Qi.abcd}catch(t){zi=!1}function E(t,e,n){zi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function A(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&E(t,n,e[n])}function tr(t){var e={};return A(e,t),e}function er(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)E(e,n,er(t[n]));return e}function nr(t){var e=t&&(t[sr]?"phone":null);if(!(e&&t&&t[ar]))throw new g("internal-error","Internal assert: invalid MultiFactorInfo object");E(this,"uid",t[ar]),E(this,"displayName",t[rr]||null);var n=null;E(this,"enrollmentTime",n=t[or]?new Date(t[or]).toUTCString():n),E(this,"factorId",e)}function ir(t){try{var e=new ur(t)}catch(t){e=null}return e}nr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var rr="displayName",or="enrolledAt",ar="mfaEnrollmentId",sr="phoneInfo";function ur(t){nr.call(this,t),E(this,"phoneNumber",t[sr])}function cr(t){var e={},n=t[dr],i=t[vr],r=t[mr];if(t=ir(t[pr]),!r||r!=lr&&r!=fr&&!n||r==fr&&!i||r==hr&&!t)throw Error("Invalid checkActionCode response!");r==fr?(e[br]=n||null,e[wr]=n||null,e[gr]=i):(e[br]=i||null,e[wr]=i||null,e[gr]=n||null),e[yr]=t||null,E(this,Tr,r),E(this,Ir,er(e))}n(ur,nr),ur.prototype.v=function(){var t=ur.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var hr="REVERT_SECOND_FACTOR_ADDITION",lr="EMAIL_SIGNIN",fr="VERIFY_AND_CHANGE_EMAIL",dr="email",pr="mfaInfo",vr="newEmail",mr="requestType",gr="email",br="fromEmail",yr="multiFactorInfo",wr="previousEmail",Ir="data",Tr="operation";function Er(t){var e=Wn(t=Xn(t),Ar)||null,n=Wn(t,kr)||null,i=(i=Wn(t,_r)||null)&&Rr[i]||null;if(!e||!n||!i)throw new g("argument-error",Ar+", "+kr+"and "+_r+" are required in a valid action code URL.");A(this,{apiKey:e,operation:i,code:n,continueUrl:Wn(t,Sr)||null,languageCode:Wn(t,Nr)||null,tenantId:Wn(t,Or)||null})}var Ar="apiKey",kr="oobCode",Sr="continueUrl",Nr="languageCode",_r="mode",Or="tenantId",Rr={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hr,signIn:lr,verifyAndChangeEmail:fr,verifyEmail:"VERIFY_EMAIL"};function Cr(t){try{return new Er(t)}catch(t){return null}}function Dr(t){if(void 0===(e=t[jr]))throw new g("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new g("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(i=t[Pr])&&"object"==typeof i){var e=i[Fr],n=i[Ur],i=i[Vr];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new g("argument-error",Ur+" property must be a boolean when specified.");if(this.g=!!n,void 0!==i&&("string"!=typeof i||"string"==typeof i&&!i.length))throw new g("argument-error",Vr+" property must be a non empty string when specified.");this.b=i||null}else{if(void 0!==e)throw new g("argument-error",Fr+" property must be a non empty string when specified.");if(void 0!==n||void 0!==i)throw new g("missing-android-pkg-name")}}else if(void 0!==i)throw new g("argument-error",Pr+" property must be a non null object when specified.");if(this.f=null,(e=t[xr])&&"object"==typeof e){if("string"==typeof(e=e[qr])&&e.length)this.f=e;else if(void 0!==e)throw new g("argument-error",qr+" property must be a non empty string when specified.")}else if(void 0!==e)throw new g("argument-error",xr+" property must be a non null object when specified.");if(void 0!==(e=t[Mr])&&"boolean"!=typeof e)throw new g("argument-error",Mr+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Lr])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new g("argument-error",Lr+" property must be a non empty string when specified.");this.i=t||null}var Pr="android",Lr="dynamicLinkDomain",Mr="handleCodeInApp",xr="iOS",jr="url",Ur="installApp",Vr="minimumVersion",Fr="packageName",qr="bundleId";function Hr(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Kr=null;function Gr(t){function e(t){n+=String.fromCharCode(t)}var n="",i=t;function r(t){for(;l<i.length;){var e=i.charAt(l++),n=Kr[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}if(!Kr){Kr={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),a=["+/=","+/","-_=","-_.","-_"],s=0;s<5;s++)for(var u=o.concat(a[s].split("")),c=0;c<u.length;c++){var h=u[c];void 0===Kr[h]&&(Kr[h]=c)}}for(var l=0;;){var f=r(-1),d=r(0),p=r(64),v=r(64);if(64===v&&-1===f)break;e(f<<2|d>>4),64!=p&&(e(d<<4&240|p>>2),64!=v)&&e(p<<6&192|v)}return n}function Br(t){var e=Xr(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Wr(t){try{return new Br(t)}catch(t){return null}}function Xr(t){if(t&&3==(t=t.split(".")).length){for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Gr(t))}catch(t){}}return null}Br.prototype.S=function(){return this.f},Br.prototype.i=function(){return this.b},Br.prototype.toString=function(){return this.g};var Jr="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Yr=["client_id","response_type","scope","redirect_uri","state"],zr={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Yr},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Yr},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Yr},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Jr},gd:{Ha:"locale",ta:640,sa:600,ea:"apple.com",Va:[]}};function $r(t){for(var e in zr)if(zr[e].ea==t)return zr[e];return null}function Zr(t){var e={},n=(e["facebook.com"]=io,e["google.com"]=oo,e["github.com"]=ro,e["twitter.com"]=ao,t&&t[to]);try{if(n)return new(e[n]||no)(t);if(void 0!==t[Qr])return new eo(t)}catch(t){}return null}var Qr="idToken",to="providerId";function eo(t){var e,n=t[to];if(!(n=!n&&t[Qr]&&(e=Wr(t[Qr]))&&e.a?e.a:n))throw Error("Invalid additional user info!");e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),E(this,"providerId",n="anonymous"!=n&&"custom"!=n?n:null),E(this,"isNewUser",e)}function no(t){eo.call(this,t),E(this,"profile",er((t=Hi(t.rawUserInfo||"{}"))||{}))}function io(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");E(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");E(this,"username",t.screenName||null)}function so(t){var e=Wn(i=Xn(t),"link"),n=Wn(Xn(e),"link"),i=Wn(i,"deep_link_id");return Wn(Xn(i),"link")||i||n||e||t}function uo(t,e){if(!t&&!e)throw new g("internal-error","Internal assert: no raw session string available");if(t&&e)throw new g("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:ho}n(no,eo),n(io,no),n(ro,no),n(oo,no),n(ao,no);var co="enroll",ho="signin";function lo(){}function fo(t,n){return t.then(function(t){if(t[ts]){var e=Wr(t[ts]);if(e&&n==e.h)return t}throw new g("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==rt+"user-not-found"?new g("user-mismatch"):t})}function po(t,e){if(!e)throw new g("internal-error","failed to construct a credential");this.a=e,E(this,"providerId",t),E(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function mo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(t){}return null}function go(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&E(this,"idToken",e.idToken),e.accessToken&&E(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&E(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new g("internal-error","failed to construct a credential");E(this,"accessToken",e.oauthToken),E(this,"secret",e.oauthTokenSecret)}E(this,"providerId",t),E(this,"signInMethod",n)}function bo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:oi(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function yo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new go(t.providerId,e,t.signInMethod)}catch(t){}}return null}function wo(t,e){this.Oc=e||[],A(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=($r(t)||{}).Ha||null,this.kb=null}function Io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new g("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,t,[])}function k(t){wo.call(this,t,Yr),this.a=[]}function To(){k.call(this,"facebook.com")}function Eo(t){var e;if(t)return f(e=t)&&(e=t.accessToken),(new To).credential({accessToken:e});throw new g("argument-error","credential failed: expected 1 argument (the OAuth access token).")}function Ao(){k.call(this,"github.com")}function ko(t){var e;if(t)return f(e=t)&&(e=t.accessToken),(new Ao).credential({accessToken:e});throw new g("argument-error","credential failed: expected 1 argument (the OAuth access token).")}function So(){k.call(this,"google.com"),this.Aa("profile")}function No(t,e){var n=t;return f(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function _o(){wo.call(this,"twitter.com",Jr)}function Oo(t,e){var n=t;if((n=f(n)?n:{oauthToken:t,oauthTokenSecret:e}).oauthToken&&n.oauthTokenSecret)return new go("twitter.com",n,"twitter.com");throw new g("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).")}function Ro(t,e,n){this.a=t,this.f=e,E(this,"providerId","password"),E(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new Ro(t.email,t.password,t.signInMethod):null}function Do(){A(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(e=Lo(e))return new Ro(t,e.code,Do.EMAIL_LINK_SIGN_IN_METHOD);throw new g("argument-error","Invalid email link!")}function Lo(t){return(t=Cr(t=so(t)))&&t.operation===lr?t:null}function Mo(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new g("internal-error");this.a=t,E(this,"providerId","phone"),this.ea="phone",E(this,"signInMethod","phone")}function xo(e){var n;return e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)?(n={},p(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Mo(n)):null}function jo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Uo(t){try{this.a=t||Fl.default.auth()}catch(t){throw new g("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}A(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(t,e){if(!t)throw new g("missing-verification-id");if(e)return new Mo({bb:t,ab:e});throw new g("missing-verification-code")}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Mo({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return No(o,n);case"facebook.com":return Eo(n);case"github.com":return ko(n);case"twitter.com":return Oo(n,i);default:return n||i||o||a?a?0==e.indexOf("saml.")?new po(e,a):new go(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new k(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new g("invalid-oauth-provider")}function Ho(t,e,n,i,r,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=a||null,this.a=r||null,!this.g&&!this.a)throw new g("invalid-auth-event");if(this.g&&this.a)throw new g("invalid-auth-event");if(this.g&&!this.f)throw new g("invalid-auth-event")}function Ko(t){return(t=t||{}).type?new Ho(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&nt(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}uo.prototype.Fa=function(){return this.a?c(this.a):c(this.b)},uo.prototype.v=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ia=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.v=function(){},po.prototype.ia=function(t){return bs(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ys(t,n)},po.prototype.c=function(t,e){return fo(ws(t,vo(this)),e)},po.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ia=function(t){return bs(t,bo(this))},go.prototype.b=function(t,e){var n=bo(this);return n.idToken=e,ys(t,n)},go.prototype.c=function(t,e){return fo(ws(t,bo(this)),e)},go.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},wo.prototype.Ia=function(t){return this.Fb=Ut(t),this},n(Io,wo),n(k,wo),k.prototype.Aa=function(t){return wt(this.a,t)||this.a.push(t),this},k.prototype.Nb=function(){return At(this.a)},k.prototype.credential=function(t,e){t=f(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(t.idToken||t.accessToken)return new go(this.providerId,t,this.providerId);throw new g("argument-error","credential failed: must provide the ID token and/or the access token.")},n(To,k),E(To,"PROVIDER_ID","facebook.com"),E(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),n(Ao,k),E(Ao,"PROVIDER_ID","github.com"),E(Ao,"GITHUB_SIGN_IN_METHOD","github.com"),n(So,k),E(So,"PROVIDER_ID","google.com"),E(So,"GOOGLE_SIGN_IN_METHOD","google.com"),n(_o,wo),E(_o,"PROVIDER_ID","twitter.com"),E(_o,"TWITTER_SIGN_IN_METHOD","twitter.com"),Ro.prototype.ia=function(t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?S(t,_s,{email:this.a,oobCode:this.f}):S(t,zs,{email:this.a,password:this.f})},Ro.prototype.b=function(t,e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?S(t,Os,{idToken:e,email:this.a,oobCode:this.f}):S(t,Hs,{idToken:e,email:this.a,password:this.f})},Ro.prototype.c=function(t,e){return fo(this.ia(t),e)},Ro.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},A(Do,{PROVIDER_ID:"password"}),A(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),A(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ia=function(t){return t.cb(jo(this))},Mo.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,S(t,Zs,n)},Mo.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",fo(t=S(t,Qs,n),e)},Mo.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Uo.prototype.cb=function(i,r){var o=this.a.b;return c(r.verify()).then(function(e){if("string"!=typeof e)throw new g("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==r.type)throw new g("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=f(i)?i.session:null,n=f(i)?i.phoneNumber:i;return(t&&t.type==co?t.Fa().then(function(t){return S(o,Gs,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==ho?t.Fa().then(function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}},S(o,Bs,t).then(function(t){return t.phoneResponseInfo.sessionInfo})}):S(o,Fs,{phoneNumber:n,recaptchaToken:e})).then(function(t){return"function"==typeof r.reset&&r.reset(),t},function(t){throw"function"==typeof r.reset&&r.reset(),t})})},A(Uo,{PROVIDER_ID:"phone"}),A(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ho.prototype.S=function(){return this.h},Ho.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Bo,Wo=null;function Xo(t){var e="unauthorized-domain",n=void 0,i=Xn(t);t=i.b,"chrome-extension"==(i=i.f)?n=he("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==i||"https"==i?n=he("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",g.call(this,e,n)}function Jo(t,e,n){g.call(this,t,n),(t=e||{}).Gb&&E(this,"email",t.Gb),t.da&&E(this,"phoneNumber",t.da),t.credential&&E(this,"credential",t.credential),t.Wb&&E(this,"tenantId",t.Wb)}function Yo(t){if(t.code){var e=t.code||"",n=(0==e.indexOf(rt)&&(e=e.substring(rt.length)),{credential:Fo(t),Wb:t.tenantId});if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new g(e,t.message||void 0);return new Jo(e,n,t.message)}return null}function zo(){}function $o(t){return t.c||(t.c=t.b())}function Zo(){}function Qo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function ta(){}function ea(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=d(this.oc,this),this.a.onerror=d(this.Pb,this),this.a.onprogress=d(this.pc,this),this.a.ontimeout=d(this.tc,this)}function na(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ia(t,e,n){this.reset(t,e,n,void 0,void 0)}function ra(t){this.f=t,this.b=this.c=this.a=null}function oa(t,e){this.name=t,this.value=e}n(Xo,g),n(Jo,g),Jo.prototype.v=function(){var t={code:this.code,message:this.message},e=(this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId),this.credential&&this.credential.v());return e&&l(t,e),t},Jo.prototype.toJSON=function(){return this.v()},zo.prototype.c=null,n(Zo,zo),Zo.prototype.a=function(){var t=Qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return Qo(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Zo,n(ta,zo),ta.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ea;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(t=ea.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,na(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",na(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,na(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ia.prototype.a=null,ia.prototype.reset=function(t,e,n,i,r){delete this.a},oa.prototype.toString=function(){return this.name};var aa=new oa("SEVERE",1e3),sa=new oa("WARNING",900),ua=new oa("CONFIG",700),ca=new oa("FINE",500);ra.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(ht("Root logger has no level set."),null))}(this).value)for(Y(e)&&(e=e()),t=new ia(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ha,la={},fa=null;function da(t){var e,n,i;return fa||(fa=new ra(""),(la[""]=fa).c=ua),(e=la[t])||(e=new ra(t),i=t.lastIndexOf("."),n=t.substr(i+1),(i=da(t.substr(0,i))).b||(i.b={}),(i.b[n]=e).a=i,la[t]=e),e}function pa(t,e){t&&t.log(ca,e,void 0)}function va(t){this.f=t}function ma(t){v.call(this),this.s=t,this.readyState=ga,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=da("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}n(va,zo),va.prototype.a=function(){return new ma(this.f)},va.prototype.b=(ha={},function(){return ha}),n(ma,v);var ga=0;function ba(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ya(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ia(t){v.call(this),this.headers=new Un,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=Ta,this.w=this.R=!1}(t=ma.prototype).open=function(t,e){if(this.readyState!=ga)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,wa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ya(this,!1)),this.readyState=ga},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,wa(this)),this.a)&&(this.readyState=3,wa(this),this.a)&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==m.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,ba(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))},t.nc=function(t){var e;this.a&&((e=this.l.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?ya(this,!0):wa(this),3==this.readyState)&&ba(this)},t.rc=function(t){this.a&&(this.response=this.responseText=t,ya(this,!0))},t.qc=function(t){this.a&&(this.response=t,ya(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(sa,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ya(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(sa,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b)return(t=this.h)&&t.log(sa,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},n(Ia,v);var Ta="",Ea=(Ia.prototype.b=da("goog.net.XhrIo"),/^https?$/i),Aa=["POST","PUT"];function ka(t,e,n,i,r){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=(t.D||Bo).a(),t.B=$o(t.D||Bo),t.a.onreadystatechange=d(t.Sb,t);try{pa(t.b,La(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return pa(t.b,La(t,"Error opening Xhr: "+e.message)),Na(t,e)}e=i||"";var o,a=new Un(t.headers);if(r){var s=r,u=function(t,e){a.set(e,t)};if(s.forEach&&"function"==typeof s.forEach)s.forEach(u,void 0);else if(J(s)||"string"==typeof s)p(s,u,void 0);else for(var c=jn(s),h=xn(s),l=h.length,f=0;f<l;f++)u.call(void 0,h[f],c&&c[f],s)}r=(t=>{t:{for(var e=Sa,n=t.length,i="string"==typeof t?t.split(""):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]})(a.X()),i=m.FormData&&e instanceof m.FormData,!wt(Aa,n)||r||i||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ca(t),0<t.g&&(t.w=(o=t.a,ve&&Ae(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),pa(t.b,La(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=d(t.Ka,t)):t.s=Ln(t.Ka,t.g,t)),pa(t.b,La(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){pa(t.b,La(t,"Send error: "+e.message)),Na(t,e)}}function Sa(t){return"content-type"==t.toLowerCase()}function Na(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,_a(t),Ra(t)}function _a(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Oa(t){if(t.c&&void 0!==K)if(t.B[1]&&4==Da(t)&&2==Pa(t))pa(t.b,La(t,"Local request error detected and ignored"));else if(t.i&&4==Da(t))Ln(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==Da(t)){pa(t.b,La(t,"Request complete")),t.c=!1;try{var e,n,i,r,o=Pa(t);switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break;default:a=!1}if((e=a)||((n=0===o)&&(!(r=String(t.l).match(qn)[1]||null)&&m.self&&m.self.location&&(r=(i=m.self.location.protocol).substr(0,i.length-1)),n=!Ea.test(r?r.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<Da(t)?t.a.statusText:""}catch(e){pa(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+Pa(t)+"]",_a(t)}}finally{Ra(t)}}}function Ra(t,e){if(t.a){Ca(t);var n=t.a,i=t.B[0]?W:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(aa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ca(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(m.clearTimeout(t.s),t.s=null)}function Da(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<Da(t)?t.a.status:-1}catch(t){return-1}}function La(t,e){return e+" ["+t.P+" "+t.l+" "+Pa(t)+"]"}function Ma(t){var e=Wa;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function xa(t,e,n){t.a=!0,t.c=n,t.f=!e,Fa(t)}function ja(t){if(t.a){if(!t.u)throw new qa;t.u=!1}}function Ua(t,e,n,i){t.g.push([e,n,i]),t.a&&Fa(t)}function Va(t){return yt(t.g,function(t){return Y(t[1])})}function Fa(t){var e;t.h&&t.a&&Va(t)&&(n=t.h,(e=Ga[n])&&(m.clearTimeout(e.a),delete Ga[n]),t.h=0),t.b&&(t.b.l--,delete t.b);for(var n=t.c,i=e=!1;t.g.length&&!t.i;){var r=(a=t.g.shift())[0],o=a[1],a=a[2];if(r=t.f?o:r)try{var s=r.call(a||t.s,n);void 0!==s&&(t.f=t.f&&(s==n||s instanceof Error),t.c=n=s),(ut(n)||"function"==typeof m.Promise&&n instanceof m.Promise)&&(i=!0,t.i=!0)}catch(i){n=i,t.f=!0,Va(t)||(e=!0)}}t.c=n,i&&(s=d(t.m,t,!0),i=d(t.m,t,!1),n instanceof Ma?(Ua(n,s,i),n.B=!0):n.then(s,i)),e&&(n=new Ka(n),Ga[n.a]=n,t.h=n.a)}function qa(){o.call(this)}function Ha(){o.call(this)}function Ka(t){this.a=m.setTimeout(d(this.c,this),0),this.b=t}(t=Ia.prototype).Ka=function(){void 0!==K&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pa(this.b,La(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(pa(this.b,La(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ra(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ra(this,!0)),Ia.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?Oa(this):this.Hc())},t.Hc=function(){Oa(this)},t.getResponse=function(){try{if(this.a){if("response"in this.a)return this.a.response;switch(this.m){case Ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;t&&t.log(aa,"Response type "+this.m+" is not supported on this browser",void 0)}return null}catch(t){return pa(this.b,"Can not get response: "+t.message),null}},Ma.prototype.cancel=function(t){var e;this.a?this.c instanceof Ma&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ha,ja(this),xa(this,!1,t)))},Ma.prototype.m=function(t,e){this.i=!1,xa(this,t,e)},Ma.prototype.then=function(t,e,n){var i,r,o=new b(function(t,e){i=t,r=e});return Ua(this,i,function(t){t instanceof Ha?o.cancel():r(t)}),o.then(t,e,n)},Ma.prototype.$goog_Thenable=!0,n(qa,o),qa.prototype.message="Deferred has already fired",qa.prototype.name="AlreadyCalledError",n(Ha,o),Ha.prototype.message="Deferred was canceled",Ha.prototype.name="CanceledError",Ka.prototype.c=function(){throw delete Ga[this.a],this.b};var Ga={};function Ba(t){var e=document,n=Xt(t).toString(),i=De(document,"SCRIPT"),r={Tb:i,Ka:void 0},o=new Ma(r),a=window.setTimeout(function(){Xa(i,!0);var t=new za(Ya,"Timeout reached for loading script "+n);ja(o),xa(o,!1,t)},5e3);return r.Ka=a,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Xa(i,!1,a),ja(o),xa(o,!0,null))},i.onerror=function(){Xa(i,!0,a);var t=new za(Ja,"Error while loading script "+n);ja(o),xa(o,!1,t)},l(r={},{type:"text/javascript",charset:"UTF-8"}),Ne(i,r),r=t,Ft(t=i,"HTMLScriptElement"),t.src=Xt(r),(r=B=null===B?(r=(r=(r=m.document).querySelector&&r.querySelector("script[nonce]"))&&(r.nonce||r.getAttribute("nonce")))&&G.test(r)?r:"":B)&&t.setAttribute("nonce",r),((r=((t=e)||document).getElementsByTagName("HEAD"))&&0!=r.length?r[0]:t.documentElement).appendChild(i),o}function Wa(){var t;this&&this.Tb&&(t=this.Tb)&&"SCRIPT"==t.tagName&&Xa(t,!0,this.Ka)}function Xa(t,e,n){null!=n&&m.clearTimeout(n),t.onload=W,t.onerror=W,t.onreadystatechange=W,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ja=0,Ya=1;function za(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),o.call(this,n),this.code=t}function $a(t){this.f=t}function Za(t,e,n){if(this.c=t,this.u=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||es,this.g=Ut(t.secureTokenHeaders||ns),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||is,this.a=Ut(t.firebaseHeaders||rs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_i(),!(n=m.XMLHttpRequest||n&&Fl.default.INTERNAL.node&&Fl.default.INTERNAL.node.XMLHttpRequest)&&!Ni())throw new g("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ni()?this.f=new va(self):Oi()?this.f=new $a(n):this.f=new ta,this.b=null}n(za,o),n($a,zo),$a.prototype.a=function(){return new this.f},$a.prototype.b=function(){return{}};var Qa,ts="idToken",es=new Wi(3e4,6e4),ns={"Content-Type":"application/x-www-form-urlencoded"},is=new Wi(3e4,6e4),rs={"Content-Type":"application/json"};function os(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,i,r,o,a){var s;(t=!((s=Di(s=I())==Ci&&(s=s.match(/\sChrome\/(\d+)/i))&&2==s.length?parseInt(s[1],10):null)&&s<30||ve&&Te&&!(9<Te))||Ni()?d(t.w,t):(Qa=Qa||new b(function(t,e){var n,i;n=t,i=e,((window.gapi||{}).client||{}).request?n():(m[cs]=function(){((window.gapi||{}).client||{}).request?n():i(Error("CORS_UNSUPPORTED"))},Ua(Ba(Jt(us,{onload:cs})),null,function(){i(Error("CORS_UNSUPPORTED"))},void 0))}),d(t.s,t)))(e,n,i,r,o,a)}Za.prototype.S=function(){return this.b},Za.prototype.w=function(t,n,e,i,r,o){if(Ni()&&(void 0===m.fetch||void 0===m.Headers||void 0===m.Request))throw new g("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a,s=new Ia(this.f);o&&(s.g=Math.max(0,o),a=setTimeout(function(){s.dispatchEvent("timeout")},o)),Cn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse((e=>{try{return e.a?e.a.responseText:""}catch(t){return pa(e.b,"Can not get responseText: "+t.message),""}})(this))||null}catch(t){e=null}n&&n(e)}),Dn(s,"ready",function(){a&&clearTimeout(a),on(this)}),Dn(s,"timeout",function(){a&&clearTimeout(a),on(this),n&&n(null)}),ka(s,t,e,i,r)};var us=new qt(Gt,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function hs(t){if("string"!=typeof(t=t.email)||!Ei.test(t))throw new g("invalid-email")}function ls(t){"email"in t&&hs(t)}function r(t){if(!t[ts]){if(t.mfaPendingCredential)throw new g("multi-factor-auth-required",null,Ut(t));throw new g("internal-error")}}function fs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new g("internal-error")}else{if(!t.sessionInfo)throw new g("missing-verification-id");if(!t.code)throw new g("missing-verification-code")}}Za.prototype.s=function(t,n,i,r,o){var a=this;Qa.then(function(){window.gapi.client.setApiKey(a.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:i,body:r,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Za.prototype.vb=function(){return S(this,Ks,{})},Za.prototype.xb=function(t,e){return S(this,qs,{idToken:t,email:e})},Za.prototype.yb=function(t,e){return S(this,Hs,{idToken:t,password:e})};var ds={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ps(t){if(!t.phoneVerificationInfo)throw new g("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new g("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new g("missing-verification-code")}function vs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new g("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&si(t=new ii(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function gs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=eu(t.errorMessage)),e)throw e;r(t)}function bs(t,e){return e.returnIdpCredential=!0,S(t,Ws,e)}function ys(t,e){return e.returnIdpCredential=!0,S(t,Js,e)}function ws(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,S(t,Xs,e)}function Is(t){if(!t.oobCode)throw new g("invalid-action-code")}(t=Za.prototype).zb=function(t,i){var r={idToken:t},o=[];return xt(ds,function(t,e){var n=i[e];null===n?o.push(t):e in i&&(r[e]=n)}),o.length&&(r.deleteAttribute=o),S(this,qs,r)},t.rb=function(t,e){return l(t={requestType:"PASSWORD_RESET",email:t},e),S(this,xs,t)},t.sb=function(t,e){return l(t={requestType:"EMAIL_SIGNIN",email:t},e),S(this,Ps,t)},t.qb=function(t,e){return l(t={requestType:"VERIFY_EMAIL",idToken:t},e),S(this,Ls,t)},t.Ab=function(t,e,n){return l(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),S(this,Ms,t)},t.cb=function(t){return S(this,$s,t)},t.jb=function(t,e){return S(this,Vs,{oobCode:t,newPassword:e})},t.Pa=function(t){return S(this,Es,{oobCode:t})},t.fb=function(t){return S(this,Ts,{oobCode:t})};var Ts={endpoint:"setAccountInfo",A:Is,Y:"email",C:!0},Es={endpoint:"resetPassword",A:Is,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new g("internal-error")},C:!0},As={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new g("weak-password")},G:r,U:!0,C:!0},ks={endpoint:"createAuthUri",C:!0},Ss={endpoint:"deleteAccount",M:["idToken"]},Ns={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=X(t.deleteProvider))throw new g("internal-error")}},_s={endpoint:"emailLinkSignin",M:["email","oobCode"],A:hs,G:r,U:!0,C:!0},Os={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:hs,G:r,U:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ps,G:r,C:!0,La:!0},Cs={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ps,G:r,C:!0,La:!0},Ds={endpoint:"getAccountInfo"},Ps={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new g("internal-error");hs(t)},Y:"email",C:!0},Ls={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new g("internal-error")},Y:"email",C:!0},Ms={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new g("internal-error")},Y:"email",C:!0},xs={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new g("internal-error");hs(t)},Y:"email",C:!0},js={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Us={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new g("internal-error")}},Vs={endpoint:"resetPassword",A:Is,Y:"email",C:!0},Fs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},qs={endpoint:"setAccountInfo",M:["idToken"],A:ls,U:!0},Hs={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ls(t),!t.password)throw new g("weak-password")},G:r,U:!0},Ks={endpoint:"signupNewUser",G:r,U:!0,C:!0},Gs={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new g("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new g("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new g("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new g("internal-error")},C:!0,La:!0},Bs={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new g("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new g("internal-error")},C:!0,La:!0},Ws={endpoint:"verifyAssertion",A:vs,Wa:ms,G:gs,U:!0,C:!0},Xs={endpoint:"verifyAssertion",A:vs,Wa:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new g("user-not-found");if(t.errorMessage)throw eu(t.errorMessage);r(t)},U:!0,C:!0},Js={endpoint:"verifyAssertion",A:function(t){if(vs(t),!t.idToken)throw new g("internal-error")},Wa:ms,G:gs,U:!0},Ys={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new g("invalid-custom-token")},G:r,U:!0,C:!0},zs={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new g("wrong-password")},G:r,U:!0,C:!0},$s={endpoint:"verifyPhoneNumber",A:fs,G:r,C:!0},Zs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new g("internal-error");fs(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);r(t)}},Qs={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:fs,G:r,C:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[ts]^!!t.refreshToken)throw new g("internal-error")},C:!0,La:!0};function S(h,l,f){var e,d,p;return((t,e)=>{if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||""===i)return}return 1}})(f,l.M)?(d=!!l.La,p=l.Rb||"POST",c(f).then(l.A).then(function(){l.U&&(f.returnSecureToken=!0),l.C&&h.b&&void 0===f.tenantId&&(f.tenantId=h.b);var t=h,e=d?h.l:h.h,n=l.endpoint,i=p,r=f,o=l.Eb,a=l.hb||!1,s=Xn(e+n),u=(w(s,"key",t.c),a&&w(s,"cb",et().toString()),"GET"==i);if(u)for(var c in r)r.hasOwnProperty(c)&&w(s,c,r[c]);return new b(function(e,n){ss(t,s.toString(),function(t){t?t.error?n(nu(t,o||{})):e(t):n(new g("network-request-failed"))},i,u?void 0:li(qi(r)),t.a,t.i.get())})}).then(function(t){return e=t,l.Wa?l.Wa(f,e):e}).then(l.G).then(function(){if(!l.Y)return e;if(l.Y in e)return e[l.Y];throw new g("internal-error")})):y(new g("internal-error"))}function eu(t){return nu({error:{errors:[{message:t}],code:400,message:t}})}function nu(t,e){var n,i=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(i=r[i]?new g(r[i]):null)return i;for(n in i=t.error&&t.error.message||"",l(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=i.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===i.indexOf(n))return new g(r[n],e);return new g("internal-error",e=!e&&t?Fi(t):e)}function iu(t){var o;this.b=t,this.a=null,this.nb=(o=this,(su=su||new b(function(t,e){function n(){Bi(),T("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Bi(),e(Error("Network Error"))},timeout:ou.get()})}var i;T("gapi.iframes.Iframe")?t():T("gapi.load")?n():(i="__iframefcb"+Math.floor(1e6*Math.random()).toString(),m[i]=function(){T("gapi.load")?n():e(Error("Network Error"))},c(Ba(Jt(ru,{onload:i}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw su=null,t})).then(function(){return new b(function(i,r){T("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:T("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),i()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){r(Error("Network Error"))},au.get());t.ping(e).then(e,function(){r(Error("Network Error"))})})})}))}var ru=new qt(Gt,"https://apis.google.com/js/api.js?onload=%{onload}"),ou=new Wi(3e4,6e4),au=new Wi(5e3,15e3),su=null;function uu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Jn(this.i,"/__/auth/iframe"),w(this.a,"apiKey",this.g),w(this.a,"appName",this.h),this.b=null,this.c=[]}function cu(t,e,n,i,r){this.s=t,this.m=e,this.c=n,this.u=i,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function hu(t){try{return Fl.default.app(t).auth().Ea()}catch(t){return[]}}function lu(t,e,n,i,r){this.u=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function fu(t){var s=gi();return S(t,js,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Xn(s)).f,n=n.b,i=0;i<t.length;i++){var r=t[i],o=n,a=e;if(0==r.indexOf("chrome-extension://")?Xn(r).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(Ti.test(r)?o==r:(r=r.split(".").join("\\."),new RegExp("^(.+\\."+r+"|"+r+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Xo(gi())})}function du(s){return s.l||(s.l=Ai().then(function(){s.s||(t=s.c,e=s.h,n=hu(s.b),(i=new uu(s.u,s.f,s.b)).f=t,i.b=e,i.c=At(n||[]),s.s=i.toString()),s.i=new iu(s.s);var t,e,n,i,r,o,a=s;if(!a.i)throw Error("IfcHandler must be initialized!");o=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ko(t.authEvent),e=0;e<a.g.length;e++)n=a.g[e](t)||n;(e={}).status=n?"ACK":"ERROR"}else e.status="ERROR";return c(e)},(r=a.i).nb.then(function(){r.a.register("authEvent",o,T("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})),s.l}function pu(t){return t.m||(t.w=t.c?Li(t.c,hu(t.b)):null,t.m=new Za(t.f,st(t.h),t.w)),t.m}function vu(t,e,n,i,r,o,a,s,u,c,h){return(t=new cu(t,e,n,i,r)).l=o,t.g=a,t.i=s,t.b=Ut(u||null),t.f=c,t.ub(h).toString()}function mu(t){if(this.a=t||Fl.default.INTERNAL.reactNative&&Fl.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new g("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function gu(t){this.b=t,this.a={},this.f=d(this.c,this)}uu.prototype.toString=function(){return this.f?w(this.a,"v",this.f):ai(this.a.a,"v"),this.b?w(this.a,"eid",this.b):ai(this.a.a,"eid"),this.c.length?w(this.a,"fw",this.c.join(",")):ai(this.a.a,"fw"),this.a.toString()},cu.prototype.ub=function(t){return this.h=t,this},cu.prototype.toString=function(){var t=Jn(this.s,"/__/auth/handler");if(w(t,"apiKey",this.m),w(t,"appName",this.c),w(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Fl.default.app(this.c).auth().ja()}catch(t){n=null}for(i in e.kb=n,w(t,"providerId",this.a.providerId),n=qi((e=this.a).Fb))n[i]=n[i].toString();for(var i=e.Oc,n=Ut(n),r=0;r<i.length;r++){var o=i[r];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),jt(n)||w(t,"customParameters",Fi(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&w(t,"scopes",e.join(",")),this.l?w(t,"redirectUrl",this.l):ai(t.a,"redirectUrl"),this.g?w(t,"eventId",this.g):ai(t.a,"eventId"),this.i?w(t,"v",this.i):ai(t.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Wn(t,a)&&w(t,a,this.b[a]);return this.h?w(t,"tid",this.h):ai(t.a,"tid"),this.f?w(t,"eid",this.f):ai(t.a,"eid"),(a=hu(this.c)).length&&w(t,"fw",a.join(",")),t.toString()},(t=lu.prototype).Lb=function(e,n,t){var i=new g("popup-closed-by-user"),r=new g("web-storage-unsupported"),o=this,a=!1;return this.ka().then(function(){var t,i={type:"webStorageSupport"};du(t=o).then(function(){return e=t.i,n=i,e.nb.then(function(){return new b(function(t){e.a.send(n.type,n,t,T("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&wi(e),n(r),a=!0)})}).o(function(){}).then(function(){if(!a)return n=e,new b(function(e){return function t(){Mn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!a)return Mn(t).then(function(){n(i)})})},t.Ub=function(){var t=I();return!Vi(t)&&!Gi(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,i,r,o,a,s){if(!e)return y(new g("popup-blocked"));if(a&&!Vi())return this.ka().o(function(t){wi(e),r(t)}),i(),c();this.a||(this.a=fu(pu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw wi(e),r(t),t});return i(),t}).then(function(){qo(n),a||bi(vu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,i){this.a||(this.a=fu(pu(this)));var r=this;return this.a.then(function(){qo(e),bi(vu(r.u,r.f,r.b,t,e,gi(),n,r.c,void 0,r.h,i))}).o(function(t){throw"auth/network-request-failed"==t.code&&(r.a=null),t})},t.ka=function(){var t=this;return du(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new g("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){Tt(this.g,function(t){return t==e})},(t=mu.prototype).get=function(t){return c(this.a.getItem(t)).then(function(t){return t&&Hi(t)})},t.set=function(t,e){return c(this.a.setItem(t,Fi(e)))},t.T=function(t){return c(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var bu,yu=[];function wu(t,e,n){jt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Iu(t){this.a=t}function Tu(t){this.c=t,this.b=!1,this.a=[]}function Eu(i,t,e,n){var r,o,a,s,u,c,h=e||{},l=null;return i.b?y(Error("connection_unavailable")):(u=n?800:50,c="undefined"!=typeof MessageChannel?new MessageChannel:null,new b(function(e,n){c?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),c.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},u),l={messageChannel:c,onMessage:o=function(t){t.data.eventId===r&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},i.a.push(l),c.port1.addEventListener("message",o),i.c.postMessage({eventType:t,eventId:r,data:h},[c.port2])):n(Error("connection_unavailable"))}).then(function(t){return Au(i,l),t}).o(function(t){throw Au(i,l),t}))}function Au(t,e){var n;e&&((n=e.messageChannel)&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Tt(t.a,function(t){return t==e}))}function ku(){if(!Nu())throw new g("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=m.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,e,n,i=this;Ni()&&self?(this.l=(n=Ni()?self:null,p(yu,function(t){t.b==n&&(e=t)}),e||(e=new gu(n),yu.push(e)),e),wu(this.l,"keyChanged",function(t,n){return Du(i).then(function(e){return 0<e.length&&p(i.a,function(t){t(e)}),{keyProcessed:wt(e,n.key)}})}),wu(this.l,"ping",function(){return c(["keyChanged"])})):((t=m.navigator)&&t.serviceWorker?c().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):c(null)).then(function(t){(i.h=t)&&(i.g=new Tu(new Iu(t)),Eu(i.g,"ping",null,!0).then(function(t){t[0].fulfilled&&wt(t[0].value,"keyChanged")&&(i.s=!0)}).o(function(){}))})}function Su(t){return t.m||(t.m=function r(o){return new b(function(e,n){var t=o.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var i;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(i=o,new b(function(t,e){var n=i.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return r(o)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}(t)),t.m}function Nu(){try{return m.indexedDB}catch(t){}}function _u(t){return t.objectStore("firebaseLocalStorage")}function Ou(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ru(t){return new b(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=m.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?Eu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):c();var n}function Du(i){return Su(i).then(function(t){var r=_u(Ou(t,!1));return r.getAll?Ru(r.getAll()):new b(function(e,n){var i=[],t=r.openCursor();t.onsuccess=function(t){(t=t.target.result)?(i.push(t.value),t.continue()):e(i)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==i.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var i,r=[];for(i in e)i in n&&typeof e[i]==typeof n[i]?"object"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(i.c,e),i.c=e}return n})}function Pu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Lu(t){var i=this,r=null;this.a=[],this.type="indexedDB",this.c=t,this.b=c().then(function(){var e,n;return Nu()?(e=Ki(),n="__sak"+e,bu=bu||new ku,(r=bu).set(n,e).then(function(){return r.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return r.T(n)}).then(function(){return r}).o(function(){return i.c})):i.c}).then(function(t){return i.type=t.type,t.ba(function(e){p(i.a,function(t){t(e)})}),t})}function Mu(){this.a={},this.type="inMemory"}function xu(){if(!(()=>{var t="Node"==_i();if(t=ju()||t&&Fl.default.INTERNAL.node&&Fl.default.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){}})()){if("Node"==_i())throw new g("internal-error","The LocalStorage compatibility library was not found.");throw new g("web-storage-unsupported")}this.a=ju()||Fl.default.INTERNAL.node.localStorage,this.type="localStorage"}function ju(){try{var t=m.localStorage,e=Ki();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Uu(){this.type="nullStorage"}function Vu(){if(!(()=>{var t="Node"==_i();if(t=Fu()||t&&Fl.default.INTERNAL.node&&Fl.default.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){}})()){if("Node"==_i())throw new g("internal-error","The SessionStorage compatibility library was not found.");throw new g("web-storage-unsupported")}this.a=Fu()||Fl.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Fu(){try{var t=m.sessionStorage,e=Ki();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function qu(){var t={};t.Browser=Gu,t.Node=Bu,t.ReactNative=Wu,t.Worker=Xu,this.a=t[_i()]}gu.prototype.c=function(n){var e,i=n.data.eventType,r=n.data.eventId,t=this.a[i];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:r,eventType:i,response:null}),e=[],p(t,function(t){e.push(c().then(function(){return t(n.origin,n.data.data)}))}),Be(e).then(function(t){var e=[];p(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),p(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:e})}))},Iu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Tu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(n,i){var r,o=!1,a=this;return Su(this).then(function(t){return Ru((t=_u(Ou(r=t,!0))).get(n))}).then(function(t){var e=_u(Ou(r,!0));return t?(t.value=i,Ru(e.put(t))):(a.b++,o=!0,(t={}).fbase_key=n,t.value=i,Ru(e.add(t)))}).then(function(){return a.c[n]=i,Cu(a,n)}).ma(function(){o&&a.b--})},t.get=function(e){return Su(this).then(function(t){return Ru(_u(Ou(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,i=this;return Su(this).then(function(t){return n=!0,i.b++,Ru(_u(Ou(t,!0)).delete(e))}).then(function(){return delete i.c[e],Cu(i,e)}).ma(function(){n&&i.b--})},t.ba=function(t){var n;0==this.a.length&&(Pu(n=this),function e(){n.f=setTimeout(function(){n.i=Du(n).then(function(e){0<e.length&&p(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){Tt(this.a,function(t){return t==e}),0==this.a.length&&Pu(this)},(t=Lu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){Tt(this.a,function(t){return t==e})},(t=Mu.prototype).get=function(t){return c(this.a[t])},t.set=function(t,e){return this.a[t]=e,c()},t.T=function(t){return delete this.a[t],c()},t.ba=function(){},t.ha=function(){},(t=xu.prototype).get=function(t){var e=this;return c().then(function(){return Hi(e.a.getItem(t))})},t.set=function(e,n){var i=this;return c().then(function(){var t=Fi(n);null===t?i.T(e):i.a.setItem(e,t)})},t.T=function(t){var e=this;return c().then(function(){e.a.removeItem(t)})},t.ba=function(t){m.window&&wn(m.window,"storage",t)},t.ha=function(t){m.window&&a(m.window,"storage",t)},(t=Uu.prototype).get=function(){return c(null)},t.set=function(){return c()},t.T=function(){return c()},t.ba=function(){},t.ha=function(){},(t=Vu.prototype).get=function(t){var e=this;return c().then(function(){return Hi(e.a.getItem(t))})},t.set=function(e,n){var i=this;return c().then(function(){var t=Fi(n);null===t?i.T(e):i.a.setItem(e,t)})},t.T=function(t){var e=this;return c().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Hu,Ku,Gu={F:xu,$a:Vu},Bu={F:xu,$a:Vu},Wu={F:mu,$a:Uu},Xu={F:xu,$a:Uu},Ju={od:"local",NONE:"none",qd:"session"};function Yu(){var t=!(Gi(I())||!Si()),e=Vi(),n=Mi();this.m=t,this.h=e,this.l=n,this.a={},t=Hu=Hu||new qu;try{this.g=!mi()&&Yi()||!m.indexedDB?new t.a.F:new Lu(new(Ni()?Mu:t.a.F))}catch(t){this.g=new Mu,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Mu}this.u=new Mu,this.f=d(this.Vb,this),this.b={}}function zu(){return Ku=Ku||new Yu}function $u(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=Zu(e,n),"local"==e.F&&(t.b[n]=null),$u(t,e.F).T(n)}function tc(t){t.c&&(clearInterval(t.c),t.c=null)}function ec(t){this.a=t,this.b=zu()}(t=Yu.prototype).get=function(t,e){return $u(this,t.F).get(Zu(t,e))},t.set=function(e,t,n){var i=Zu(e,n),r=this,o=$u(this,e.F);return o.set(i,t).then(function(){return o.get(i)}).then(function(t){"local"==e.F&&(r.b[i]=t)})},t.addListener=function(t,e,n){var i;t=Zu(t,e),this.l&&(this.b[t]=m.localStorage.getItem(t)),jt(this.a)&&($u(this,"local").ba(this.f),this.h||(mi()||!Yi())&&m.indexedDB||!this.l||(tc(i=this),i.c=setInterval(function(){for(var t in i.a){var e=m.localStorage.getItem(t),n=i.b[t];e!=n&&(i.b[t]=e,e=new cn({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),i.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(Tt(this.a[t],function(t){return t==n}),0==this.a[t].length)&&delete this.a[t],jt(this.a)&&($u(this,"local").ha(this.f),tc(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n],r=(void 0===i&&(i=null),m.localStorage.getItem(n));r!==i&&(this.b[n]=r,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?$u(this,"local").ha(this.f):tc(this),this.m)if(n=m.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?m.localStorage.setItem(e,i):m.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===m.localStorage.getItem(e)||(o.b[e]=m.localStorage.getItem(e),o.ib(e))};ve&&Te&&10==Te&&m.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else p(t,d(this.ib,this))},t.ib=function(t){this.a[t]&&p(this.a[t],function(t){t()})};var nc,ic={name:"authEvent",F:"local"};function rc(){this.a=zu()}function oc(t,e){this.b=ac,this.f=m.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=m.Int32Array?new Int32Array(64):Array(64),void 0===nc&&(nc=m.Int32Array?new Int32Array(dc):dc),this.reset()}n(oc,function(){this.b=-1});for(var ac=64,sc=ac-1,uc=[],cc=0;cc<sc;cc++)uc[cc]=0;var hc=Et(128,uc);function lc(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;e<64;e++){var r=0|n[e-15],i=0|n[e-2],o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0,a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&h^~c&l)+(0|nc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+a|0,u=s,s=r;r=i,i=a+f|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function fc(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if("string"==typeof e)for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(lc(t),r=0);else{if(!J(e))throw Error("message must be string or array");for(;i<n;){var o=e[i++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[r++]=o,r==t.b&&(lc(t),r=0)}}t.c=r,t.g+=n}oc.prototype.reset=function(){this.g=this.c=0,this.a=m.Int32Array?new Int32Array(this.h):At(this.h)};var dc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function pc(){oc.call(this,8,vc)}n(pc,oc);var vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function mc(t,e,n,i,r){this.u=t,this.i=e,this.l=n,this.m=i||null,this.s=r||null,this.h=e+":"+n,this.w=new rc,this.g=new ec(this.h),this.f=null,this.b=[],this.a=this.c=null}function gc(t){return new g("invalid-cordova-configuration",t)}function bc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function yc(c){return c.f||(c.f=c.ka().then(function(){return new b(function(n){function e(i){t=!0,a&&a.cancel(),wc(r).then(function(t){var e,n=o;t&&i&&i.url&&(e=null,n=(e=-1!=(n=so(i.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Hi(Wn(e=Xn(n),"firebaseError")||null))?nt(e):null)?new Ho(t.c,t.b,null,null,e,null,t.S()):new Ho(t.c,t.b,n,t.f,null,null,t.S()):e)||o),bc(r,n)})}var r,o,t,a,i,s,u;c.Ca(function t(e){return n(e),c.Qa(t),!1}),r=c,o=new Ho("unknown",null,null,null,new g("no-auth-event")),t=!1,a=Mn(500).then(function(){return wc(r).then(function(){t||bc(r,o)})}),i=m.handleOpenURL,m.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(T("BuildInfo.packageName",m).toLowerCase()+"://")&&e({url:t}),"function"==typeof i)try{i(t)}catch(t){console.error(t)}},Wo=Wo||new Go,s=e,(u=Wo).a.push(s),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(s=T("universalLinks.subscribe",m))&&s(null,u.b))})})),c.f}function wc(e){var t,n=null;return(t=e.g).b.get(ic,t.a).then(Ko).then(function(t){return n=t,Qu((t=e.g).b,ic,t.a)}).then(function(){return n})}function Ic(t){this.a=t,this.b=zu()}(t=mc.prototype).ka=function(){return this.Ga||(this.Ga=(ki(void 0)?Ai().then(function(){return new b(function(t,e){var n=m.document,i=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(i),t()},!1)})}):y(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof T("universalLinks.subscribe",m))throw gc("cordova-universal-links-plugin-fix is not installed");if(void 0===T("BuildInfo.packageName",m))throw gc("cordova-plugin-buildinfo is not installed");if("function"!=typeof T("cordova.plugins.browsertab.openUrl",m))throw gc("cordova-plugin-browsertab is not installed");if("function"!=typeof T("cordova.InAppBrowser.open",m))throw gc("cordova-plugin-inappbrowser is not installed")},function(){throw new g("cordova-not-ready")}))},t.Lb=function(t,e){return e(new g("operation-not-supported-in-this-environment")),c()},t.Jb=function(){return y(new g("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(l,f,d,p){var v,n,i,r,o,a;return this.c?y(new g("redirect-operation-pending")):(n=m.document,a=o=r=i=null,(v=this).c=c().then(function(){return qo(f),yc(v)}).then(function(){var n=v,t=l,e=f,i=d,r=p,o=(()=>{for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")})(),a=new Ho(t,i,null,o,new g("no-auth-event"),null,r),s=T("BuildInfo.packageName",m);if("string"!=typeof s)throw new g("invalid-cordova-configuration");var u=T("BuildInfo.displayName",m),c={};if(I().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!I().toLowerCase().match(/android/))return y(new g("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=(t=>{var e=new pc,n=(fc(e,t),t=[],8*e.g);fc(e,hc,e.c<56?56-e.c:e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(lc(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return bt(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")})(o),c.sessionId=o;var h=vu(n.u,n.i,n.l,t,e,null,i,n.m,c,n.s,r);return n.ka().then(function(){var t=n.h;return n.w.a.set(ic,a.v(),t)}).then(function(){var t=T("cordova.plugins.browsertab.isAvailable",m);if("function"!=typeof t)throw new g("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=T("cordova.plugins.browsertab.openUrl",m)))throw new g("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=T("cordova.InAppBrowser.open",m)))throw new g("invalid-cordova-configuration");t=I(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}).then(function(){return new b(function(e,t){r=function(){var t=T("cordova.plugins.browsertab.close",m);return e(),"function"==typeof t&&t(),v.a&&"function"==typeof v.a.close&&(v.a.close(),v.a=null),!1},v.Ca(r),o=function(){i=i||Mn(2e3).then(function(){t(new g("redirect-cancelled-by-user"))})},a=function(){Xi()&&o()},n.addEventListener("resume",o,!1),I().toLowerCase().match(/android/)||n.addEventListener("visibilitychange",a,!1)}).o(function(t){return wc(v).then(function(){throw t})})}).ma(function(){o&&n.removeEventListener("resume",o,!1),a&&n.removeEventListener("visibilitychange",a,!1),i&&i.cancel(),r&&v.Qa(r),v.c=null}))},t.Ca=function(e){this.b.push(e),yc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ho("unknown",null,null,null,new g("no-auth-event")),e(t))})},t.Qa=function(e){Tt(this.b,function(t){return t==e})};var Tc={name:"pendingRedirect",F:"session"};function Ec(t){return Qu(t.b,Tc,t.a)}function Ac(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=d(this.s,this),this.b=new Uc,this.B=new Kc,this.g=new Ic(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=kc(this.D,this.u,this.m,it)}function kc(t,e,n,i){var r=Fl.default.SDK_VERSION||null;return new(ki()?mc:lu)(t,e,n,r,i)}function Sc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Nc(n){n.a.Ub()&&Sc(n).o(function(t){var e=new Ho("unknown",null,null,null,new g("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)}),n.a.Qb()||Vc(n.b)}function _c(n,t){wt(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(Tc,t.a).then(function(t){return"pending"==t}).then(function(t){t?Ec(n.g).then(function(){Sc(n).o(function(t){var e=new Ho("unknown",null,null,null,new g("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)})}):Nc(n)}).o(function(){Nc(n)})}function Oc(t,e){Tt(t.h,function(t){return t==e})}Ac.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=kc(this.D,this.u,this.m),this.i={}},Ac.prototype.s=function(t){if(!t)throw new g("invalid-auth-event");if(6e5<=et()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t)&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=et()),e=!0;break}}return Vc(this.b),e};var Rc=new Wi(2e3,1e4),Cc=new Wi(3e4,6e4);function Dc(t,e,n,i,r,o,a){return t.a.Jb(e,n,i,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},r,o,a)}function Pc(t){return t&&"auth/cordova-not-ready"==t.code}function Lc(e,t,n,i,r){var o,a;return(a=e.g).b.set(Tc,"pending",a.a).then(function(){return e.a.Kb(t,n,i,r).o(function(t){if(Pc(t))throw new g("operation-not-supported-in-this-environment");return o=t,Ec(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new b(function(){}):Ec(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Mc(t,e,n,i,r){return t.a.Lb(i,function(t){e.la(n,null,t,r)},Rc.get())}Ac.prototype.pa=function(){return this.b.pa()};var xc={};function jc(t,e,n){var i=e+":"+n;return xc[i]||(xc[i]=new Ac(t,e,n)),xc[i]}function Uc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Vc(t){t.g||(t.g=!0,Hc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Hc(t,!1,null,null)}function qc(t,e){if(t.b=function(){return c(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Hc(t,e,n,i){if(e)if(i){var r=t,o=i;if(r.b=function(){return y(o)},r.c.length)for(var a=0;a<r.c.length;a++)r.c[a](o)}else qc(t,n);else qc(t,{user:null});t.f=[],t.c=[]}function Kc(){}function Gc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Bc(t,e){this.a=e,E(this,"verificationId",t)}function Wc(t,e,n,i){return new Uo(t).cb(e,n).then(function(t){return new Bc(t,i)})}function Xc(t){var e=Xr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new g("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");A(this,{token:t,expirationTime:Ji(1e3*e.exp),authTime:Ji(1e3*e.auth_time),issuedAtTime:Ji(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Jc(t,e,n){var i=e&&e[zc];if(!i)throw new g("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=Ut(e),this.g=n,this.c=new uo(null,i),this.b=[];var r=this;p(e[Yc]||[],function(t){(t=ir(t))&&r.b.push(t)}),E(this,"auth",this.a),E(this,"session",this.c),E(this,"hints",this.b)}Uc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Uc.prototype.h=function(t,e){var n,i,r,o,a,s;t?(this.reset(),this.g=!0,o=t.c,a=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,r=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!r),"unknown"!=o||i||r?t.a?(Hc(this,!0,null,t.a),c()):e.Da(o,a)?(n=this,i=t,r=(r=e).Da(i.c,i.b),o=i.g,a=i.f,t=i.i,e=i.S(),s=!!i.c.match(/Redirect$/),r(o,a,e,t).then(function(t){Hc(n,s,t,null)}).o(function(t){Hc(n,s,null,t)})):y(new g("invalid-auth-event")):(Hc(this,!1,null,null),c())):y(new g("invalid-auth-event"))},Uc.prototype.pa=function(){var r=this;return new b(function(t,e){var n,i;r.b?r.b().then(t,e):(r.f.push(t),r.c.push(e),n=r,i=new g("timeout"),n.a&&n.a.cancel(),n.a=Mn(Cc.get()).then(function(){n.b||(n.g=!0,Hc(n,!0,null,i))}))})},Kc.prototype.h=function(t,e){var n,i,r,o,a;t?(i=t.c,n=t.b,t.a?(e.la(t.c,null,t.a,t.b),c()):e.Da(i,n)?(r=e,o=(i=t).b,r.Da(a=i.c,o)(i.g,i.f,i.S(),i.i).then(function(t){r.la(a,t,null,o)}).o(function(t){r.la(a,null,t,o)})):y(new g("invalid-auth-event"))):y(new g("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=Vo(this.verificationId,t),this.a(t)};var Yc="mfaInfo",zc="mfaPendingCredential";function $c(t,e,n,i){g.call(this,"multi-factor-auth-required",i,e),this.b=new Jc(t,e,n),E(this,"resolver",this.b)}function Zc(t,e,n){if(t&&f(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new $c(e,t.serverResponse,n,t.message)}catch(t){}return null}function Qc(){}function th(t){E(this,"factorId",t.ea),this.a=t}function eh(t){if(th.call(this,t),this.a.ea!=Uo.PROVIDER_ID)throw new g("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function nh(t,e){for(var n in h.call(this,t),e)this[n]=e[n]}function ih(t,e){this.a=t,this.b=[],this.c=d(this.wc,this),wn(this.a,"userReloaded",this.c);var i=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&p(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[ar]=t.uid),t.displayName&&(n[rr]=t.displayName),t.enrollmentTime&&(n[or]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[sr]=t.phoneNumber);try{e=new ur(n)}catch(t){}t=e}else t=null;t&&i.push(t)}),rh(this,i)}function rh(t,e){t.b=e,E(t,"enrolledFactors",e)}function oh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ah(t){this.c=t,this.b=this.a=null}function sh(t){return t.b&&1e3*t.b.c||0}function uh(t,e){var n=e.refreshToken;t.b=Wr(e[ts]||""),t.a=n}function ch(t,e){this.a=t||null,this.b=e||null,A(this,{lastSignInTime:Ji(e||null),creationTime:Ji(t||null)})}function hh(t,e,n,i,r,o){A(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function N(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Fl.default.SDK_VERSION?Li(Fl.default.SDK_VERSION):null,this.a=new Za(this.l,st(it),t),this.b=new ah(this.a),gh(this,e[ts]),uh(this.b,e),E(this,"refreshToken",this.b.a),wh(this,n||{}),v.call(this),this.P=!1,this.s&&xi()&&(this.i=jc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(i=this,new oh(function(){return i.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=sh(i.b)-et()-3e5;return 0<t?t:0})),this.Z=d(this.Ma,this);var i,r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){fh(r,t.c)},this.$=null,this.O=new ih(this,n),E(this,"multiFactor",this.O)}function lh(t,e){t.aa&&a(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&wn(e,"languageCodeChanged",t.za)}function fh(t,e){t.W=e,as(t.a,Fl.default.SDK_VERSION?Li(Fl.default.SDK_VERSION,t.W):null)}function dh(t,e){t.$&&a(t.$,"frameworkChanged",t.ya),(t.$=e)&&wn(e,"frameworkChanged",t.ya)}function ph(e){try{return Fl.default.app(e.m).auth()}catch(t){throw new g("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function vh(t){t.D||t.B.b||(t.B.start(),a(t,"tokenChanged",t.Z),wn(t,"tokenChanged",t.Z))}function mh(t){a(t,"tokenChanged",t.Z),t.B.stop()}function gh(t,e){t.xa=e,E(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Be(e).then(function(){return t})}function yh(t){t.i&&!t.P&&(t.P=!0,_c(t.i,t))}function wh(t,e){A(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ch(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ih(){}function Th(t){return c().then(function(){if(t.D)throw new g("app-deleted")})}function Eh(t){return bt(t.providerData,function(t){return t.providerId})}function Ah(t,e){e&&(kh(t,e.providerId),t.providerData.push(e))}function kh(t,e){Tt(t.providerData,function(t){return t.providerId==e})}function Sh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&E(t,e,n)}function Nh(e,t){var n,i;e!=t&&(A(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),E(e,"metadata",t.metadata?new ch((i=t.metadata).a,i.b):new ch),p(t.providerData,function(t){Ah(e,t)}),i=e.b,n=t.b,i.b=n.b,i.a=n.a,E(e,"refreshToken",e.b.a),rh(e.O,t.O.b))}function _h(i){return i.I().then(function(t){var e,n=i.isAnonymous;return S((e=i).a,Ds,{idToken:t}).then(d(e.Ic,e)).then(function(){return n||Sh(i,"isAnonymous",!1),t})})}function Oh(t,e){e[ts]&&t.xa!=e[ts]&&(uh(t.b,e),t.dispatchEvent(new nh("tokenChanged")),gh(t,e[ts]),Sh(t,"refreshToken",t.b.a))}function Rh(t,e){return _h(t).then(function(){if(wt(Eh(t),e))return bh(t).then(function(){throw new g("provider-already-linked")})})}function Ch(t,e,n){return tr({user:t,credential:Fo(e),additionalUserInfo:e=Zr(e),operationType:n})}function Dh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function Ph(n,i,t,e,r){var o,a,s,u;return xi()?n.h&&!r?y(n.h):(o=$r(t.providerId),a=Ki(n.uid+":::"),s=null,u=Ii(s=(!Vi()||Si())&&n.s&&t.isOAuthProvider?vu(n.s,n.l,n.m,i,t,null,a,Fl.default.SDK_VERSION||null,null,null,n.tenantId):s,o&&o.ta,o&&o.sa),e=e().then(function(){if(Mh(n),!r)return n.I().then(function(){})}).then(function(){return Dc(n.i,u,i,t,a,!!s,n.tenantId)}).then(function(){return new b(function(t,e){n.la(i,null,new g("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=a,n.c=Mc(n.i,n,i,u,a)})}).then(function(t){return u&&wi(u),t?tr(t):null}).o(function(t){throw u&&wi(u),t}),_(n,e,r)):y(new g("operation-not-supported-in-this-environment"))}function Lh(e,t,n,i,r){var o,a;return xi()?e.h&&!r?y(e.h):(o=null,a=Ki(e.uid+":::"),i=i().then(function(){if(Mh(e),!r)return e.I().then(function(){})}).then(function(){return e.fa=a,bh(e)}).then(function(t){return t=e.ga?(t=e.ga).b.set(Uh,e.v(),t.a):t}).then(function(){return Lc(e.i,t,n,a,e.tenantId)}).o(function(t){if(o=t,e.ga)return Vh(e.ga);throw o}).then(function(){if(o)throw o}),_(e,i,r)):y(new g("operation-not-supported-in-this-environment"))}function Mh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new g("internal-error");throw new g("auth-domain-config-required")}}function _(n,t,e){t=t;var i,r=(i=n).h&&!e?(t.cancel(),y(i.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(i.h||i.dispatchEvent(new nh("userInvalidated")),i.h=t),t});return n.N.push(r),r.ma(function(){It(n.N,r)}),r.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Zc(t.v(),ph(n),d(n.hc,n)):e)||t})}function xh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[ts]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var i=new N(e,n,t);return t.providerData&&p(t.providerData,function(t){t&&Ah(i,tr(t))}),t.redirectEventId&&(i.fa=t.redirectEventId),i}function jh(t){this.a=t,this.b=zu()}Jc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=Ut(n.f);return delete e[Yc],delete e[zc],l(e,t),n.g(e)})},n($c,g),Qc.prototype.ob=function(t,e,n){return e.type==co?(o=this,a=t,s=n,e.Fa().then(function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),l(t,{phoneVerificationInfo:jo(o.a)}),S(a,Rs,t)})):(i=this,r=t,e.Fa().then(function(t){return l(t={mfaPendingCredential:t},{phoneVerificationInfo:jo(i.a)}),S(r,Cs,t)}));var i,r,o,a,s},n(th,Qc),n(eh,th),n(nh,h),(t=ih.prototype).wc=function(t){var e;rh(this,(t=t.ed,e=[],p(t.mfaInfo||[],function(t){(t=ir(t))&&e.push(t)}),e))},t.Ob=function(){return this.a.I().then(function(t){return new uo(t,null)})},t.dc=function(e,n){var i=this,r=this.a.a;return this.Ob().then(function(t){return e.ob(r,t,n)}).then(function(t){return Oh(i.a,t),i.a.reload()})},t.$c=function(t){var n=this,i="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return S(e,tu,{idToken:t,mfaEnrollmentId:i})}).then(function(t){var e=gt(n.b,function(t){return t.uid!=i});return rh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:bt(this.b,function(t){return t.v()})}}},oh.prototype.start=function(){this.a=this.c,function e(n,t){var i;n.stop(),n.b=Mn((i=n,(t=t)?(i.a=i.c,i.g()):(t=i.a,i.a*=2,i.f<i.a&&(i.a=i.f),t))).then(function(){return e=m.document,n=null,Xi()||!e?c():new b(function(t){n=function(){Xi()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},oh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ah.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:sh(this)}},ah.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?y(new g("user-token-expired")):t||!this.b||et()>sh(this)-3e4?this.a?(t={grant_type:"refresh_token",refresh_token:(e=this).a},i=e.c,r=t,new b(function(e,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?ss(i,i.u+"?key="+encodeURIComponent(i.c),function(t){t?t.error?n(nu(t)):t.access_token&&t.refresh_token?e(t):n(new g("internal-error")):n(new g("network-request-failed"))},"POST",oi(r).toString(),i.g,i.m.get()):n(new g("internal-error"))}).then(function(t){return e.b=Wr(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):c(null):c({accessToken:this.b.toString(),refreshToken:this.a});var e,i,r},ch.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},n(N,v),N.prototype.va=function(t){this.oa=t,os(this.a,t)},N.prototype.ja=function(){return this.oa},N.prototype.Ea=function(){return At(this.W)},N.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},E(N.prototype,"providerId","firebase"),(t=N.prototype).reload=function(){var t=this;return _(this,Th(this).then(function(){return _h(t).then(function(){return bh(t)}).then(Ih)}))},t.mc=function(t){return this.I(t).then(function(t){return new Xc(t)})},t.I=function(t){var e=this;return _(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(t)return t.accessToken!=e.xa&&(gh(e,t.accessToken),e.dispatchEvent(new nh("tokenChanged"))),Sh(e,"refreshToken",t.refreshToken),t.accessToken;throw new g("internal-error")}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new g("internal-error");wh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=t.providerUserInfo)&&e.length?bt(e,function(t){return new hh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],i=0;i<n.length;i++)Ah(this,n[i]);Sh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nh("userReloaded",{ed:t}))},t.Jc=function(t){return Zi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return _(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=Ch(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Zi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,i=null;return _(this,Rh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return i=Ch(n,t,"link"),Dh(n,t)}).then(function(){return i}))},t.Bc=function(t,e){var n=this;return _(this,Rh(this,"phone").then(function(){return Wc(ph(n),t,e,d(n.mb,n))}))},t.Kc=function(t,e){var n=this;return _(this,c().then(function(){return Wc(ph(n),t,e,d(n.pb,n))}),!0)},t.xb=function(e){var n=this;return _(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.cd=function(e){var n=this;return _(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.yb=function(e){var n=this;return _(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.zb=function(e){var n;return void 0===e.displayName&&void 0===e.photoURL?Th(this):_(n=this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Sh(n,"displayName",t.displayName||null),Sh(n,"photoURL",t.photoUrl||null),p(n.providerData,function(t){"password"===t.providerId&&(E(t,"displayName",n.displayName),E(t,"photoURL",n.photoURL))}),bh(n)}).then(Ih))},t.ad=function(e){var n=this;return _(this,_h(this).then(function(t){return wt(Eh(n),e)?S(n.a,Ns,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return p(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),p(Eh(n),function(t){e[t]||kh(n,t)}),e[Uo.PROVIDER_ID]||E(n,"phoneNumber",null),bh(n)}):bh(n).then(function(){throw new g("no-such-provider")})}))},t.delete=function(){var e=this;return _(this,this.I().then(function(t){return S(e.a,Ss,{idToken:t})}).then(function(){e.dispatchEvent(new nh("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");lh(e,null),dh(e,null),e.N=[],e.D=!0,mh(e),E(e,"refreshToken",null),e.i&&Oc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,i){"linkViaPopup"!=t&&"reauthViaPopup"!=t||i!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?d(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?d(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?d(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?d(this.Ib,this):null},t.Cc=function(t){var e=this;return Ph(this,"linkViaPopup",t,function(){return Rh(e,t.providerId).then(function(){return bh(e)})},!1)},t.Lc=function(t){return Ph(this,"reauthViaPopup",t,function(){return c()},!0)},t.Dc=function(t){var e=this;return Lh(this,"linkViaRedirect",t,function(){return Rh(e,t.providerId)},!1)},t.Mc=function(t){return Lh(this,"reauthViaRedirect",t,function(){return c()},!0)},t.Hb=function(e,n,t,i){var r=this,o=(this.c&&(this.c.cancel(),this.c=null),null);return t=this.I().then(function(t){return ys(r.a,{requestUri:e,postBody:i,sessionId:n,idToken:t})}).then(function(t){return o=Ch(r,t,"link"),Dh(r,t)}).then(function(){return o}),_(this,t)},t.Ib=function(t,e,n,i){var r=this,o=(this.c&&(this.c.cancel(),this.c=null),null);return _(this,c().then(function(){return fo(ws(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)}).then(function(t){return o=Ch(r,t,"reauthenticate"),Oh(r,t),r.h=null,r.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,i=null;return _(this,this.I().then(function(t){return i=t,void 0===e||jt(e)?{}:Hr(new Dr(e))}).then(function(t){return n.a.qb(i,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var i=this,r=null;return _(this,this.I().then(function(t){return r=t,void 0===n||jt(n)?{}:Hr(new Dr(n))}).then(function(t){return i.a.Ab(r,e,t)}).then(function(t){if(i.email!=t)return i.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return _(this,t=fo(c(t),n.uid).then(function(t){return e=Ch(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&l(e,this.metadata.v()),p(this.providerData,function(t){e.providerData.push((t=>{var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n})(t))}),l(e,this.O.v()),e};var Uh={name:"redirectUser",F:"session"};function Vh(t){return Qu(t.b,Uh,t.a)}function Fh(t){var e,n,i,r,o,a,s,u,c;this.a=t,this.b=zu(),this.c=null,this.f=(n=Kh("local"),i=Kh("session"),r=Kh("none"),o=(e=this).b,u=Zu(a=n,s=e.a),c=$u(o,a.F),o.get(a,s).then(function(t){var e=null;try{e=Hi(m.localStorage.getItem(u))}catch(t){}if(e&&!t)return m.localStorage.removeItem(u),o.set(a,e,s);e&&t&&"localStorage"!=c.type&&m.localStorage.removeItem(u)}).then(function(){return e.b.get(i,e.a)}).then(function(t){return t?i:e.b.get(r,e.a).then(function(t){return t?r:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Hh,e.a).then(function(t){return t?Kh(t):n})})})}).then(function(t){return e.c=t,qh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Kh("local"),this.a,d(this.g,this))}function qh(t,e){var n,s,i=[];for(n in Ju)Ju[n]!==e&&i.push(Qu(t.b,Kh(Ju[n]),t.a));return i.push(Qu(t.b,Hh,t.a)),s=i,new b(function(n,e){var i=s.length,r=[];if(i)for(var t=function(t,e){i--,r[t]=e,0==i&&n(r)},o=function(t){e(t)},a=0;a<s.length;a++)Ge(s[a],tt(t,a),o);else n(r)})}Fh.prototype.g=function(){var e=this,n=Kh("local");Xh(this,function(){return c().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return qh(e,"local").then(function(){e.c=n})})})};var Hh={name:"persistence",F:"session"};function Kh(t){return{name:"authUser",F:t}}function Gh(t,e){return Xh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Bh(t){return Xh(t,function(){return Qu(t.b,t.c,t.a)})}function Wh(t,e){return Xh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),xh(t||{})})})}function Xh(t,e){return t.f=t.f.then(e,e),t.f}function Jh(t){if(this.l=!1,E(this,"settings",new Gc),E(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new g("invalid-api-key");var n,e,i,r,o,a,s,u;t=Fl.default.SDK_VERSION?Li(Fl.default.SDK_VERSION):null,this.b=new Za(this.app.options&&this.app.options.apiKey,st(it),t),this.P=[],this.m=[],this.O=[],this.$b=Fl.default.INTERNAL.createSubscribe(d(this.xc,this)),this.W=void 0,this.ac=Fl.default.INTERNAL.createSubscribe(d(this.yc,this)),Qh(this,null),this.i=new Fh(this.app.options.apiKey+":"+this.app.name),this.B=new jh(this.app.options.apiKey+":"+this.app.name),this.Z=R(this,(e=el(n=this).options.authDomain,t=(s=n).B,u=s.app.options.authDomain,t=t.b.get(Uh,t.a).then(function(t){return t&&u&&(t.authDomain=u),xh(t||{})}).then(function(t){return(s.D=t)&&(t.ga=s.B),Vh(s.B)}),t=R(s,t).then(function(){return Wh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Gh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Bh(n.i)})):null}).then(function(t){Qh(n,t||null)}),R(n,t))),this.h=R(this,(i=this).Z.then(function(){return Zh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){var t;i.l||(i.aa=!0,(t=i.i).b.addListener(Kh("local"),t.a,i.oa))})),this.aa=!1,this.oa=d(this.Xc,this),this.Ma=d(this.ca,this),this.xa=d(this.jc,this),this.ya=d(this.uc,this),this.za=d(this.vc,this),this.a=null,o=el(r=this).options.authDomain,a=r.app.options.apiKey,o&&xi()&&(r.Zb=r.Z.then(function(){var t;if(!r.l)return r.a=jc(o,a,r.app.name),_c(r.a,r),O(r)&&yh(O(r)),r.D&&(yh(r.D),(t=r.D).va(r.ja()),lh(t,r),fh(t=r.D,r.N),dh(t,r),r.D=null),r.a})),this.INTERNAL={},this.INTERNAL.delete=d(this.delete,this),this.INTERNAL.logFramework=d(this.Ec,this),this.s=0,v.call(this),Object.defineProperty(this,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),this.$=null,Object.defineProperty(this,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),this.R=null,this.N=[]}function Yh(t){h.call(this,"languageCodeChanged"),this.g=t}function zh(t){h.call(this,"frameworkChanged"),this.c=t}function $h(t){return t.Zb||y(new g("auth-domain-config-required"))}function Zh(t){var e;return xi()?(e=$h(t).then(function(){return t.a.pa()}).then(function(t){return t?tr(t):null}),R(t,e)):y(new g("operation-not-supported-in-this-environment"))}function Qh(t,e){var n,i;O(t)&&(n=O(t),i=t.Ma,Tt(n.R,function(t){return t==i}),a(O(t),"tokenChanged",t.xa),a(O(t),"userDeleted",t.ya),a(O(t),"userInvalidated",t.za),mh(O(t))),e&&(e.R.push(t.Ma),wn(e,"tokenChanged",t.xa),wn(e,"userDeleted",t.ya),wn(e,"userInvalidated",t.za),0<t.s)&&vh(e),E(t,"currentUser",e),e&&(e.va(t.ja()),lh(e,t),fh(e,t.N),dh(e,t))}function tl(n,t){var e=null,i=null;return R(n,t.then(function(t){return e=Fo(t),i=Zr(t),o=n,a=t,(s={}).apiKey=o.app.options.apiKey,s.authDomain=o.app.options.authDomain,s.appName=o.app.name,o.Z.then(function(){return t=s,e=a,n=o.B,i=o.Ea(),r=new N(t,e),n&&(r.ga=n),i&&fh(r,i),r.reload().then(function(){return r});var t,e,n,i,r}).then(function(t){return O(o)&&t.uid==O(o).uid?Nh(O(o),t):(Qh(o,t),yh(t)),o.ca(t)}).then(function(){il(o)});var o,a,s},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Zc(t.v(),n,d(n.ic,n)):e)||t}).then(function(){return tr({user:O(n),credential:e,additionalUserInfo:i,operationType:"signIn"})}))}function el(t){return t.app}function O(t){return t.currentUser}function nl(t){return O(t)&&O(t)._lat||null}function il(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](nl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](nl(t))}}function R(t,e){return t.P.push(e),e.ma(function(){It(t.P,e)}),e}function rl(){}function ol(){this.a={},this.b=1e12}Fh.prototype.tb=function(e){var n=null,i=this,t=e,r=new g("invalid-persistence-type"),o=new g("unsupported-persistence-type");t:{for(a in Ju)if(Ju[a]==t){var a=!0;break t}a=!1}if(!a||"string"!=typeof t)throw r;switch(_i()){case"ReactNative":if("session"===t)throw o;break;case"Node":if("none"!==t)throw o;break;case"Worker":if("session"===t||!Nu()&&"none"!==t)throw o;break;default:if(!Mi()&&"none"!==t)throw o}return Xh(this,function(){return e!=i.c.F?i.b.get(i.c,i.a).then(function(t){return n=t,qh(i,e)}).then(function(){if(i.c=Kh(e),n)return i.b.set(i.c,n,i.a)}):c()})},n(Jh,v),n(Yh,h),n(zh,h),(t=Jh.prototype).tb=function(t){return t=this.i.tb(t),R(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,os(this.b,this.$),this.dispatchEvent(new Yh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=m.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),as(this.b,Fl.default.SDK_VERSION?Li(Fl.default.SDK_VERSION,this.N):null),this.dispatchEvent(new zh(this.N))},t.Ea=function(){return At(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:O(this)&&O(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,i){"signInViaPopup"==t&&this.g==i&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?d(this.gc,this):null},t.gc=function(t,e,n,i){var r=this,o={requestUri:t,postBody:i,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.Z.then(function(){return tl(r,bs(r.b,o))})},t.Vc=function(e){var n,t,i,r,o;return xi()?(n=this,t=$r(e.providerId),i=Ki(),r=null,o=Ii(r=(!Vi()||Si())&&this.app.options.authDomain&&e.isOAuthProvider?vu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,i,Fl.default.SDK_VERSION||null,null,null,this.S()):r,t&&t.ta,t&&t.sa),R(this,t=$h(this).then(function(t){return Dc(t,o,"signInViaPopup",e,i,!!r,n.S())}).then(function(){return new b(function(t,e){n.la("signInViaPopup",null,new g("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=i,n.c=Mc(n.a,n,"signInViaPopup",o,i)})}).then(function(t){return o&&wi(o),t?tr(t):null}).o(function(t){throw o&&wi(o),t}))):y(new g("operation-not-supported-in-this-environment"))},t.Wc=function(t){var e;return xi()?R(e=this,$h(this).then(function(){return Xh(t=e.i,function(){return t.b.set(Hh,t.c.F,t.a)});var t}).then(function(){return Lc(e.a,"signInViaRedirect",t,void 0,e.S())})):y(new g("operation-not-supported-in-this-environment"))},t.pa=function(){var e=this;return Zh(this).then(function(t){return e.a&&Fc(e.a.b),t}).o(function(t){throw e.a&&Fc(e.a.b),t})},t.bd=function(t){if(!t)return y(new g("null-user"));if(this.R!=t.tenantId)return y(new g("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;i=t,n=n,r=e.B,o=e.Ea(),(s={})[ts]=(a=i.b).b&&a.b.toString(),s.refreshToken=a.a,n=new N(n||{apiKey:i.l,authDomain:i.s,appName:i.m},s),r&&(n.ga=r),o&&fh(n,o),Nh(n,i);var i,r,o,a,s,u=n;return R(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return O(e)&&t.uid==O(e).uid?(Nh(O(e),t),e.ca(t)):(Qh(e,u),yh(u),e.ca(u))}).then(function(){il(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Fc(t.a.b),O(t)?(Qh(t,null),Bh(t.i).then(function(){il(t)})):c()});return R(this,e)},t.Xc=function(){var i=this;return Wh(this.i,this.app.options.authDomain).then(function(t){if(!i.l){var e,n;if((n=O(i)&&t)&&(n=O(i).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Nh(O(i),t),O(i).I();(O(i)||t)&&(Qh(i,t),t&&(yh(t),t.ga=i.B),i.a&&_c(i.a,i),il(i))}})},t.ca=function(t){return Gh(this.i,t)},t.jc=function(){il(this),this.ca(O(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return tl(e,c(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(O(e))})},t.yc=function(t){var e,n=this,i=function(){t.next(O(n))};(e=this).O.push(i),R(e,e.h.then(function(){!e.l&&wt(e.O,i)&&e.W!==e.getUid()&&(e.W=e.getUid(),i(nl(e)))}))},t.Gc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then(function(){"function"==typeof t?t(O(i)):"function"==typeof t.next&&t.next(O(i))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then(function(){i.W=i.getUid(),"function"==typeof t?t(O(i)):"function"==typeof t.next&&t.next(O(i))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return O(e)?O(e).I(t).then(function(t){return{accessToken:t}}):null});return R(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return tl(n,S(n.b,Ys,{token:t}))}).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return tl(n,S(n.b,zs,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return tl(n,S(n.b,As,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return tl(e,t.ia(e.b))})},t.Qc=function(t){return Zi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t,e=O(n);return e&&e.isAnonymous?(t=tr({providerId:null,isNewUser:!1}),tr({user:e,credential:null,additionalUserInfo:t,operationType:"signIn"})):tl(n,n.b.vb()).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return O(this)&&O(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&O(this)&&vh(O(this))},t.Nc=function(e){var n=this;p(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&O(this)&&mh(O(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),R(this,this.h.then(function(){e.l||wt(e.m,t)&&t(nl(e))}))},t.removeAuthTokenListener=function(e){Tt(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Kh("local"),t.a,this.oa),this.a&&(Oc(this.a,this),Fc(this.a.b)),Promise.resolve()},t.fc=function(t){return R(this,S(this.b,ks,{identifier:t,continueUri:ji()?gi():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!Lo(t)},t.sb=function(e,n){var i=this;return R(this,c().then(function(){var t=new Dr(n);if(t.c)return Hr(t);throw new g("argument-error",Mr+" must be true when sending sign in link to email")}).then(function(t){return i.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return R(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return R(this,this.b.Pa(t).then(function(t){return new cr(t)}))},t.fb=function(t){return R(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return R(this,c().then(function(){return void 0===t||jt(t)?{}:Hr(new Dr(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return R(this,Wc(this,t,e,d(this.Ya,this)))},t.Tc=function(n,i){var r=this;return R(this,c().then(function(){var t=i||gi(),e=Po(n,t);if(!(t=Lo(t)))throw new g("argument-error","Invalid email link!");if(t.tenantId!==r.S())throw new g("tenant-id-mismatch");return r.Ya(e)}))},rl.prototype.render=function(){},rl.prototype.reset=function(){},rl.prototype.getResponse=function(){},rl.prototype.execute=function(){};var al=null;function sl(t,e){return(e=ul(e))&&t.a[e]||null}function ul(t){return(t=void 0===t?1e12:t)?t.toString():null}function cl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():wn(this.f,"click",this.i)}function hl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ll(){}function fl(){}ol.prototype.render=function(t,e){return this.a[this.b.toString()]=new cl(t,e),this.b++},ol.prototype.reset=function(t){var e=sl(this,t);t=ul(t),e&&t&&(e.delete(),delete this.a[t])},ol.prototype.getResponse=function(t){return(t=sl(this,t))?t.getResponse():null},ol.prototype.execute=function(t){(t=sl(this,t))&&t.execute()},cl.prototype.getResponse=function(){return hl(this),this.b},cl.prototype.execute=function(){hl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=(()=>{for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")})();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},cl.prototype.delete=function(){hl(this),this.g=!0,clearTimeout(this.a),this.a=null,a(this.f,"click",this.i)},E(ll,"FACTOR_ID","phone"),fl.prototype.g=function(){return c(al=al||new ol)},fl.prototype.c=function(){};var dl=null;function pl(){this.b=m.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var vl=new qt(Gt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ml=new Wi(3e4,6e4),gl=(pl.prototype.g=function(r){var o=this;return new b(function(t,e){var i=setTimeout(function(){e(new g("network-request-failed"))},ml.get());!m.grecaptcha||r!==o.f&&!o.b?(m[o.a]=function(){var n;m.grecaptcha?(o.f=r,n=m.grecaptcha.render,m.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(i),t(m.grecaptcha)):(clearTimeout(i),e(new g("internal-error"))),delete m[o.a]},c(Ba(Jt(vl,{onload:o.a,hl:r||""}))).o(function(){clearTimeout(i),e(new g("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(i),t(m.grecaptcha))})},pl.prototype.c=function(){this.b--},null);function bl(t,e,n,i,r,o,a){if(E(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a=a?dl=dl||new fl:gl=gl||new pl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Il])throw new g("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tl],!m.document)throw new g("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Se(e)||!this.i&&Se(e).hasChildNodes())throw new g("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Za(t,o||null,r||null),this.w=i||function(){return null};var s=this,u=(this.l=[],this.a[yl]),c=(this.a[yl]=function(t){var e;El(s,t),"function"==typeof u?u(t):"string"==typeof u&&"function"==typeof(e=T(u,m))&&e(t)},this.a[wl]);this.a[wl]=function(){var t;El(s,null),"function"==typeof c?c():"string"==typeof c&&"function"==typeof(t=T(c,m))&&t()}}var yl="callback",wl="expired-callback",Il="sitekey",Tl="size";function El(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Al(t,e){return t.h.push(e),e.ma(function(){It(t.h,e)}),e}function kl(t){if(t.D)throw new g("internal-error","RecaptchaVerifier instance has been destroyed.")}function Sl(t,e,n){var i=!1;try{this.b=n||Fl.default.app()}catch(t){throw new g("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new g("invalid-api-key");n=this.b.options.apiKey;var r=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Fl.default.SDK_VERSION?Li(Fl.default.SDK_VERSION,o):null,bl.call(this,n,t,e,function(){try{var e=r.b.auth().ja()}catch(t){e=null}return e},o,st(it),i)}function Nl(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new g("internal-error","Argument validator encountered a required argument after an optional argument.");r++}if(o=e.length,n.length<r||o<n.length)i="Expected "+(r==o?1==r?"1 argument":r+" arguments":r+"-"+o+" arguments")+" but got "+n.length+".";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].K(n[r])&&!o){if(e=e[r],r<0||r>=_l.length)throw new g("internal-error","Argument validator received an unsupported number of arguments.");n=_l[r],i=(i?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}i=null}}if(i)throw new g("argument-error",t+" failed: "+i)}(t=bl.prototype).Ga=function(){var e=this;return this.f||(this.f=Al(this,c().then(function(){if(ji()&&!Ni())return Ai();throw new g("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,S(e.s,Us,{})}).then(function(t){e.a[Il]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){kl(this);var n=this;return Al(this,this.Ga().then(function(){var t,e;return null===n.c&&(e=n.u,n.i||(t=Se(e),e=Ce("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){kl(this);var r=this;return Al(this,this.render().then(function(e){return new b(function(n){var i,t=r.g.getResponse(e);t?n(t):(r.l.push(i=function(t){var e;t&&(e=i,Tt(r.l,function(t){return t==e}),n(t))}),r.i&&r.g.execute(r.c))})}))},t.reset=function(){kl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){kl(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=Se(this.u);t=e.firstChild;)e.removeChild(t)},n(Sl,bl);var _l="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function C(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Ol(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function D(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:f}}function Rl(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Cl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Dl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){var e;return!(!t||(e=!n||t.providerId===n,!t.ia)||!e)}}}function Pl(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function Ll(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Ml(t,e){return f(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Fa}function xl(t){return f(t)&&"string"==typeof t.uid}function jl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function P(e,n,t,i){return{name:t||"",J:e.J+" or "+n.J,optional:!!i,K:function(t){return e.K(t)||n.K(t)}}}function L(t,e){for(var n in e){var i=e[n].name;t[i]=Vl(i,t[n],e[n].j)}}function Ul(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:tt(function(t){return this[t]},n),set:tt(function(t,e,n,i){Nl(t,[n],[i],!0),this[e]=i},i,n,e[n].gb),enumerable:!0})}}function M(t,e,n,i){t[e]=Vl(e,n,i)}function Vl(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return Nl(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=(t=(t=t).split("."))[t.length-1];for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}if(L(Jh.prototype,{fb:{name:"applyActionCode",j:[C("code")]},Pa:{name:"checkActionCode",j:[C("code")]},jb:{name:"confirmPasswordReset",j:[C("code"),C("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[C("email"),C("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[C("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[C("emailLink")]},Fc:{name:"onAuthStateChanged",j:[P(D(),Rl(),"nextOrObserver"),Rl("opt_error",!0),Rl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[P(D(),Rl(),"nextOrObserver"),Rl("opt_error",!0),Rl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[C("email"),P(D("opt_actionCodeSettings",!0),Cl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[C("email"),D("actionCodeSettings")]},tb:{name:"setPersistence",j:[C("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Dl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Dl()]},Rc:{name:"signInWithCustomToken",j:[C("token")]},Sc:{name:"signInWithEmailAndPassword",j:[C("email"),C("password")]},Tc:{name:"signInWithEmailLink",j:[C("email"),C("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[C("phoneNumber"),jl()]},Vc:{name:"signInWithPopup",j:[Ll()]},Wc:{name:"signInWithRedirect",j:[Ll()]},bd:{name:"updateCurrentUser",j:[P({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof N)}},Cl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[C(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[C("code")]}}),Ul(Jh.prototype,{lc:{name:"languageCode",gb:P(C(),Cl(),"languageCode")},ti:{name:"tenantId",gb:P(C(),Cl(),"tenantId")}}),(Jh.Persistence=Ju).LOCAL="local",Jh.Persistence.SESSION="session",Jh.Persistence.NONE="none",L(N.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Ol("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ol("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Dl()]},mb:{name:"linkWithCredential",j:[Dl()]},Bc:{name:"linkWithPhoneNumber",j:[C("phoneNumber"),jl()]},Cc:{name:"linkWithPopup",j:[Ll()]},Dc:{name:"linkWithRedirect",j:[Ll()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Dl()]},pb:{name:"reauthenticateWithCredential",j:[Dl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[C("phoneNumber"),jl()]},Lc:{name:"reauthenticateWithPopup",j:[Ll()]},Mc:{name:"reauthenticateWithRedirect",j:[Ll()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[P(D("opt_actionCodeSettings",!0),Cl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[C(null,!0)]},ad:{name:"unlink",j:[C("provider")]},xb:{name:"updateEmail",j:[C("email")]},yb:{name:"updatePassword",j:[C("password")]},cd:{name:"updatePhoneNumber",j:[Dl("phone")]},zb:{name:"updateProfile",j:[D("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[C("email"),P(D("opt_actionCodeSettings",!0),Cl(null,!0),"opt_actionCodeSettings",!0)]}}),L(ol.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),L(rl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),L(b.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ul(Gc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Ol("appVerificationDisabledForTesting")}}),L(Bc.prototype,{confirm:{name:"confirm",j:[C("verificationCode")]}}),M(lo,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[yo,Co,xo,mo],i=0;i<n.length;i++)if(e=n[i](t))return e;return null},[P(C(),D(),"json")]),M(Do,"credential",function(t,e){return new Ro(t,e)},[C("email"),C("password")]),L(Ro.prototype,{v:{name:"toJSON",j:[C(null,!0)]}}),L(To.prototype,{Aa:{name:"addScope",j:[C("scope")]},Ia:{name:"setCustomParameters",j:[D("customOAuthParameters")]}}),M(To,"credential",Eo,[P(C(),D(),"token")]),M(Do,"credentialWithLink",Po,[C("email"),C("emailLink")]),L(Ao.prototype,{Aa:{name:"addScope",j:[C("scope")]},Ia:{name:"setCustomParameters",j:[D("customOAuthParameters")]}}),M(Ao,"credential",ko,[P(C(),D(),"token")]),L(So.prototype,{Aa:{name:"addScope",j:[C("scope")]},Ia:{name:"setCustomParameters",j:[D("customOAuthParameters")]}}),M(So,"credential",No,[P(C(),P(D(),Cl()),"idToken"),P(C(),Cl(),"accessToken",!0)]),L(_o.prototype,{Ia:{name:"setCustomParameters",j:[D("customOAuthParameters")]}}),M(_o,"credential",Oo,[P(C(),D(),"token"),C("secret",!0)]),L(k.prototype,{Aa:{name:"addScope",j:[C("scope")]},credential:{name:"credential",j:[P(C(),P(D(),Cl()),"optionsOrIdToken"),P(C(),Cl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[D("customOAuthParameters")]}}),L(go.prototype,{v:{name:"toJSON",j:[C(null,!0)]}}),L(po.prototype,{v:{name:"toJSON",j:[C(null,!0)]}}),M(Uo,"credential",Vo,[C("verificationId"),C("verificationCode")]),L(Uo.prototype,{cb:{name:"verifyPhoneNumber",j:[P(C(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Ml(t.session,co)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ml(t.session,ho)&&xl(t.multiFactorHint):t.session&&t.multiFactorUid?Ml(t.session,ho)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),jl()]}}),L(Mo.prototype,{v:{name:"toJSON",j:[C(null,!0)]}}),L(g.prototype,{toJSON:{name:"toJSON",j:[C(null,!0)]}}),L(Jo.prototype,{toJSON:{name:"toJSON",j:[C(null,!0)]}}),L(Xo.prototype,{toJSON:{name:"toJSON",j:[C(null,!0)]}}),L($c.prototype,{toJSON:{name:"toJSON",j:[C(null,!0)]}}),L(Jc.prototype,{Pc:{name:"resolveSignIn",j:[Pl()]}}),L(ih.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Pl(),C("displayName",!0)]},$c:{name:"unenroll",j:[P({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:xl},C(),"multiFactorInfoIdentifier")]}}),L(Sl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),M(Er,"parseLink",Cr,[C("link")]),M(ll,"assertion",function(t){return new eh(t)},[Dl("phone")]),void 0===Fl.default||!Fl.default.INTERNAL||!Fl.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:lr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hr,VERIFY_AND_CHANGE_EMAIL:fr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jh,AuthCredential:lo,Error:g};M(e,"EmailAuthProvider",Do,[]),M(e,"FacebookAuthProvider",To,[]),M(e,"GithubAuthProvider",Ao,[]),M(e,"GoogleAuthProvider",So,[]),M(e,"TwitterAuthProvider",_o,[]),M(e,"OAuthProvider",k,[C("providerId")]),M(e,"SAMLAuthProvider",Io,[C("providerId")]),M(e,"PhoneAuthProvider",Uo,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Jh)}}]),M(e,"RecaptchaVerifier",Sl,[P(C(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),D("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Fl.default.app.App)}}]),M(e,"ActionCodeURL",Er,[]),M(e,"PhoneMultiFactorGenerator",ll,[]),Fl.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),Fl.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:d((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:d(t.kc,t),addAuthTokenListener:d(t.bc,t),removeAuthTokenListener:d(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Fl.default.registerVersion("@firebase/auth","0.14.9"),Fl.default.INTERNAL.extendNamespace({User:N})}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}.apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-auth.js - be sure to load firebase-app.js first.")}});
class Record{constructor(e,t,o,a,n,r,s,l){this.id=e||null,this.title=t||"Counter 01",this.counter=o||0,this.goal=a||100,this.total=n||0,this.counterDay=s||0,this.counterWeek=l||0,this.print()}print(){console.log("Record instantiated!")}}class History{constructor(e,t){this.logBooks=e||[],this.lastWriting=t||0,this.print()}print(){console.log("History instantiated!")}}class Log{constructor(e,t){this.date=e||null,this.value=t||0,this.print()}print(){console.log("Log instantiated!")}}class Logbook{constructor(e,t,o,a,n){this.recordId=e||0,this.logs=[],null!=t&&this.logs.push(t),this.print()}print(){console.log("Logbook instantiated! id: "+this.recordId)}}class Settings{constructor(e){this.delayRefresh=e||!0,this.print()}print(){console.log("Settings initiated..",this)}}class User{constructor(e,t){this.displayName=e||"Guest",this.email=t||""}}class Database{constructor(){this.init()}init(){firebase.initializeApp({apiKey:"AIzaSyBP196irDbj3NgzWnTggEV_5XQJlNhRL5k",authDomain:"test-firebase-597da.firebaseapp.com",projectId:"test-firebase-597da"}),firebase_db=firebase.firestore(),dbCollection=firebase_db.collection("counter-users"),console.log("DB connection established.")}fetchUser(e){return dbCollection.doc(e).get()}do_signin(e){firebase.auth().signInWithPopup(e).then((function(e){TOKEN=e.credential.accessToken,USER=e.user,console.log(isLoggedIn()?"You are signed in!!":"still stated as not signed in.."),Cookies.set("token",TOKEN,cookieOptions),Cookies.set("user",JSON.stringify(USER),cookieOptions),(STORE=Cookies.get()||!1)&&Database.prototype.x_signin()}))}x_signin(){Database.prototype.fetchUserData().then((function(e){("NO SUCH EMAIL EXISTS BEFORE"==e?(void 0!==STORE.history&&"string"==typeof STORE.history&&(STORE.history=JSON.parse(STORE.history)),void 0!==STORE.records&&"string"==typeof STORE.records&&(STORE.records=JSON.parse(STORE.records)),void 0!==STORE.settings&&"string"==typeof STORE.settings&&(STORE.settings=JSON.parse(STORE.settings)),void 0!==STORE.user&&"string"==typeof STORE.user&&(STORE.user=JSON.parse(STORE.user)),USER=STORE.user,save(),bootApp):(bootApp(),showRecords))()})).catch((function(e){alert("Failed to signin! "+e)}))}fetchUserData(){return new Promise((function(e,t){Database.prototype.fetchUser(USER.email).then((function(o){void 0===o.data()?e("NO SUCH EMAIL EXISTS BEFORE"):(STORE=o.data()||!1)?e(!0):t("No data found. Try another account.")})).catch((function(e){t(e)}))}))}signOut(){firebase.auth().signOut()}save(){void 0===STORE.records||0==STORE.records.length?alert("Cannot save empty STORE!"):dbCollection.doc(USER.email).set(JSON.parse(JSON.stringify(STORE))).catch((function(e){console.error("Error saving DB: ",e)}))}BACKUP_USER(){var e=STORE.history.lastWriting,t=firebase.firestore();t.collection("_BACKUP-counter-users").doc(USER.email).get().then((function(o){e=new Date(Date.parse(e));var a=!1;(a=void 0!==o.data()?new Date(o.data().history.lastWriting)||!1:a)&&e.getDate()==a.getDate()&&e.getMonth()==a.getMonth()&&e.getFullYear()==a.getFullYear()||t.collection("_BACKUP-counter-users").doc(USER.email).set(JSON.parse(JSON.stringify(STORE))).then((function(){console.log("User auto backup was taken!")})).catch((function(e){console.error("Couldn't take auto backup! (#5502) ",e),alert("Couldn't take auto backup! (#5502) "+e)}))})).catch((function(e){console.error("Error backing up User: (#5503) ",e),alert("Couldn't take auto backup! (#5503) "+e)}))}}function uniqID(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}Date.prototype.getWeekNumber=function(){var e=new Date(Date.UTC(this.getFullYear(),this.getMonth(),this.getDate())),t=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-t),t=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e-t)/864e5+1)/7)};var STORE,counter,total,selectedRecord,activeChanged,cookieOptions,$percent,$progress,$counter,$today,$week,$total,$user,$panel,$chartPanel,$authPanel,$chart,$templates,db,firebase_db,dbCollection,isTouched,timeout,delayRefreshArr,USER,TOKEN,hasInitializedListeners=!1;function init(){TOKEN=Cookies.get("token")||void 0,USER=Cookies.get("user")||null,USER=JSON.parse(USER)||void 0,console.log("Init - TOKEN:",TOKEN,"USER:",USER),TOKEN&&USER&&USER.email&&"null"!==USER.email&&""!==USER.email?((db=new Database).x_signin(),console.log('User "'+USER.email+'" is logged in.')):(console.log("No valid login found, booting as guest"),USER=TOKEN=null,bootApp())}function initListeners(){$("body").on("click",(function(e){e.stopPropagation()})),$("#clicker").on("click touchend",increaseCounter),$("#reset").on("click",reset),$("#showPanel").on("click",showPanel),$("#closePanel").on("click",closePanel),$(".close").on("click",(function(){$(this).parent().parent().toggleClass("show")})),$("#add-record-btn").on("click",createRecord),$("button.details").on("click",toggleDropdown),$(".record-body").on("click",onClickRecordBody),$(".changeTitle").on("click",changeTitle),$(".changeGoal").on("click",changeGoal),$(".deleteRecord").on("click",deleteRecord),$("#showPrayers").on("click",showPrayers),$("#showSettings").on("click",toggleSettings),$("#hideSettings").on("click",closeSettings),$("#chkDelayRefresh").on("click",toggleDelayRefresh),$(".showChart").on("click",showChart),$("#showAuthBtn").on("click",login),$(".signin").on("click",signin),$(".signout").on("click",signout),$("#logoutBtn").on("click",logout),$chartPanel.find(".close").on("click",closeChartpanel),$chartPanel.find("select.showBy").on("change",onChangeShowBy),$(".tab-btn").on("click",(function(){var e=$(this).data("tab");$(".tab-btn").removeClass("active"),$(this).addClass("active"),$(".tab-pane").removeClass("active"),$("#"+e).addClass("active")})),$("body").addClass("animated"),hasInitializedListeners=!0}function fillValues(){counter=0,cookieOptions={expires:3650},$today=$("#today"),$week=$("#week"),$total=$("#total"),$percent=$("#percent"),$progress=$("#progress"),$counter=$("#counter"),$user=$("#user"),$title=$("#recordTitle"),$panel=$("#panel"),$templates=$("#templates"),$chartPanel=$("#chart-panel"),isTouched=!1,isLoggedIn()||(void 0!==(STORE=Cookies.get()).records&&(STORE.records=JSON.parse(STORE.records)),void 0!==STORE.history&&(STORE.history=JSON.parse(STORE.history))),void 0===(STORE=void 0===STORE?{}:STORE).history&&(STORE.history=new History),void 0===STORE.history.logBooks&&(STORE.history.logBooks=[]),void 0===STORE.selectedIndex&&(STORE.selectedIndex=0),void 0===STORE.records&&(alert("No records yet. Create one ! e.g.  "),e=new Record(1),STORE.records=[e],STORE.selectedIndex=0),void 0===USER&&(USER=new User),$.each(STORE.records,(function(e,t){null==t?delete STORE.records[e]:STORE.history.logBooks.some((e=>e.recordId==t.id))||(console.log("Generating daily Log for record ("+t.title+")"),STORE.history.logBooks.push(new Logbook(t.id)))})),null==STORE.records[STORE.selectedIndex]&&(STORE.selectedIndex=0),selectedRecord=STORE.records[STORE.selectedIndex],activeChanged=!1,fillSelectedRecord();var e=isLoggedIn();console.log("fillValues - isLoggedIn:",e,"TOKEN:",TOKEN,"USER:",USER),$user.text(e?USER.displayName:"Guest"),$panel.find(".login-buttons-container").toggleClass("d-none",e),$panel.find("#logoutBtn").toggleClass("d-none",!e),e||($("#logoutBtn").addClass("d-none"),$(".login-buttons-container").removeClass("d-none")),logging(),void 0===STORE.settings&&(STORE.settings=new Settings),save(),delayRefreshArr=STORE.settings.delayRefresh?[10,100]:[1,1]}function fillSelectedRecord(){$title.text(selectedRecord.title),$counter.text(selectedRecord.counter),$today.text(selectedRecord.counterDay),$week.text(selectedRecord.counterWeek),$total.text(thousandFormat(selectedRecord.total));var e=goalPercent();$percent.text(e+" %"),setProgress(e),activeChanged=!0}function setProgress(e,t,o,a,n,r){void 0!==t&&$percent.text(e+" %"),void 0!==o&&$counter.text(o),void 0!==a&&$today.text(a),void 0!==n&&$week.text(n),void 0!==r&&$total.text(thousandFormat(r)),100<=e?$progress.addClass("color-green").find(".val").attr("class","val c-100 goal-achieved"):$progress.removeClass("color-green").find(".val").attr("class","val c-"+e%100),pulse($progress)}function goalPercent(e,t){return void 0===e&&(e=parseInt(selectedRecord.counterDay)),void 0===t&&(t=parseInt(selectedRecord.goal)),0==e?0:(0!=t&&null!=t||(t=100),parseInt(e/t*100))}function selectRecord(e){void 0===e?(STORE.selectedIndex=0,selectedRecord=STORE.records[0]):($.each(STORE.records,(function(t,o){if(o.id==e)return STORE.selectedIndex=t,selectedRecord=o,!1})),save())}function increaseCounter(e){var t,o,a;isTouched&&"click"==e.type||("touchend"==e.type&&(isTouched=!0),void 0===selectedRecord.counter&&(selectedRecord.counter=0),void 0===selectedRecord.counterDay&&(selectedRecord.counterDay=0),void 0===selectedRecord.counterWeek&&(selectedRecord.counterWeek=0),void 0===selectedRecord.total&&(selectedRecord.total=0),selectedRecord.counter++,selectedRecord.counterDay++,selectedRecord.counterWeek++,selectedRecord.total++,e=selectedRecord.counter%delayRefreshArr[0]==0?selectedRecord.counter:void 0,t=selectedRecord.counterDay%delayRefreshArr[0]==0?selectedRecord.counterDay:void 0,o=selectedRecord.counterWeek%delayRefreshArr[1]==0?selectedRecord.counterWeek:void 0,a=selectedRecord.total%delayRefreshArr[1]==0?selectedRecord.total:void 0,setProgress(goalPercent(),!0,e,t,o,a),saveSelectedRecord(),selectedRecord.counter%100==0&&pulse($counter,1),selectedRecord.counterDay%100==0&&pulse($today,2),selectedRecord.counterWeek%100==0&&pulse($week,1),selectedRecord.total%100==0&&pulse($total,1))}function saveSelectedRecord(){STORE.records[STORE.selectedIndex]=selectedRecord,save()}function reset(){selectedRecord.counter=0,$counter.text(0),saveSelectedRecord()}function togglePannel(){$panel.hasClass("show")&&($panel.find(".settings").removeClass("show"),$panel.find("#showSettings").removeClass("d-none")),$panel.toggleClass("show")}function showPanel(){togglePannel(),showSettings(),showRecords()}function showSettings(){$("#chkDelayRefresh i.unchecked").toggleClass("d-none",STORE.settings.delayRefresh),$("#chkDelayRefresh i.checked").toggleClass("d-none",!STORE.settings.delayRefresh)}function closePanel(){pulse($("#showPanel"),2),activeChanged&&(pulseAll(),activeChanged=!1),togglePannel()}function showRecords(){$panel.find(".record").remove(),$.each(STORE.records,(function(e,t){addRecordToPanel(e,t)}))}function addRecordToPanel(e,t){var o=$templates.find(".record-tpl").clone(!0),a=(o.attr("data-id",t.id).attr("data-title",t.title||"N/A").attr("data-counter-log",t.counterDay||0).attr("data-goal",t.goal||100),o.removeClass("d-none record-tpl").addClass("record d-flex flex-col").toggleClass("color-primary active",selectedRecord.id==t.id),o.find(".title .label").text(t.title),goalPercent(t.counterDay,t.goal));o.find(".progress").text(a+"%"),o.find(".today").text((t.counterDay||0)+" today"),o.find(".goal span").text(t.goal),o.find(".total span").text(t.total),o.find(".title i.done").toggleClass("d-none",a<100),o.prependTo($panel.find(".records"))}function createRecord(){var e,t=$("#add-record-input");0==t.val().length?t.attr("placeholder","Empty title entered!"):(pulse($(this),1),e=new Record(autoID(),t.val()),STORE.records.push(e),addRecordToPanel(STORE.records.length-1,e),STORE.history.logBooks.push(new Logbook(e.id,new Log((new Date).toLocaleString("en"),e.counter))),save(),t.val(""),toggleSettings(),selectRecord(e.id),fillSelectedRecord(),$panel.find(".record").removeClass("color-primary active").first().addClass("color-primary active"),pulse($panel.find(".record").first(),1)),pulse(t),pulse($(this),1)}function logging(){var e=new Date,t=new Date(Date.parse(STORE.history.lastWriting));t.getDate()==e.getDate()&&t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear()||(STORE.history.lastWriting=e.toLocaleString("en"),console.log("History is lastWritten today",e.toLocaleString("en")),$.each(STORE.records,(function(o,a){null!=a&&(t.getWeekNumber()!=e.getWeekNumber()&&(a.counterWeek=0,$week.text(0)),$.each(STORE.history.logBooks,(function(e,t){var o;a.id==t.recordId&&0<a.counterDay&&((o=new Date).setDate(o.getDate()-1),t.logs.push(new Log(o.toLocaleString("en"),a.counterDay)),a.counterDay=0)})))})),save(),console.log("Logging saved! history: ",STORE.history),isLoggedIn&&void 0!==db&&db.BACKUP_USER(),fillSelectedRecord())}function toggleDropdown(){var e=$(this).closest(".record");e.toggleClass("showDropdown"),$(".record").not(e).removeClass("showDropdown")}function onClickRecordBody(){console.log("rec-body"),$(".record").removeClass("color-primary active");var e=$(this).closest(".record");e.addClass("color-primary active"),selectRecord(e.attr("data-id")),fillSelectedRecord(),showRecords(),closePanel()}function recIndexByID(e){return STORE.records.findIndex((t=>t.id==e))}function changeTitle(){for(var e,t=$(this).closest(".record"),o=prompt("New title:",t.attr("data-title"));""===o.trim();)alert("You cannot enter an empty title!"),o=prompt("New title:",t.attr("data-title"));null!==o&&(e=recIndexByID(t.attr("data-id")),STORE.records[e].title=o,setRecordTitle(t.attr("data-id"),o),save())}function changeGoal(){var e=$(this).closest(".record"),t=function t(){var o=prompt("New Daily Goal: (between 1 and 1 million)",e.attr("data-goal"));if(null!==o)return isNaN(o)||1e6<+o||+o<1?t():o}();if(null!=t){for(;""==t.trim()||t===parseInt(t,10);)alert("The goal must be a number!"),t=prompt("New Goal:",e.attr("data-goal"));var o=recIndexByID(e.attr("data-id"));setProgress(o=(STORE.records[o].goal=parseInt(t),goalPercent()),!0),e.attr("data-goal",t),e.find(".goal").text("GOAL "+t),e.find(".progress").text(goalPercent(e.attr("data-counter-log"),t)+"%"),e.find(".title i.done").toggleClass("d-none",o<100),save()}}function deleteRecord(){var e,t=$(this).closest(".record");1==$(".record").length?alert("Delete aborted. It is the only record you have.."):confirm('Are you sure to delete "'+t.attr("data-title")+'"?')&&(e=t.attr("data-id"),STORE.records=STORE.records.filter((t=>t.id!=e)),STORE.history.logBooks=STORE.history.logBooks.filter((t=>t.recordId!=e)),$("#record-"+e).remove(),$(".record[data-id="+e+"]").remove(),e==selectedRecord.id&&(selectRecord(),fillSelectedRecord(),showRecords()),save())}function setRecordTitle(e,t){$('[data-id="'+e+'"]').attr("data-title",t).find(".title .label").text(t),e==selectedRecord.id&&$("#recordTitle").text(t)}function pulse(e,t){void 0===t&&(t=0);var o=["pulse","pulseText","pulseTextLong","pulseLong"];e.removeClass(o),e.width(),e.addClass(o[t])}function pulseAll(){pulse($title,2),pulse($progress,3),pulse($counter,2),pulse($today,2),pulse($week,2),pulse($total,2)}function showPrayers(){window.location="./prayers.html"}function toggleSettings(){$panel.find(".settings").addClass("show"),$panel.find("#showSettings").addClass("d-none"),$panel.find("#add-record-input").focus(),pulse($("#showSettings"),2)}function closeSettings(){$panel.find(".settings").removeClass("show"),$panel.find("#showSettings").removeClass("d-none"),pulse($("#showSettings"),2)}function toggleDelayRefresh(){STORE.settings.delayRefresh=!STORE.settings.delayRefresh,delayRefreshArr=STORE.settings.delayRefresh?[10,100]:[1,1],$("#chkDelayRefresh i.unchecked").toggleClass("d-none",STORE.settings.delayRefresh),$("#chkDelayRefresh i.checked").toggleClass("d-none",!STORE.settings.delayRefresh),save()}function uniqID(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}function onChangeShowBy(){$chartPanel.find(".chart-container canvas").remove();var e=$(this).val();$chartPanel.find(".loading").addClass("d-flex").removeClass("d-none"),$chartPanel.find(".container").addClass("hide"),drawChart($chartPanel.attr("data-rec-id"),e),$chartPanel.find(".loading").removeClass("d-flex").addClass("d-none"),$chartPanel.find(".container").removeClass("hide")}function showChart(){void 0!==$(this).closest(".record").attr("data-id")&&$chartPanel.attr("data-rec-id",$(this).closest(".record").attr("data-id")),$chartPanel.find("select.showBy").val("7-days").trigger("change"),$chartPanel.toggleClass("show")}function closeChartpanel(){$chartPanel.find(".chart-container canvas").remove(),$chartPanel.removeClass("show")}function drawChart(e,t){void 0===t&&(t="7-days");var o=STORE.history.logBooks.find((t=>t.recordId==e));if(void 0===o)alert("No data was found for this record"),closeChartpanel();else{var a=[],n=new Date,r=(new Date,0==o.logs.length&&a.push({x:n,y:0}),new Date),s=0,l=0,i=0,c=STORE.records.find((t=>t.id==e));switch(t){case"7-days":default:w(7);break;case"30-days":w(30);break;case"week":for(var d=29;0<=d;d--){for(var g=new Date(n),u=(g.setDate(g.getDate()-7*d),g.getWeekNumber(),0),h=0;h<7;h++){var f=new Date(g),p=(f.setDate(f.getDate()-f.getDay()+h),o.logs.find((e=>(e=new Date(e.date)).getDate()==f.getDate()&&e.getMonth()==f.getMonth()&&e.getFullYear()==f.getFullYear())));void 0!==p&&(u+=p.value),f.getDate()==n.getDate()&&f.getMonth()==n.getMonth()&&f.getFullYear()==n.getFullYear()&&(u+=c.counterDay)}a.push({x:g,y:u}),l<u&&(l=u),i+=u}$("#chart-panel .total span").text(i);break;case"month":for(var R=29;0<=R;R--){var v=new Date(n.getFullYear(),n.getMonth()-R,1),y=0;o.logs.forEach((function(e){var t=new Date(e.date);t.getMonth()==v.getMonth()&&t.getFullYear()==v.getFullYear()&&(y+=e.value)})),0==R&&(y+=c.counterDay),a.push({x:new Date(v.getFullYear(),v.getMonth(),15),y:y}),l<y&&(l=y),i+=y}$("#chart-panel .total span").text(i);break;case"year":for(var S=9;0<=S;S--){var E=new Date(n.getFullYear()-S,0,1),T=0;o.logs.forEach((function(e){new Date(e.date).getFullYear()==E.getFullYear()&&(T+=e.value)})),0==S&&(T+=c.counterDay),a.push({x:new Date(E.getFullYear(),6,1),y:T}),l<T&&(l=T),i+=T}$("#chart-panel .total span").text(i);break;case"today-all":STORE.records.filter((e=>0<e.counterDay)).forEach((function(e,t){a.push({x:t,y:e.counterDay,label:e.title}),e.counterDay>l&&(l=e.counterDay),i+=e.counterDay})),0==a.length&&a.push({x:0,y:0,label:"No data"}),$("#chart-panel .total span").text(i)}"7-days"!==t&&"30-days"!==t||(a.push({x:new Date(n.getFullYear(),n.getMonth(),n.getDate()),y:c.counterDay}),c.counterDay>l&&(l=c.counterDay));var O={"7-days":"Last 7 days","30-days":"Last 30 days",week:"Last 30 Weeks",month:"Last 30 Months",year:"Last 10 Years","today-all":"Today - All Records"},k={titleFontColor:"#c6ff00",labelFontColor:"#c6ff00",labelAngle:70,gridThickness:1};switch(t){case"year":k.title=O[t],k.valueFormatString="YYYY",k.interval=1,k.intervalType="year";break;case"month":k.title=O[t],k.valueFormatString="M-YYYY",k.interval=2,k.intervalType="month";break;case"week":k.title=O[t],k.labelFormatter=function(e){return"W"+(e=new Date(e.value)).getWeekNumber()+"/"+e.getFullYear().toString().substr(2)},k.interval=2;break;case"today-all":k.title=O[t],k.labelFormatter=function(e){return(e=e.chart.data[0].dataPoints[e.value])?e.label:""};break;default:k.title=O[t],k.valueFormatString="DD/MM",k.interval=1,k.intervalType="day"}new CanvasJS.Chart("chart-container",{animationEnabled:!0,backgroundColor:"#2f2f2f",title:{text:c.title,fontColor:"#c6ff00",fontSize:"60"},axisX:k,axisY:{labelFontColor:"#c6ff00",scaleBreaks:{auoCalculate:!0,spacing:4,type:"zigzag"},interval:l<=10?1:l<=20?2:l<=50?5:l<=100?10:l<=200?20:l<=500?50:100*Math.ceil(l/1e3),maximum:l+1},toolTip:{enabled:!0,animationEnabled:!0,fontColor:"#c6ff00",fontSize:60,backgroundColor:"#2f2f2f80",contentFormatter:function(e){var o="";return e.entries.forEach((e=>{var a;"today-all"==t?o+="<strong>"+e.dataPoint.label+"</strong>: "+e.dataPoint.y:e.dataPoint.x instanceof Date?(a=e.dataPoint.x.getMonth()+1+"-"+e.dataPoint.x.getFullYear(),o+="<strong>"+e.dataPoint.y+"</strong>: <small>"+a+"</small>"):o+="<strong>"+e.dataPoint.y+"</strong>"})),o}},data:[{type:"today-all"==t?"column":"area",dataPoints:a,axisXIndex:0,color:"#c6ff00",markerSize:15,markerColor:"green",lineThickness:5,fillOpacity:"today-all"==t?.9:.2}],height:500}).render()}function w(e){s=e-1,r.setDate(n.getDate()-s);for(var t=r,c=0;c<s;c++){var d=o.logs.find((e=>new Date(e.date).getDate()==t.getDate()&&new Date(e.date).getMonth()==t.getMonth()&&new Date(e.date).getFullYear()==t.getFullYear())),g={};g.y=void 0!==d?d.value:0,g.x=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a.push(g),l<g.y&&(l=g.y),t.setDate(t.getDate()+1),i+=g.y}i+=selectedRecord.counterDay,$("#chart-panel .total span").text(i)}}function autoID(e,t){return void 0===e&&(e=STORE.records),void 0===t&&(t="id"),Math.max.apply(Math,e.map((function(e){return e[t]})))+1}function thousandFormat(e){return e<1e3?e:1e3<=e&&e<1e6?+(e/1e3).toFixed(1)+"K":1e6<=e&&e<1e9?+(e/1e6).toFixed(1)+"M":void 0}function switchAuthPanel(){$(".switch-auth button").removeClass("active"),$(this).addClass("active"),$("#auth-panel .auth").removeClass("active"),$("#auth-panel .auth."+$(this).attr("data-auth")).addClass("active"),$authPanel.find(".username").focus()}function bootApp(){fillValues(),setProgress(void 0===selectedRecord?0:goalPercent()),hasInitializedListeners||initListeners(),$panel.find(".settings").removeClass("show"),$panel.find("#showSettings").removeClass("d-none"),isLoggedIn()||(console.log("bootApp - Ensuring logout button is hidden"),$("#logoutBtn").addClass("d-none"),$(".login-buttons-container").removeClass("d-none"))}function showAuthPanel(){$authPanel=$("#auth-panel"),$("#auth-panel input").on("input keypress",validate_auth),$("#auth-panel .auth button.show-1").on("click",(function(){$authPanel.find(".auth .swipe-container").removeClass("show-2"),$authPanel.find("#loginBtn").prop("disabled",!1).find("span").removeClass("d-none"),$authPanel.find("#loginBtn").find("span.1.3, span.2.3, i.fa-spinner").addClass("d-none"),$authPanel.find(".login-panel input[type=password]").val("")})),$("#loginBtn").on("click",connectLogin),$("#register").on("click",(function(){db.register})),$(".switch-auth button").on("click",switchAuthPanel),$authPanel.addClass("show"),$authPanel.find(".username").focus()}function validate_auth(e){"keypress"==e.type&&13==e.keyCode&&$("#auth-panel .auth.active button.do-auth").trigger("click"),$authPanel.find("#loginBtn").prop("disabled",0==$(this).val().trim()),$authPanel.find("#register").prop("disabled",0==$(this).val().trim())}function login(){showAuthPanel()}function connectLogin(){(db=void 0===db?new Database:db).login()}function isLoggedIn(){return!(void 0===TOKEN||""===TOKEN||null===TOKEN||null==USER||"null"===USER.email||""===USER.email||void 0===USER.email)}function logout(){confirm("Are you sure you want to logout?")&&(console.log("Logout initiated"),db&&db.signOut(),USER=TOKEN=null,Cookies.remove("token"),Cookies.remove("user"),$("#logoutBtn").addClass("d-none"),$(".login-buttons-container").removeClass("d-none"),console.log("Cookies cleared, reloading page"),setTimeout((function(){window.location.reload()}),100))}function save(e){isLoggedIn()?db.save():saveSTORE(e)}function saveSTORE(e){var t,o;"all"!=(e=void 0===e?"all":e)&&"records"!=e||Cookies.set("records",STORE.records,cookieOptions),"all"!=e&&"selectedIndex"!=e||Cookies.set("selectedIndex",STORE.selectedIndex,cookieOptions),"all"!=e&&"history"!=e||Cookies.set("history",STORE.history,cookieOptions),"logging"==e&&(t=new Date,(o=new Date(Date.parse(STORE.history.lastWriting))).getDate()==t.getDate()&&o.getMonth()==t.getMonth()&&o.getFullYear()==t.getFullYear()||(STORE.history.lastWriting=t.toLocaleString("en"),console.log("History is lastWritten today",t.toLocaleString("en")),$.each(STORE.records,(function(e,t){$.each(STORE.history.all,(function(e,o){var a;t.id==o.recordId&&((a=new Date).setDate(a.getDate()-1),o.logs.push(new Log(a.toLocaleString("en"),t.counterLog)),t.counterLog=0)}))})),Cookies.set("history",STORE.history,cookieOptions),console.log("Logging saved!"))),console.log("all"==e||"records"==e?"records":"","all"==e||"selectedIndex"==e?"selectedIndex":"","all"==e||"history"==e?"history":"","saved !")}function signin(){var e;void 0===db&&(db=new Database),"google"==$(this).data("signin-type")?e=new firebase.auth.GoogleAuthProvider:"facebook"==$(this).data("signin-type")&&(e=new firebase.auth.FacebookAuthProvider),e.addScope("email"),db.do_signin(e)}function signout(){(db=void 0===db?new Database:db).signOut()}window.onload=init;
</script>

    </body>    
</html>